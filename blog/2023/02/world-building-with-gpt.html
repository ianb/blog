<!DOCTYPE html>
<html lang="en">
<head>
        <title>World Building With GPT</title>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
          <link rel="stylesheet" href="https://ianbicking.org/theme/css/style.min.css">
        <!--<link rel="stylesheet" href="https://ianbicking.org/theme/css/main.css" type="text/css" />-->
        <link href="https://ianbicking.org/feeds/atom.xml" type="application/atom+xml" rel="alternate" title="Ian Bicking: a blog Atom Feed" />
        <link rel="icon" href="https://ianbicking.org/favicon.ico">

        <!--[if IE]>
                <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->

        <!--[if lte IE 7]>
                <link rel="stylesheet" type="text/css" media="all" href="https://ianbicking.org/css/ie.css"/>
                <script src="https://ianbicking.org/js/IE8.js" type="text/javascript"></script><![endif]-->

        <!--[if lt IE 7]>
                <link rel="stylesheet" type="text/css" media="all" href="https://ianbicking.org/css/ie6.css"/><![endif]-->

</head>

<body id="index" class="home">
  <div id="main-wrapper1">
  <div id="main-wrapper2">
  <div id="main-container">
        <header id="banner" class="body">
                <h1><a href="https://ianbicking.org">Ian Bicking: a blog </a></h1>
        </header><!-- /#banner -->
<section id="content" class="body">
    <article>
        <header        style="background-image: url(https://ianbicking.org/media/cover-images/world-building-with-gpt.png); background-size: cover; background-position: center; height: 300px; width: 100%;        margin-bottom: 1em; background-color: #000; height: 190px;"
>
        <div        style="color: #fff; background-color: rgba(0, 0, 0, .3); display: inline-block; padding: 0 0.5em;"
>
            <div class="published" title="2023-02-27T00:00:00-06:00"            style="color: #fff;"
>
                Monday, February 27th, 2023
            </div>
            <h1 class="entry-title">
                <a
                    href="https://ianbicking.org/blog/2023/02/world-building-with-gpt.html"
                    rel="bookmark"
                    title="Permalink to World Building With GPT"
                    style="color: #fff;"
                    >World Building With <span class="caps">GPT</span></a
                >
            </h1>
        </div>
        </header>

        <div class="entry-content"><p>I&#8217;ve been doing lots of experiments with <span class="caps">GPT</span>, though I&#8217;ve only <a href="https://ianbicking.org/blog/2023/01/infinite-ai-array.html">written about one</a> until now&#8230; the more serious something is the harder it is to call it finished or identify the outcomes. Here I&#8217;ll describe something a bit lighter: world building, or specifically city building, with <span class="caps">GPT</span>.</p>
<p>This post is for people who are interested in building interactive tools on top of <span class="caps">GPT</span> and want to see some of the things I&#8217;ve encountered and what I&#8217;ve found that is successful and what is still a&nbsp;challenge.</p>
<h1>Where it&nbsp;started</h1>
<p>I enjoy game worlds where the world seems alive and the details suggest a backstory. The real world both is and isn&#8217;t this way: every house has stories, people invested in its details, each building is occupied and reoccupied repeatedly. But our world is also quiet, private, less eccentric than we might want, and imaginary worlds can be fun. Procedurally generated roguelike games give some of the excitement of exploration but lack story and depth. A game like Stardew Valley has stories but is necessarily pretty small and&nbsp;static.</p>
<p>With generative <span class="caps">AI</span> we can change these trade-offs! Is it possible to make a big world that is both eclectic and consistent? Can it include story and personality? I don&#8217;t know the answer, but I&#8217;d like to share what I&#8217;ve&nbsp;got&#8230;</p>
<h1>The&nbsp;tool</h1>
<aside>(Sidebar is for concrete examples)</aside>

<p>In a previous experiment in story building I used a step-by-step approach: generate the first passage, generate a next passage, etc. That&#8217;s appealing and simple but leads to a wandering and unstructured narrative. I believe in both stories and worlds we want a kind of fractal complexity: at each scale we want most things to be &#8220;typical&#8221; but also some surprise. In a story the surprises might go from large to small scale like: an unusual character arc, a surprise plot development, an alternate perspective, an unexpected response in dialog, a perceptive detail in a description, and an unusual word in a sentence. If you always write the-most-likely-next-thing then it&#8217;ll be boring. If you only write surprises then there&#8217;s nothing to even be surprised&nbsp;about.</p>
<p>Similarly we want to build a world or city that expresses a broad theme and consistency, but also has diversity and surprises throughout it. To do this I&#8217;ve approached the building&nbsp;hierarchically:</p>
<ol>
<li>Establish the type of city (medieval, fantasy, noir, etc). Give it a name and some&nbsp;story.</li>
<li>Identify distinct&nbsp;neighborhoods.</li>
<li>Create buildings in those&nbsp;neighborhoods.</li>
<li>Create people associated with the&nbsp;buildings.</li>
<li>Populate the buildings with rooms, furniture, and&nbsp;objects.</li>
</ol>
<p>There are problems with this approach that I&#8217;ll touch on later, but it&#8217;s a&nbsp;start.</p>
<p>You can see it in action&nbsp;here:</p>
<iframe style="width: 100%; aspect-ratio: 16/9; display: block" src="https://www.youtube.com/embed/YUEXo3wrf70" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>

<h1>What&nbsp;works?</h1>
<p>Some stuff I really&nbsp;like&#8230;</p>
<h3><span class="caps">GPT</span>-generated&nbsp;lists</h3>
<aside>Examples of city theme suggestions:
<ol><li>A sci-fi city on Mars with interplanetary&nbsp;trade</li>
<li>A space station orbiting&nbsp;Earth</li>
<li>A Muslim city with a vast&nbsp;bazaar</li>
<li>A magical kingdom with a cursed&nbsp;castle</li>
<li>A pirate-infested Caribbean port&nbsp;city</li>
<li>An Aztec city hidden in a remote&nbsp;jungle</li>
</aside>

<p><span class="caps">GPT</span> is good at coming up with lists: lists of city types, names, people. As I used the tool more I started to have my own opinions on what I wanted to make, but those lists were an important part of expanding my own imagination. I&#8217;ve made <a href="https://www.youtube.com/watch?v=nsIPC_eqfwg">other experiments</a> where I filled in all the initial information by hand without any <span class="caps">GPT</span> suggestions, and I miss the&nbsp;lists.</p>
<h3>Natural language&nbsp;context</h3>
<aside>Example backstory suggestions for a jungle city:
<ol>
<li>The economy of Xochiciahuatl revolves around agriculture, fishing, and crafts such as pottery and&nbsp;textiles.</li>
<li>The geography of the city boasts dense jungle, mountainous terrain, and a valley basin surrounding an expansive&nbsp;lake.</li>
<li>The level of technology present in the city is quite advanced, with aqueducts, terraced gardens, and even a canal&nbsp;network.</li>
<li>The cultural context of Xochiciahuatl is multifaceted, with influences from indigenous tribes, the Spanish, and African&nbsp;slaves.</li>
</ol></aside>

<p>The cities are formed in a top-down way, and all the top layers (city, backstory, neighborhood) are purely context. The top layer descriptions are very important but have no need for structure, it&#8217;s all just language. Not every aspect has to be enumerated, just the ones that seem important for this&nbsp;city.</p>
<h3>Reinforcing city&nbsp;character</h3>
<aside>Example neighborhood suggestions for a space station:
<ol>
<li>The Gateway: The Gateway is the official entrance to Aeterna Station. It is a grand, soaring structure that serves as a reminder of the city&#8217;s ambition and&nbsp;capability.</li>
<li>Solaria: Located in the “sunshine zone,” Solaria is where the people of Aeterna Station can find some of the best dining and entertainment in the city. It is a great place to relax and enjoy the view of Earth&nbsp;below.</li>
<li>Agri-Plex: The Agri-Plex is a large, domed area devoted to growing food and other crops. It provides the citizens of Aeterna Station with the necessary&nbsp;sustenance.</li>
<li>Stabilization Zone: This is the area where the station&#8217;s mechanical infrastructure is maintained. Regularly monitored and kept running at peak efficiency, the Stabilization Zone is vital for keeping the station operating&nbsp;smoothly.</li>
</ol></aside>

<p>A general character to the city (e.g., &#8220;fantasy city&#8221;) isn&#8217;t enough to build something consistent. The character of the city needs to be repeated and reinforced at different levels. Details like architecture and building materials may have to be&nbsp;specified.</p>
<p>This is primarily done at the neighborhood level, though it would benefit from building-specific attributes more strongly informing person generation. For instance in a fantasy city it&#8217;s common that everyone will start out powerful and loyal and wise, even when they occupy a hovel or explicitly partake in the dark&nbsp;arts.</p>
<h3>Structured&nbsp;output</h3>
<aside>
Structure of a building:
<blockquote><strong>name:</strong> Goblin Smithy<br/>
<strong>description:</strong> A small, smoky workshop where Goblin tradesmen craft magical weapons and armor<br/>
<strong>floors:</strong> 1<br />
<strong>widthInMeters:</strong> 4<br/>
<strong>depthInMeters:</strong> 4</blockquote></aside>

<p>When we get to parts with specific structure it&#8217;s a comfortable transition. Buildings have sizes, people have roles, etc. <span class="caps">GPT</span> can fill in these details. If you wanted to plug the city into a map builder or other structured game format, you can produce the metaata you&nbsp;need.</p>
<h3>Filling out content you&nbsp;create</h3>
<aside>In response to &#8220;a whimsical factory for magical robots. Give it a fun name and description&#8221;:
<blockquote><strong>name:</strong> The Clockwork Dream factory<br />
<strong>description:</strong> This magical factory is a bustling center of activity where magical robots are assembled and activated for a variety of tasks. Powered by an array of enchantments, the whirring machines churn out a steady supply of dream-like robots that fill the city with a sense of cheerful industry. Acrid smoke rises from the chimneys as the robotic workers tirelessly toil away, overseen by a crew of diligent engineers.<br/>
<strong>floors:</strong> 4<br/>
<strong>widthInMeters:</strong> 10<br/>
<strong>depthInMeters:</strong> 10</blockquote></aside>

<p>When you don&#8217;t want to take a <span class="caps">GPT</span> suggestion, <span class="caps">GPT</span> is pretty good at filling in the details in something you produce. So if you ask for a &#8220;factory&#8221; it works well for <span class="caps">GPT</span> to turn that into a fuller description, size,&nbsp;etc.</p>
<p>I only implemented this for structured elements, and not freeform fields like neighborhood descriptions. I should fix&nbsp;that!</p>
<h3>Pushing <span class="caps">GPT</span>&nbsp;helps</h3>
<aside>First suggestions of furniture for an <em>Activation Chamber</em> in the Clockwork Dream factory, where robots are granted power:
<ol><li>Activation&nbsp;Table</li>
<li>Alchemy&nbsp;Cauldron</li>
<li>Arcane&nbsp;Anvil</li>
</ol>
Kind of boring; adding &#8220;weird steampunk-inspired machines for giving robots a soul&#8221; to the prompt:
<ol><li>Tin Man Activator: This machine is a steampunk-inspired machine for giving robots a soul. In the center is a glowing magical orb that emits strange and mysterious magical energies. <em>[Lost points for copying my&nbsp;language!]</em></li>
<li>Alchemical Hammer of Life: This contraption is an alchemical hammer with a large hammerhead and a magical gemstone set in the top. A switch activates the powerful device, granting a spark of life to any robotic body that is placed beneath&nbsp;it.</li>
</ol></aside>

<p>Small contextual prompt additions can be helpful. For instance <span class="caps">GPT</span> has sometimes wanted to suggest sofas and armchairs for a factory, but a small note (&#8220;factory equipment and tools&#8221;) can fix&nbsp;that.</p>
<p><strong>However</strong> I&#8217;ve found this needed too often for character descriptions. The descriptions start out seeming <span class="caps">OK</span> but begin to feel boring and repetitious. The building and neighborhood need to more explicitly affect the people prompt. Right now the prompt is&nbsp;effectively:</p>
<blockquote>
<p><strong>[General city context]</strong> <br/> A list of owners, caretakers, residents, tenants, and other inhabitants for <strong>[Building Name]</strong> (<strong>[Building Description]</strong>) Give each person an interesting and culturally appropriate name and a colorful background and&nbsp;personality.</p>
</blockquote>
<p>If you ask a more open-ended question&nbsp;like:</p>
<blockquote>
<p>Make a numbered list of the kinds of people that would occupy a building called <strong>[Building Name]</strong> described as: <strong>[Building&nbsp;Description]</strong></p>
</blockquote>
<p>then you get a good list of professions and roles (better than my hardcoded set). If you add&nbsp;this:</p>
<blockquote>
<p>For each item include a 10-word note on the likely personality, limitations, and character&nbsp;flaws</p>
</blockquote>
<p>then you also start battling the relentless positivity, with results like &#8220;Supply Chain Managers: Responsible and knowledgeable, but prone to micromanaging&#8221; and &#8220;Magical Robots: Resourceful and imaginative, but restricted by&nbsp;programming&#8221;.</p>
<p>[Note: after writing this I implemented a list of jobs/roles as part of buildings; it was&nbsp;effective!]</p>
<h3>Putting people in buildings is&nbsp;great</h3>
<p>For all my criticisms in the previous section, adding people is great and I only want it to be better! Buildings have some history and personality, but the people associated with them make it seem much more&nbsp;alive.</p>
<blockquote>
<p><strong>Razzaqua Sephina</strong>: Razzaqua Sephina is the mysterious and enigmatic owner of the Warehouse of the Cankered Crypt. She is a master at thaumaturgy, specializing in curses and dark artifacts. Those who have met her say she is as cold as ice. Despite this, locals claim she is fiercely loyal and protective of her&nbsp;tenants.</p>
<p><strong>Kana Wazri</strong>: Kana is a charming young student from a well-known family of merchants. She has a great love of magic but isn&#8217;t incredibly talented at it. Despite this, she is always seen studying and researching the magical arts, hoping to one day unlock her true&nbsp;potential.</p>
<p><strong>Morgaine de Sombra</strong>: Morgaine de Sombra was an aristocrat in the court of King Tragen before she found her calling in the dark arts. She runs a tight ship, instilling a sense of discipline among the students of the Academy. Morgaine has a no-nonsense attitude when it comes to teaching and is feared by many of the&nbsp;students.</p>
<p><strong>Fayza Silverwing</strong>: Fayza is a beautiful priestess, wearing a dress of shimmering pearlescent feathers. She is gentle and kind, and her voice is melodious and soothing. She uses her singing voice to call down the blessings of the sky goddess, and to ward off evil. She also tends to the birds of the temple, providing them with a special place to&nbsp;dwell.</p>
<p><strong>Mathilde Velasquez</strong>: Mathilde Velasquez was a cunning and ambitious woman in life, a talented emissary and negotiator. She was the right hand of an 18th century nobleman, and in death, she still roams the halls of the Mansion, planning out her strategies and scheming her way through the&nbsp;afterlife.</p>
</blockquote>
<p>I had to nudge some of these into existence, but I&#8217;m still quite enamored with the variety it can produce, and believe <span class="caps">GPT</span> can do much better with further&nbsp;refinement.</p>
<h1>What doesn&#8217;t&nbsp;work?</h1>
<p>I think these things could be fixed, but they aren&#8217;t yet, and if you implement something similar you are likely to encounter these same&nbsp;problems:</p>
<h3>Reverting to&nbsp;normal/boring</h3>
<p><span class="caps">GPT</span> is constantly normalizing things, including modernization. I want to make weird stuff, but also stylistically consistent&nbsp;stuff.</p>
<p>As a general rule asking <span class="caps">GPT</span> for a list will help it be more creative. But when it gets on a roll producing normal/boring things, it will fill out the list with normal/boring&nbsp;things.</p>
<p>Examples of this: &#8220;smart homes&#8221; (there is no time when I want &#8220;smart homes&#8221;), lots of references to tourism, &#8220;high-end restaurants&#8221;. How many cities should have art galleries? The primary attribute of a harbor area is not its historic cobbled streets and tourist amenities. These are all examples where <span class="caps">GPT</span> introduces a modern&nbsp;perspective.</p>
<h3><span class="caps">GPT</span> is desperately&nbsp;positive</h3>
<aside>
Some characters; note the pattern:
<ol>
<li>Anavel Shaz: a powerful alchemist and&nbsp;scholar</li>
<li>Lalania Nightshadow: A powerful sorceress and former Keeper of the Order of&nbsp;Magi</li>
<li>Brynja Rahman: a talented enchantress whose skill is&nbsp;unrivaled</li>
</ol></aside>

<p>Every building is grand. Every character is loyal and helpful. Every character is competent, respected, and&nbsp;wise.</p>
<p>If you ask very explicitly for flaws you can get <em>some</em>. It&#8217;s very hard to get a truly despicable character. It&#8217;s hard to even get a realistically boring character, one who is not very competent or smart. It&#8217;s a fight, but armed with prompts we can still win the&nbsp;battle!</p>
<p>Some things that have&nbsp;helped:</p>
<ol>
<li>Asking for &#8220;exotic names&#8221;: this seems to result in a wide variety of ethnic names and other interesting combinations. For any one list <span class="caps">GPT</span> will often choose one ethnicity, such as Arabic names or Japanese&nbsp;names.</li>
<li><span class="dquo">&#8220;</span>Colorful background/history&#8221;: this adds some&nbsp;playfulness</li>
<li>Mentioning &#8220;culture&#8221;: this seems to fight against normalizing to modern American&nbsp;themes</li>
<li>Asking for &#8220;personality&#8221; or &#8220;character&#8221; in something: similar to &#8220;colorful&#8221;, this also tends to extend the&nbsp;descriptions</li>
<li>Ask for &#8220;negative attributes&#8221;, &#8220;flaws&#8221;, &#8220;Achilles Heal&#8221;: descriptions will still be positive, but you&#8217;ll get some additional negative&nbsp;attributes</li>
</ol>
<h3>Fine detail is too much&nbsp;work</h3>
<p>Once you generate a building and occupants you also have an opportunity to build rooms, to put furniture in those rooms, to put items in those rooms, and finally to define the room connections. This takes forever and is very&nbsp;boring!</p>
<p>Many rooms have tables! Many buildings have a storage room! Many kitchens have&nbsp;utensils!</p>
<p>To generate real maps you do need these more concrete features. A building with no interior is no fun. An interior with no objects is no&nbsp;fun.</p>
<p>If I were to approach this again I&#8217;d use this&nbsp;strategy:</p>
<ol>
<li>Ask <span class="caps">GPT</span> for building &#8220;types&#8221; when creating a building. Maybe offer some initial types, but also invite <span class="caps">GPT</span> to make up new&nbsp;types.</li>
<li>For each type of building ask <span class="caps">GPT</span> to create an expansive list of rooms. Give the rooms types as well (hang-out, cooking, storage, etc). Ask for a range of room&nbsp;sizes.</li>
<li>For each type of room, or perhaps building-type/room-type combos, ask about furniture and items. Again ask for a long and expansive&nbsp;list.</li>
</ol>
<p>At this point you could use a simple non-<span class="caps">GPT</span> algorithm to assign rooms to buildings. But you could also use abbreviated forms of these list and ask for <span class="caps">GPT</span> to fill out a building,&nbsp;like:</p>
<blockquote>
<p>The building is called &#8220;<strong>[Building Name</strong>]&#8221; and is described as: <strong>[Building Description]</strong>
Fill out this&nbsp;list:</p>
<ol>
<li><strong>[Room type]</strong>:&nbsp;[description]</li>
<li><strong>[Furniture]</strong>:&nbsp;[description]</li>
</ol>
</blockquote>
<p>&#8230; basically letting <span class="caps">GPT</span> customize the building in one step, given a randomly chosen set of specific&nbsp;elements.</p>
<h3>Bad spatial&nbsp;reasoning</h3>
<p><span class="caps">GPT</span>&#8217;s spatial reasoning isn&#8217;t very good (unsurprisingly). It&#8217;s <span class="caps">OK</span> at general sizes and heights of buildings, but when it has to relate spaces to each other (like placing rooms in buildings) it doesn&#8217;t&nbsp;understand.</p>
<p>This probably calls for traditional procedural generation&nbsp;techniques.</p>
<p>It&#8217;s possible that <span class="caps">GPT</span> could help by coming up with constraints. For instance when generating rooms <span class="caps">GPT</span> is asked if the room is &#8220;public&#8221;, &#8220;private&#8221; (impolite to enter), &#8220;secure&#8221; (locked), or &#8220;secret&#8221;. These hints could provide constraints that keep the room layouts&nbsp;plausible.</p>
<h3>Every detail of a prompt is a&nbsp;suggestion</h3>
<p>It&#8217;s very hard to tell <span class="caps">GPT</span> what is important and what is just framing. Some&nbsp;examples:</p>
<ol>
<li>In an early prompt I used an example like <code>{name: "John Doe"}</code> for generating a person. <span class="caps">GPT</span> started coming up with names like &#8220;Jack Doe&#8221;, &#8220;John Smith&#8221; etc., <em>specifically</em> choosing stereotypically generic names. I was able to improve it with a combination of asking for &#8220;interesting and culturally appropriate names&#8221; and replacing the example with <code>{name: "FirstName LastName"}</code>. (But now every so often <span class="caps">GPT</span> spits out FirstName LastName characters; you can&#8217;t win them&nbsp;all.)</li>
<li>Even a word like &#8220;building&#8221; is a suggestion. I wanted to make a floating pirate city made up of attached boats. <span class="caps">GPT</span> wasn&#8217;t sure whether to make things that matched my city description, or that matched what a &#8220;building&#8221; typically is, and it suggested a lot of boat-inappropriate structures. Explicit prompt additions can help, but it would be even better if some of the core language could be&nbsp;substituted.</li>
<li>My beaver city also featured far too few dams and dens. Which is too bad because <span class="caps">GPT</span> is quite good at helping fill out these weird combinations so long as the prompt doesn&#8217;t fight with the&nbsp;premise.</li>
</ol>
<p>I can imagine having <span class="caps">GPT</span> rewrite some of the prompts as the city starts to be&nbsp;defined.</p>
<p>Another option is to have a glossary of terms where the author can adjust a few terms. I&#8217;ve specifically allowed the word &#8220;neighborhood&#8221; to be substituted (for quarter/district/etc), though the effect is minimal and <span class="caps">GPT</span> is happy to use different terms for neighborhoods without any special suggestions. Maybe other words are more&nbsp;impactful.</p>
<h3>Constantly poking at the prompts is&nbsp;tiresome</h3>
<aside>Notes I added for <a href="https://llm.ianbicking.org/citymaker/?name=builtin_talamora">Talamora</a>:
<ol><li>include a both haunted/ghost district and a desolate magically polluted&nbsp;district</li>
<li>include lots of magical finance and investment, as well as dark and occult&nbsp;elements</li>
<li>include different schools of magic: nature, clairvoyance, battle magic, golems; give each an imaginative&nbsp;name</li>
<li>include a list of temples for many&nbsp;gods</li>
<li>include haunted buildings with dark&nbsp;histories</li>
<li>include a list of different fraternal orders of magicians from different magical&nbsp;schools</li>
<li>Include lists of ruins with specific and mind-bending dangers due to the magical&nbsp;pollution</li>
</ol></aside>

<p>Sometimes <span class="caps">GPT</span> just doesn&#8217;t come up with the right things at all. When that happens there&#8217;s a few ways to get <span class="caps">GPT</span> to change its output: adding or changing the overall context/backstory, making suggestions for a specific list, and asking for specific&nbsp;items.</p>
<p>Getting fun, interesting, and varied entities requires lots of nudging and iteration. But there&#8217;s not many ways to build up those notes. You can add the notes to the global context, and that can be a good idea, but it&#8217;s not a good iteration&nbsp;process.</p>
<p>I have a hunch there&#8217;s a way to experiment when creating specific buildings/etc, and then use <span class="caps">GPT</span> itself to percolate that up into more general prompt changes. But it&#8217;s only a&nbsp;hunch.</p>
<h3>Hallucinating&nbsp;metadata</h3>
<p><span class="caps">GPT</span> will hallucinate metadata. This is both a problem and an&nbsp;opportunity.</p>
<p>If you want to turn the output into structured data for another program you might find it annoying when it uses <code>{size: "6x10"}</code> instead of <code>{widthInMeters: 6, depthInMeters: 10}</code>.</p>
<p>More often it&#8217;s actually interesting metadata that you might want to use more widely. For&nbsp;instance:</p>
<blockquote>
<p><strong>name:</strong> The Cabal Of Witches <br/> <strong>hierarchy:</strong> Grand Witch -&gt; Witch -&gt; Apprentice -&gt; Initiate <br/> <strong>initiates:</strong> Keeper of the Dark Art, Spiritualists, Alchemists,&nbsp;Shaman</p>
<p><strong>name:</strong> The Circle of Mages <br/> <strong>hierarchy:</strong> Grand Magus -&gt; Magus -&gt; Apprentice -&gt; Initiate <br/> <strong>initiates:</strong> Evokers, Enchanters, Abjurers,&nbsp;Illusionists</p>
<p><strong>name:</strong> Abandoned Warehouse <br/> <strong>dangers:</strong> magically-altered creatures, unknown chemical pollutants, trapdoors and hidden&nbsp;passages</p>
</blockquote>
<p>It seems odd to produce this metadata when presumably nothing is ready to consume it. But these attributes elicit responses from <span class="caps">GPT</span>, and do so more consistently than natural language&nbsp;requests.</p>
<p>Adding this metadata gives <strong>theme</strong> and <strong>variation</strong>. The attribute is the theme, the value is the variation. This makes the set of things you&#8217;ve created more comprehensible, with a structure that makes it easier to appreciate the&nbsp;variety.</p>
<p>I don&#8217;t know how to expose this! Should we ask <span class="caps">GPT</span> to brainstorm attributes ahead of time? Invite it to hallucinate more widely and then the author picks the ones they like to become part of the prompts? Then&#8230;&nbsp;backfill?</p>
<h3>Corruption and&nbsp;fixation</h3>
<p>Some of the magic of <span class="caps">GPT</span> is how it implicitly learns from context. Often it learns the wrong thing. This is particularly noticeable in ChatGPT, where it will often fixate on something despite or even because of&nbsp;corrections.</p>
<p>This tool is much more explicit about context and doesn&#8217;t have anything that is specifically a chat.&nbsp;Still&#8230;</p>
<ol>
<li>You&#8217;ll think the content of the backstory is all that matters, but the tone also informs <span class="caps">GPT</span>. Because <span class="caps">GPT</span> probably created that backstory this doubles down on its tone. (Is this feedback part of its tedious&nbsp;positivity?)</li>
<li>When you ask for &#8220;more&#8221; of a list it will feed the existing list into the prompt&#8230; this helps it create new and distinct items, and sometimes helpfully refers to previous items (like creating interesting relations between people), but if you didn&#8217;t like the suggestions before you are unlikely to like the new ones. It copies tone, but also description length, metadata, name ethnicities, and architectural&nbsp;styles.</li>
</ol>
<h3><span class="caps">GPT</span> is&nbsp;expensive</h3>
<p><a href="https://llm.ianbicking.org/citymaker/?name=builtin_talamora">Talamora</a> cost me about $6 in <span class="caps">GPT</span> <span class="caps">API</span> costs to generate. That&#8217;s a&nbsp;lot!</p>
<p>Because I&#8217;m paying for <span class="caps">API</span> costs directly, and because the costs increase only when I use the tool, there&#8217;s a natural balance: if I&#8217;m not having fun and enjoying the output, I won&#8217;t generate more costs. By the time I made Talamora I had enough improvements that I actually enjoyed the process and my enthusiasm wasn&#8217;t just built on dreams (which is the fuel for the first phase of any&nbsp;project).</p>
<p>The cost means I&#8217;m not motivated to automate any of the authoring. Perhaps because the <em>output</em> has little intrinsic value, so reducing the author&#8217;s involvement is a net&nbsp;loss.</p>
<p>It also means I can&#8217;t easily make this available to other people. People are providing these services with &#8220;credit&#8221; models and subscriptions but the underlying costs are enough that it&#8217;s hard to imagine that working. So for now you can <a href="https://llm.ianbicking.org/">try this</a> with your own <span class="caps">API</span> key, paying OpenAI directly, and managing your own&nbsp;budget.</p>
<p>There are some ways that this could be made more&nbsp;efficient:</p>
<ol>
<li>Use other models (e.g., <code>text-ada-001</code>) for some tasks. Though few of the tasks feel amenable to the cheaper&nbsp;models.</li>
<li>Get suggestions right the first time. For Talamora in particular I used lots of prompt adjustments to get results I was happy with. Overall prompt improvements would have avoided many of&nbsp;those.</li>
<li>Reduce context on some queries. The base context of most prompts includes the whole city backstory, neighborhood, etc. That&#8217;s not necessary for every query. Perhaps some of the context is only needed for some types of&nbsp;queries.</li>
<li>Get more out of every query. If there&#8217;s multiple queries then the context is repeated for each. This saves money when some queries produce dead ends, such as a building that the author doesn&#8217;t like and doesn&#8217;t want to expand. But adding a little metadata to each item is usually a good&nbsp;investment.</li>
<li>Improve the quality. The more generated stuff you keep, the less queries you need to achieve some degree of success or satisfaction. Investing more time in quality parent context, like backstory and neighborhoods, will pay off with the both larger and more expensive leaf nodes like&nbsp;buildings.</li>
<li>Summarize to reduce context. Right now this concatenate the context information. It might save some space by rephrasing that context, both combining the text in a more compact way, and selecting the salient details for generating specific kinds of&nbsp;items.</li>
<li>Estimating list size for choices. If you get a list of 7 items but then you ask for the list to be extended that is <em>much</em> more expensive than asking for 14 items up front. Similarly if you want 1 item then it&#8217;s cheaper just to make one item and not a long list. It&#8217;s possible that the parent could estimate the list size for the child, or that we could just make better general estimates and hardcode those list sizes into the&nbsp;prompts.</li>
</ol>
<h1>Image&nbsp;generation</h1>
<p>All these words are interesting but some images would also be interesting. Right now there are too many considerations to do a detailed comparison of all of them, and things are changing fast, so I&#8217;ll just give a scattering of&nbsp;thoughts.</p>
<h3>The&nbsp;generators</h3>
<p>I have a hard time understanding the array of <span class="caps">AI</span> image generators, but I&#8217;ve used these three enough to have&nbsp;opinions:</p>
<ol>
<li><a href="https://replicate.com/stability-ai/stable-diffusion">Stable&nbsp;Diffusion</a></li>
<li><a href="https://openai.com/dall-e-2/">Dall-E&nbsp;2</a></li>
<li><a href="https://www.midjourney.com/">Midjourney</a></li>
</ol>
<p>The first two have an <span class="caps">API</span>. That means I can integrate them directly into the tool, which has a real and significant workflow benefit. Midjourney has absolute no affordances to integrate it into another application, but it creates great images. Generally I&#8217;ve found Stable Diffusion to be unusable because it won&#8217;t create sensible compositions. There&#8217;s probably some flavor of Stable Diffusion that would work better, but there&#8217;s just too much going on! Dall-E is <span class="caps">OK</span> but it doesn&#8217;t have a natural sense of style and the resulting images&#8230; just aren&#8217;t very&nbsp;fun.</p>
<h3>Generating a&nbsp;prompt</h3>
<p>The easy way is just to give the text directly to an image generator and let it imagine things as it will. There&#8217;s a danger it will have insufficient context, like being unaware of the era or&nbsp;environment.</p>
<p>Let&#8217;s take a building to see. The base&nbsp;text:</p>
<blockquote>
<p><strong>Jubilous Forge:</strong> A bustling forge bustling with laughter and the smell of hot metal forges and alchemical potions, with ornate decorations on its two-story&nbsp;walls.</p>
</blockquote>
<p>It&#8217;s already a pretty visual&nbsp;description.</p>
<p>Here&#8217;s a quick prompt to expand the&nbsp;visuals:</p>
<blockquote>
<p>Given the building: Jubilous Forge: A bustling forge bustling with laughter and the smell of hot metal forges and alchemical potions, with ornate decorations on its two-story&nbsp;walls.</p>
<p>In 2-3 sentences make a detailed visual description of the exterior of the&nbsp;building:</p>
<p>The Jubilous Forge looks&nbsp;like</p>
</blockquote>
<p>And it completes&nbsp;with:</p>
<blockquote>
<p>a large, imposing structure, with walls of gray stone reaching two stories high. The windows are framed by intricate patterns of wrought iron and the door is adorned with a bright, golden door knocker. The outdoor walls are decorated with vibrant murals of blacksmiths and alchemists at work, lit up by the warm glow of nearby forge&nbsp;fires.</p>
</blockquote>
<p>This seems better! Unfortunately it is not&#8230; the use of the term &#8220;pillar&#8221; makes both Dall-E and Midjourney think of&nbsp;banks.</p>
<p>Here&#8217;s a generated image from the simple/unmodified building&nbsp;description:</p>
<p><img src="https://ianbicking.org/media/world-building-with-gpt/jubilant-midjourney-simple-1.png" alt="Midjourney - Isometric rendering of single building on a white background: Jubilous Forge: A bustling forge bustling with laughter and the smell of hot metal forges and alchemical potions, with ornate decorations on its two-story walls." class="content" /></p>
<p>And here it is with the modified&nbsp;description:</p>
<p><img src="https://ianbicking.org/media/world-building-with-gpt/jubilant-midjourney-prompted-1.png" alt="Midjourney - Isometric art of a single building on a white background: The Jubilous Forge looks like a large, imposing structure, with walls of gray stone reaching two stories high. The windows are framed by intricate patterns of wrought iron and the door is adorned with a bright, golden door knocker. The outdoor walls are decorated with vibrant murals of blacksmiths and alchemists at work, lit up by the warm glow of nearby forge fires." class="content" /></p>
<p>The first prompt, which leaves more latitude to Midjourney, works&nbsp;better.</p>
<p>Oh the other hand, in a jungle city there is a&nbsp;building:</p>
<blockquote>
<p><strong>The Zigzag Tower:</strong> A tall and slender tower with a zigzag facade, The Zigzag Tower is a temple dedicated to the reverence of&nbsp;nature.</p>
</blockquote>
<p>The Midjourney results are all bland modern&nbsp;towers:</p>
<p><img src="https://ianbicking.org/media/world-building-with-gpt/zigzag-midjourney-simple-1.png" alt="Midjourney - Isometric rendering of a single building on a white background: The Zigzag Tower: A tall and slender tower with a zigzag facade, The Zigzag Tower is a temple dedicated to the reverence of nature." class="content" /></p>
<p>When we include the city description and ask <span class="caps">GPT</span> to make a visual description we&nbsp;get:</p>
<blockquote>
<p>The Zigzag Tower looks like a towering pillar of grandeur that sharply cuts into the sky, with its unique zigzag facade. Its yellow-brown hues blend with its natural surroundings, giving off a sense of harmony with the environment. It is adorned with intricate carvings and sculptures of animals and plants that make it seem to come alive in its own&nbsp;right.</p>
</blockquote>
<p>The description doesn&#8217;t look that different but the effect is&nbsp;dramatic:</p>
<p><img src="https://ianbicking.org/media/world-building-with-gpt/zigzag-midjourney-prompted-1.png" alt="Midjourney - Isometric rendering of a single building on a white background: The Zigzag Tower looks like a towering pillar of grandeur that sharply cuts into the sky, with its unique zigzag facade. Its yellow-brown hues blend with its natural surroundings, giving off a sense of harmony with the environment. It is adorned with intricate carvings and sculptures of animals and plants that make it seem to come alive in its own right." class="content" /></p>
<h3>Describing the&nbsp;style</h3>
<p>If you ask for an image of a building that can mean all kinds of things. For instance this is what Stable Diffusion gives for the Jubilant&nbsp;Forge:</p>
<p><img src="https://ianbicking.org/media/world-building-with-gpt/jubilant-sd-no-prefix.png" alt="jumbled old style drawing of a building" class="content" /></p>
<p>Interesting! But not the format I intended. Here&#8217;s some additions to the prompt that&nbsp;help:</p>
<ol>
<li><span class="dquo">&#8220;</span>Isometric&#8221; is a very strong word and will align the perspective and set the camera&nbsp;angle.</li>
<li>Midjourney will happily make a stand-alone building. Dall-E often zooms too far in or gets confused, but it comes close. Stable Diffusion feels hopeless! I&#8217;d be curious if Stable Diffusion and Dall-E could be asked to infill a template photo; i.e., create a isometric-shaped-building-size-hole so it has to work in those&nbsp;constraints.</li>
<li><span class="dquo">&#8220;</span>White background&#8221; suggests the building should be rendered without an environmental&nbsp;context.</li>
</ol>
<p>This prompt seems decent for both Midjourney and Dall-E: <strong>Isometric rendering of single building on a white&nbsp;background</strong></p>
<h1>Conclusion</h1>
<p>Many of the lessons from this experiment could be applied to other top-down authoring&nbsp;environments:</p>
<ol>
<li>Establishing hierarchical&nbsp;context.</li>
<li>Using <span class="caps">GPT</span> to offer suggestions at each level with author&nbsp;selection.</li>
<li>Using a combination of natural language and structured&nbsp;output.</li>
<li>Include points of intervention to &#8220;speak to&#8221; <span class="caps">GPT</span>.</li>
<li>Be aware of all the language in a prompt; it all&nbsp;matters.</li>
<li>Use the tool a lot! The first couple things feel magical, but the magic will wear off after you&#8217;ve made a couple dozen things without special&nbsp;effort.</li>
</ol>
<p>If you want to try this yourself check out <a href="https://llm.ianbicking.org/citymaker/">llm.ianbicking.org</a>, or <a href="https://github.com/ianb/llm-garden">check out GitHub</a>. If you are curious about the exact prompts look for <code>prompt =</code> in <a href="104537541227697934010/content_cache/d34/d33/637">citymakerdb.js</a>. Note that this is a personal project, it&#8217;s monolithic and only organized well enough for me to&nbsp;understand.</p>
<p>Similarly: when using the site be warned I have not built it carefully for other people to use, stuff will be weird, errors will appear only in the <span class="caps">JS</span> Console, there are no promises. And you&#8217;ll have to bring your own <span class="caps">GPT</span> <span class="caps">API</span>&nbsp;key!</p>
<p>Comments welcome on <a href="https://hachyderm.io/@ianbicking/109937462683423813">Mastodon</a>, <a href="https://twitter.com/ianbicking/status/1630231712499376130">Twitter</a>, <a href="https://news.ycombinator.com/item?id=34967515">Hacker News</a>.</p>
<p>If you&#8217;ve gotten this far I will also throw in here that I (<a href="https://ianbicking.org">Ian</a>) am looking for a job, and maybe the best job for me is one that I don&#8217;t yet know exists. I&#8217;m particularly interested in the area of large language models, <a href="https://ianbicking.org/blog/2023/01/thoughts-on-voice-interfaces-2-llms.html">natural language interfaces</a>, new user interactions built on LLMs (especially their abilities to understand us in new ways). I&#8217;m excited about education, aiding in executive function, and human-centered interactions. <a href="mailto:ianbicking@gmail.com">Let me know if you have ideas</a>, <a href="https://www.linkedin.com/in/ianbicking/">or hit me up on LinkedIn</a> I would appreciate&nbsp;it!</p></div>
        <!-- /.entry-content -->
      </article>
</section>
        <section id="extras" class="body">
                <div class="links">
                  <h2><a href="https://ianbicking.org">here</a></h2>
                  <ul>
                    <li><a href="/blog/">blog</a></li>
                    <li><a href="/projects.html">projects</a></li>
                    <li><a href="https://ianbicking.org/archives.html">archives</a> &amp; <a href="https://ianbicking.org/categories.html">categories</a></li>
                    <li><a href="https://ianbicking.org/category/ai.html">category: ai</a></li>
                    <li><a href="https://ianbicking.org/category/javascript.html">category: javascript</a></li>
                    <li><a href="https://ianbicking.org/category/misc.html">category: misc</a></li>
                    <li><a href="https://ianbicking.org/category/mozilla.html">category: mozilla</a></li>
                    </ul>
                </div>
                <div class="social">
                        <h2>elsewhere</h2>
                        <ul>
                            <li><a href="https://ianbicking.org/feeds/atom.xml" type="application/atom+xml" rel="alternate">atom feed</a></li>

                            <li><a href="https://twitter.com/ianbicking">@ianbicking</a></li>
                            <li><a href="https://hachyderm.io/@ianbicking">@ianbicking@hachyderm.io</a></li>
                            <li><a href="https://github.com/ianb">Github</a></li>
                        </ul>
                </div><!-- /.social -->
                <div class="archives">
                  <h2><a href="https://ianbicking.org/blog/">recent posts</a></h2>
                  <ul>
                    <li><a href="https://ianbicking.org/blog/2023/02/world-building-with-gpt.html">World Building With <span class="caps">GPT</span></a></li>
                    <li><a href="https://ianbicking.org/blog/2023/01/thoughts-on-voice-interfaces-2-llms.html">Thoughts On Voice Interfaces 2 years later:&nbsp;LLMs</a></li>
                    <li><a href="https://ianbicking.org/blog/2023/01/infinite-ai-array.html">Infinite <span class="caps">AI</span>&nbsp;Array</a></li>
                    <li><a href="https://ianbicking.org/blog/2020/11/firefox-was-always-enough.html">Firefox Was Always&nbsp;Enough</a></li>
                    <li><a href="https://ianbicking.org/blog/2020/09/project-ideas-2020.html">Project ideas for (what&#8217;s left of)&nbsp;2020</a></li>
                    <li><a href="https://ianbicking.org/blog/2020/09/a-history-of-projects.html">A History Of&nbsp;Projects</a></li>
                    <li><a href="https://ianbicking.org/blog/2020/08/thoughts-on-voice-interfaces.html">Thoughts on Voice&nbsp;Interfaces</a></li>
                    <li><a href="https://ianbicking.org/blog/2019/07/kling-axes-of-politics-technocrats.html">Kling&#8217;s Axes of Politics, and the&nbsp;Technocrats</a></li>
                    <li><a href="https://ianbicking.org/blog/2019/04/users-want-control-is-a-shrug.html"><span class="dquo">&#8220;</span>Users want control&#8221; is a shoulder&nbsp;shrug</a></li>
                    <li><a href="https://ianbicking.org/blog/2019/03/open-source-doesnt-make-money-by-design.html">Open Source Doesn&#8217;t Make Money Because It Isn&#8217;t Designed To Make&nbsp;Money</a></li>
                  </ul>
                </div><!-- /.archives -->

                <div class="widgets">
                  <h2><a href="https://twitter.com/ianbicking">tweets</a></h2>
                  <a class="twitter-timeline" width="230" height="500" href="https://twitter.com/ianbicking" data-widget-id="319849964417187842" data-link-color="#aaae94">Tweets by @ianbicking</a>
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>

                </div><!-- /.widgets -->

        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
          This is the personal site of <a href="/">Ian Bicking</a>.  The opinions expressed here are my own.
        </footer><!-- /#contentinfo -->

<script src="/theme/instantclick.min.js"></script>
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-2442258-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-2442258-1');
</script>
        </div><!-- /#main-container -->
        </div><!-- /#main-wrapper2 -->
        </div><!-- /#main-wrapper1 -->
</body>
</html>