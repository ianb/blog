<!DOCTYPE html>
<html lang="en">
<head>
        <title>Git-as-sync, not source-control-as-deployment</title>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
          <link rel="stylesheet" href="https://ianbicking.org/theme/css/style.min.css">
        <!--<link rel="stylesheet" href="https://ianbicking.org/theme/css/main.css" type="text/css" />-->
        <link href="https://ianbicking.org/feeds/atom.xml" type="application/atom+xml" rel="alternate" title="Ian Bicking: a blog Atom Feed" />
        <link rel="icon" href="https://ianbicking.org/favicon.ico">

</head>

<body id="index" class="home">
  <div id="main-wrapper1">
  <div id="main-wrapper2">
  <div id="main-container">
        <header id="banner" class="body">
                <h1><a href="https://ianbicking.org">Ian Bicking: a blog </a></h1>
        </header><!-- /#banner -->
<section id="content" class="body">
    <article>
        <header>
        <div>
            <div class="published" title="2012-02-14T02:30:00-06:00">
                Tuesday, February 14th, 2012
            </div>
            <h1 class="entry-title">
                <a
                    href="https://ianbicking.org/blog/2012/02/git-as-sync-not-source-control-as-deployment.html"
                    rel="bookmark"
                    title="Permalink to Git-as-sync, not source-control-as-deployment"
                    >Git-as-sync, not&nbsp;source-control-as-deployment</a
                >
            </h1>
        </div>
        </header>

        <div class="entry-content"><p>I don&#8217;t like systems that use <tt class="docutils literal">git push</tt> for deployment (Heroku et al).  Why?  I do a lot of&nbsp;this:</p>
<pre class="literal-block">
$ git push deploy
... realize I forgot a domain name ...
$ git commit -m &quot;fix domain name&quot; -a ; git push deploy
... realize I didn't do something right with the database setup ...
$ git commit -m &quot;configure database right&quot; -a ; git push deploy
... dammit, I didn't fix it quite right ...
$ git commit -m &quot;typo&quot; -a ; git push deploy
</pre>
<p>And then maybe I&#8217;d actually like to keep my config out of my source control, or have a build process that I run locally, or any number of things.  I&#8217;d like to be able to test deployment, but every deployment is a commit, and I like to commit <em>tested</em> work.  I think I could use <tt class="docutils literal">git rebase</tt> but I lack the discipline to undo my work so I can do it correctly.  This is why I don&#8217;t do continuous&nbsp;commits.</p>
<p>There&#8217;s a whole different level of weirdness when you use <a class="reference external" href="http://pages.github.com/">GitHub Pages</a> as you aren&#8217;t pushing to a deployment-specific remote, you are pushing to a deployment-specific&nbsp;branch.</p>
<p>So I&#8217;ve generally thought: git deployment is&nbsp;wrong.</p>
<p>Then I was talking to some other people at Mozilla and they mentioned that ops was using git for simply moving files around even though the stuff they were deploying was itself in Mercurial.  They had a particular site with a very large number of files, and it was faster to use git than rsync (git has more metadata than rsync; rsync has to look at <em>everything</em> everytime you sync).  And that all seemed very reasonable; git is a fine way to sync&nbsp;things.</p>
<p>But I kind of forgot about it all, and just swore to myself as I did too many trivial commits and wrote too many meaningless commit&nbsp;messages.</p>
<p>Still&#8230; it isn&#8217;t so hard to separate these concerns, is it?  So I wrote up a <a class="reference external" href="https://github.com/ianb/git-sync/blob/master/git-sync">quite small command</a> called <a class="reference external" href="https://github.com/ianb/git-sync">git-sync</a>.  The basic idea: copy the working directory to a new location (minus <tt class="docutils literal">.git/</tt>), commit that, and push the result to your deployment remote.  You can send modified and untracked files, and you can run a build script before committing and push the <em>result</em> of the build script, all without sullying your &#8220;real&#8221; source control.  And you happen to have a nice history of deployments, which is also&nbsp;nice.</p>
<p>I&#8217;ve only used this a little bit, but I&#8217;ve enjoyed when I have used it, and it makes me feel much better/clearer about my actual commits.  It&#8217;s really short right now, and probably gets some things entirely wrong (e.g., moving over untracked files).  But it works well enough to be improved (<em>winkwinknudgenudge</em>).</p>
<p>So check it out: <a class="reference external" href="https://github.com/ianb/git-sync">https://github.com/ianb/git-sync</a></p>
</div>
        <!-- /.entry-content -->
      </article>
</section>
        <section id="extras" class="body">
                <div class="links">
                  <h2><a href="https://ianbicking.org">here</a></h2>
                  <ul>
                    <li><a href="/blog/">blog</a></li>
                    <li><a href="/projects.html">projects</a></li>
                    <li><a href="https://ianbicking.org/archives.html">archives</a> &amp; <a href="https://ianbicking.org/categories.html">categories</a></li>
                    <li><a href="https://ianbicking.org/category/ai.html">category: ai</a></li>
                    <li><a href="https://ianbicking.org/category/javascript.html">category: javascript</a></li>
                    <li><a href="https://ianbicking.org/category/misc.html">category: misc</a></li>
                    <li><a href="https://ianbicking.org/category/mozilla.html">category: mozilla</a></li>
                    </ul>
                </div>
                <div class="social">
                        <h2>elsewhere</h2>
                        <ul>
                            <li><a href="https://ianbicking.org/feeds/atom.xml" type="application/atom+xml" rel="alternate">atom feed</a></li>

                            <li><a href="https://twitter.com/ianbicking">@ianbicking</a></li>
                            <li><a href="https://hachyderm.io/@ianbicking">@ianbicking@hachyderm.io</a></li>
                            <li><a href="https://github.com/ianb">Github</a></li>
                        </ul>
                </div><!-- /.social -->
                <div class="archives">
                  <h2><a href="https://ianbicking.org/blog/">recent posts</a></h2>
                  <ul>
                    <li><a href="https://ianbicking.org/blog/2023/04/world-building-gpt-2-declarative.html">World Building with <span class="caps">GPT</span> part 2: bigger, better, more&nbsp;declarative</a></li>
                    <li><a href="https://ianbicking.org/blog/2023/02/world-building-with-gpt.html">World Building With <span class="caps">GPT</span></a></li>
                    <li><a href="https://ianbicking.org/blog/2023/01/thoughts-on-voice-interfaces-2-llms.html">Thoughts On Voice Interfaces 2 years later:&nbsp;LLMs</a></li>
                    <li><a href="https://ianbicking.org/blog/2023/01/infinite-ai-array.html">Infinite <span class="caps">AI</span>&nbsp;Array</a></li>
                    <li><a href="https://ianbicking.org/blog/2020/11/firefox-was-always-enough.html">Firefox Was Always&nbsp;Enough</a></li>
                    <li><a href="https://ianbicking.org/blog/2020/09/project-ideas-2020.html">Project ideas for (what&#8217;s left of)&nbsp;2020</a></li>
                    <li><a href="https://ianbicking.org/blog/2020/09/a-history-of-projects.html">A History Of&nbsp;Projects</a></li>
                    <li><a href="https://ianbicking.org/blog/2020/08/thoughts-on-voice-interfaces.html">Thoughts on Voice&nbsp;Interfaces</a></li>
                    <li><a href="https://ianbicking.org/blog/2019/07/kling-axes-of-politics-technocrats.html">Kling&#8217;s Axes of Politics, and the&nbsp;Technocrats</a></li>
                    <li><a href="https://ianbicking.org/blog/2019/04/users-want-control-is-a-shrug.html"><span class="dquo">&#8220;</span>Users want control&#8221; is a shoulder&nbsp;shrug</a></li>
                  </ul>
                </div><!-- /.archives -->

                <div class="widgets">
                  <h2><a href="https://twitter.com/ianbicking">tweets</a></h2>
                  <a class="twitter-timeline" width="230" height="500" href="https://twitter.com/ianbicking" data-widget-id="319849964417187842" data-link-color="#aaae94">Tweets by @ianbicking</a>
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>

                </div><!-- /.widgets -->

        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
          This is the personal site of <a href="/">Ian Bicking</a>.  The opinions expressed here are my own.
        </footer><!-- /#contentinfo -->

<script src="/theme/instantclick.min.js"></script>
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-2442258-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-2442258-1');
</script>
        </div><!-- /#main-container -->
        </div><!-- /#main-wrapper2 -->
        </div><!-- /#main-wrapper1 -->
</body>
</html>