<!DOCTYPE html>
<html lang="en">
<head>
        <title>Using pip Requirements</title>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
          <link rel="stylesheet" href="https://ianbicking.org/theme/css/style.min.css">
        <!--<link rel="stylesheet" href="https://ianbicking.org/theme/css/main.css" type="text/css" />-->
        <link href="https://ianbicking.org/feeds/atom.xml" type="application/atom+xml" rel="alternate" title="Ian Bicking: a blog Atom Feed" />
        <link rel="icon" href="https://ianbicking.org/favicon.ico">

</head>

<body id="index" class="home">
  <div id="main-wrapper1">
  <div id="main-wrapper2">
  <div id="main-container">
        <header id="banner" class="body">
                <h1><a href="https://ianbicking.org">Ian Bicking: a blog </a></h1>
        </header><!-- /#banner -->
<section id="content" class="body">
    <article>
        <header>
        <div>
            <div class="published" title="2008-12-16T19:30:00-06:00">
                Tuesday, December 16th, 2008
            </div>
            <h1 class="entry-title">
                <a
                    href="https://ianbicking.org/blog/2008/12/using-pip-requirements.html"
                    rel="bookmark"
                    title="Permalink to Using pip Requirements"
                    >Using pip&nbsp;Requirements</a
                >
            </h1>
        </div>
        </header>

        <div class="entry-content"><p>Following onto a set of recent posts (from <a class="reference external" href="http://www.b-list.org/weblog/2008/dec/14/packaging/">James</a>, <a class="reference external" href="https://ianbicking.org/2008/12/14/a-few-corrections-to-on-packaging/">me</a>, then <a class="reference external" href="http://www.b-list.org/weblog/2008/dec/15/pip/">James again</a>), Martijn Faassen <a class="reference external" href="http://faassen.n--tree.net/blog/view/weblog/2008/12/16/0">wrote a description of Grok&#8217;s version management</a>.  Our ideas are pretty close, but he&#8217;s using buildout, and I&#8217;ll describe out to do the same things with&nbsp;pip.</p>
<p>Here&#8217;s a kind of development workflow that I think works&nbsp;well:</p>
<ul class="simple">
<li>A framework release is prepared.  Ideally there&#8217;s a buildbot that has been running (as <a class="reference external" href="http://pylonshq.com:8010/">Pylons has</a>, for example), so the integration has been running for a&nbsp;while.</li>
<li>People make sure there are released versions of all the important components.  If there are known conflicts between pieces, libraries and the framework update their <tt class="docutils literal">install_requires</tt> in their <tt class="docutils literal">setup.py</tt> files to make sure people don&#8217;t use conflicting pieces&nbsp;together.</li>
<li>Once everything has been released, there is a known set of packages that work together.  Using a buildbot maybe future versions will also work together, but they won&#8217;t necessarily work together with applications built on the framework.  And breakage can also occur regardless of a&nbsp;buildbot.</li>
<li>Also, people may have versions of libraries already installed, but just because they&#8217;ve installed something doesn&#8217;t mean they really mean to stay with an old version.  While known conflicts have been noted, there&#8217;s going to be lots of unknown conflicts and future&nbsp;conflicts.</li>
<li>When starting development with a framework, the developer would like to start with some known-good set, which is a set that can be developed by the framework developers, or potentially by any person.  For instance, if you extend a public framework with an internal framework (or even a public sub-framework like <a class="reference external" href="http://pinaxproject.com/">Pinax</a>) then the known-good set will be developed by a different set of&nbsp;people.</li>
<li>As an application is developed, the developer will add on other libraries, or use some of their own libraries.  Development will probably occur at the trunk/tip of several libraries as they are developed&nbsp;together.</li>
<li>A developer might upgrade the entire framework, or just upgrade one piece (for instance, to get a bug fix they are interested in, or follow a branch that has functionality they care about).  The developer doesn&#8217;t necessarily have the same notion of &#8220;stable&#8221; and &#8220;released&#8221; as the core framework developers&nbsp;have.</li>
<li>At the time of deployment the developer wants to make sure all the pieces are deployed together as they&#8217;ve tested them, and how they know them to work.  At any time, another developer may want to clone the same set of&nbsp;libraries.</li>
<li>After initial deployment, the developer may want to upgrade a single component, if only to test that an upgrade works, or if it resolves a bug.  They may test out combinations only to throw them away, and they don&#8217;t want to bump versions of libraries in order to deploy new&nbsp;combinations.</li>
</ul>
<p>This is the kind of development pattern that requirement files are meant to assist with.  They can provide a known-good set of packages.  Or they can provide a starting point for an active line of development.  Or they can provide a historical record of how something was put&nbsp;together.</p>
<p>The easy way to start a requirement file for pip is just to put the packages you know you want to work with.  For instance, we&#8217;ll call this <tt class="docutils literal"><span class="pre">project-start.txt</span></tt>:</p>
<pre class="literal-block">
Pylons
-e svn+http://mycompany/svn/MyApp/trunk#egg=MyApp
-e svn+http://mycompany/svn/MyLibrary/trunk#egg=MyLibrary
</pre>
<p>You can plug away for a while, and maybe you decide you want to freeze the file.  So you&nbsp;do:</p>
<pre class="literal-block">
$ pip freeze -r project-start.txt project-frozen.txt
</pre>
<p>By using <tt class="docutils literal"><span class="pre">-r</span> <span class="pre">project-start.txt</span></tt> you give <tt class="docutils literal">pip freeze</tt> a template for it to start with.  From that, you&#8217;ll get <tt class="docutils literal"><span class="pre">project-frozen.txt</span></tt> that will look&nbsp;like:</p>
<pre class="literal-block">
Pylons==0.9.7
-e svn+http://mycompany/svn/MyApp/trunk&#64;1045#egg=MyApp
-e svn+http://mycompany/svn/MyLibrary/trunk&#64;1058#egg=MyLibrary

## The following requirements were added by pip --freeze:
Beaker==0.2.1
WebHelpers==0.9.1
nose==1.4
# Installing as editable to satisfy requirement INITools==0.2.1dev-r3488:
-e svn+http://svn.colorstudy.com/INITools/trunk&#64;3488#egg=INITools-0.2.1dev_r3488
</pre>
<p>At that point you might decide that you don&#8217;t care about the nose version, or you might have installed something from trunk when you could have used the last release.  So you go and adjust some&nbsp;things.</p>
<p>Martijn also asks: how do you have framework developers maintain one file, and then also have developers maintain their own lists for their&nbsp;projects?</p>
<p>You could start with a file like this for the framework itself.  Pylons for instance could ship with something like this.  To install Pylons you could then&nbsp;do:</p>
<pre class="literal-block">
$ pip -E MyProject install \\
&gt;    -r http://pylonshq.com/0.9.7-requirements.txt
</pre>
<p>You can also download that file yourself, add some comments, rename the file and add your project to it, and use that.  When you freeze the order of the packages and any comments will be preserved, so you can keep track of what changed.  Also it should be ameniable to source control, and diffs would be&nbsp;sensible.</p>
<p>You could also use indirection, creating a file like this for your&nbsp;project:</p>
<pre class="literal-block">
-r http://pylonshq.com/0.9.7-requirements.txt
-e svn+http://mycompany/svn/MyApp/trunk#egg=MyApp
-e svn+http://mycompany/svn/MyLibrary/trunk#egg=MyLibrary
</pre>
<p>That is, requirements files can refer to each other.  So if you want to maintain your own requirements file alongside the development of an upstream requirements file, you could do&nbsp;that.</p>
</div>
        <!-- /.entry-content -->
      </article>
</section>
        <section id="extras" class="body">
                <div class="links">
                  <h2><a href="https://ianbicking.org">here</a></h2>
                  <ul>
                    <li><a href="/blog/">blog</a></li>
                    <li><a href="/projects.html">projects</a></li>
                    <li><a href="https://ianbicking.org/archives.html">archives</a> &amp; <a href="https://ianbicking.org/categories.html">categories</a></li>
                    <li><a href="https://ianbicking.org/category/ai.html">category: ai</a></li>
                    <li><a href="https://ianbicking.org/category/javascript.html">category: javascript</a></li>
                    <li><a href="https://ianbicking.org/category/misc.html">category: misc</a></li>
                    <li><a href="https://ianbicking.org/category/mozilla.html">category: mozilla</a></li>
                    </ul>
                </div>
                <div class="social">
                        <h2>elsewhere</h2>
                        <ul>
                            <li><a href="https://ianbicking.org/feeds/atom.xml" type="application/atom+xml" rel="alternate">atom feed</a></li>

                            <li><a href="https://hachyderm.io/@ianbicking">@ianbicking@hachyderm.io</a></li>
                            <li><a href="https://github.com/ianb">Github</a></li>
                            <li><a href="https://www.linkedin.com/in/ianbicking/">LinkedIn</a></li>
                            <li><a href="https://twitter.com/ianbicking">@ianbicking</a></li>
                        </ul>
                </div><!-- /.social -->
                <div class="archives">
                  <h2><a href="https://ianbicking.org/blog/">recent posts</a></h2>
                  <ul>
                    <li><a href="https://ianbicking.org/blog/2023/04/world-building-gpt-2-declarative.html">World Building with <span class="caps">GPT</span> part 2: bigger, better, more&nbsp;declarative</a></li>
                    <li><a href="https://ianbicking.org/blog/2023/02/world-building-with-gpt.html">World Building With <span class="caps">GPT</span></a></li>
                    <li><a href="https://ianbicking.org/blog/2023/01/thoughts-on-voice-interfaces-2-llms.html">Thoughts On Voice Interfaces 2 years later:&nbsp;LLMs</a></li>
                    <li><a href="https://ianbicking.org/blog/2023/01/infinite-ai-array.html">Infinite <span class="caps">AI</span>&nbsp;Array</a></li>
                    <li><a href="https://ianbicking.org/blog/2020/11/firefox-was-always-enough.html">Firefox Was Always&nbsp;Enough</a></li>
                    <li><a href="https://ianbicking.org/blog/2020/09/project-ideas-2020.html">Project ideas for (what&#8217;s left of)&nbsp;2020</a></li>
                    <li><a href="https://ianbicking.org/blog/2020/09/a-history-of-projects.html">A History Of&nbsp;Projects</a></li>
                    <li><a href="https://ianbicking.org/blog/2020/08/thoughts-on-voice-interfaces.html">Thoughts on Voice&nbsp;Interfaces</a></li>
                    <li><a href="https://ianbicking.org/blog/2019/07/kling-axes-of-politics-technocrats.html">Kling&#8217;s Axes of Politics, and the&nbsp;Technocrats</a></li>
                    <li><a href="https://ianbicking.org/blog/2019/04/users-want-control-is-a-shrug.html"><span class="dquo">&#8220;</span>Users want control&#8221; is a shoulder&nbsp;shrug</a></li>
                  </ul>
                </div><!-- /.archives -->

                <div class="widgets">
                  <h2><a href="https://twitter.com/ianbicking">tweets</a></h2>
                  <a class="twitter-timeline" width="230" height="500" href="https://twitter.com/ianbicking" data-widget-id="319849964417187842" data-link-color="#aaae94">Tweets by @ianbicking</a>
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>

                </div><!-- /.widgets -->

        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
          This is the personal site of <a href="/">Ian Bicking</a>.  The opinions expressed here are my own.
        </footer><!-- /#contentinfo -->

<script src="/theme/instantclick.min.js"></script>
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-FKT4HDGBE4"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-FKT4HDGBE4');
</script>
        </div><!-- /#main-container -->
        </div><!-- /#main-wrapper2 -->
        </div><!-- /#main-wrapper1 -->
</body>
</html>