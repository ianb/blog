<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<!-- MOBIFY - DO NOT ALTER - PASTE IMMEDIATELY AFTER OPENING HEAD TAG -->
<script type="text/javascript">/*<![CDATA[*/(function(a){function b(a,b){if(+a)return~a||(d.cookie=h+"=; path=/");j=d.createElement(e),k=d.getElementsByTagName(e)[0],j.src=a,b&&(j.onload=j.onerror=b),k.parentNode.insertBefore(j,k)}function c(){n.api||b(l.shift()||-1,c)}if(this.Mobify)return;var d=document,e="script",f="mobify",g="."+f+".com/",h=f+"-path",i=g+"un"+f+".js",j,k,l=[!1,1],m,n=this.Mobify={points:[+(new Date)],tagVersion:[6,0]},o=/(; |#|&|^)mobify-path=([^&;]*)/g.exec(location.hash+"; "+d.cookie);o?(m=o[2])&&!+(m=sessionStorage[h]||m)&&(l=[!0,"//preview"+g+escape(m)]):(l=a()||l,l[0]&&l.push("//cdn"+i,"//files01"+i)),l.shift()?(d.write('<plaintext style="display:none;">'),setTimeout(c)):b(l[0])})(function(){if(/ip(hone|od)|android.*(mobile)|blackberry.*applewebkit/i.test(navigator.userAgent)){return[1,"//cdn.mobify.com/sites/ians-blog/production/mobify.js"]}})/*]]>*/</script>
<!-- END MOBIFY -->
	<title>Ian Bicking: a blog   ::  HTML</title>
	<meta http-equiv="content-type" content="text/html; charset=UTF-8" />
	<meta name="generator" content="WordPress 3.4.2" /><!-- LEAVE FOR STATS -->
	<meta name="description" content="" />
	<link rel="stylesheet" title="plaintxtSimpler" href="../../../../wp-content/themes/Barthelme-ianb/style.css" type="text/css" media="all" />
	<link rel="start" href="../../../../index.html" title="Ian Bicking: a blog" />
	<link rel="alternate" type="application/atom+xml" title="Ian Bicking: a blog Atom Feed" href="../../../../feed/atom/index.html" />
	<link rel="alternate" type="application/rss+xml" title="Ian Bicking: a blog RSS 2.0 Feed" href="../../../../feed/rss/index.html" />
	<link rel="alternate" type="application/rss+xml" title="Ian Bicking: a blog Comments RSS 2.0 Feed" href="../../../../comments/feed/index.html" />
	<link rel="alternate" type="application/rdf+xml" title="Ian Bicking: a blog RSS 1.0" href="../../../../feed/rdf/index.html" />
	<link rel="alternate" type="text/xml" title="Ian Bicking: a blog RSS 0.92 Feed" href="../../../../feed/rss/index.html" />
	<link rel="pingback" href="../../../../xmlrpc.php" />
	<link rel="openid.server" href="http://www.myopenid.com/server" />
	<link rel="openid.delegate" href="http://ianb.myopenid.com" />
        <link rel="me" type="text/html" href="http://www.google.com/profiles/ianbicking"/>
		<link rel='archives' title='October 2012' href='../../../../2012/10/index.html' />
	<link rel='archives' title='February 2012' href='../../../../2012/02/index.html' />
	<link rel='archives' title='April 2011' href='../../../../2011/04/index.html' />
	<link rel='archives' title='March 2011' href='../../../../2011/03/index.html' />
	<link rel='archives' title='September 2010' href='../../../../2010/09/index.html' />
	<link rel='archives' title='August 2010' href='../../../../2010/08/index.html' />
	<link rel='archives' title='May 2010' href='../../../../2010/05/index.html' />
	<link rel='archives' title='April 2010' href='../../../../2010/04/index.html' />
	<link rel='archives' title='March 2010' href='../../../../2010/03/index.html' />
	<link rel='archives' title='February 2010' href='../../../../2010/02/index.html' />
	<link rel='archives' title='January 2010' href='../../../../2010/01/index.html' />
	<link rel='archives' title='September 2009' href='../../../../2009/09/index.html' />
	<link rel='archives' title='May 2009' href='../../../../2009/05/index.html' />
	<link rel='archives' title='April 2009' href='../../../../2009/04/index.html' />
	<link rel='archives' title='January 2009' href='../../../../2009/01/index.html' />
	<link rel='archives' title='December 2008' href='../../../../2008/12/index.html' />
	<link rel='archives' title='November 2008' href='../../../../2008/11/index.html' />
	<link rel='archives' title='October 2008' href='../../../../2008/10/index.html' />
	<link rel='archives' title='September 2008' href='../../../../2008/09/index.html' />
	<link rel='archives' title='August 2008' href='../../../../2008/08/index.html' />
	<link rel='archives' title='July 2008' href='../../../../2008/07/index.html' />
	<link rel='archives' title='June 2008' href='../../../../2008/06/index.html' />
	<link rel='archives' title='May 2008' href='../../../../2008/05/index.html' />
	<link rel='archives' title='April 2008' href='../../../../2008/04/index.html' />
	<link rel='archives' title='March 2008' href='../../../../2008/03/index.html' />
	<link rel='archives' title='February 2008' href='../../../../2008/02/index.html' />
	<link rel='archives' title='January 2008' href='../../../../2008/01/index.html' />
	<link rel='archives' title='November 2007' href='../../../../2007/11/index.html' />
	<link rel='archives' title='October 2007' href='../../../../2007/10/index.html' />
	<link rel='archives' title='September 2007' href='../../../../2007/09/index.html' />
	<link rel='archives' title='August 2007' href='../../../../2007/08/index.html' />
	<link rel='archives' title='July 2007' href='../../../../2007/07/index.html' />
	<link rel="alternate" type="application/rss+xml" title="Ian Bicking: a blog &raquo; HTML Category Feed" href="../../feed/index.html" />
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="../../../../xmlrpc.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="../../../../wp-includes/wlwmanifest.xml" /> 
<meta name="generator" content="WordPress 3.4.2" />
<link rel="stylesheet" href="../../../../wp-content/plugins/source-code-syntax-highlighting-plugin-for-wordpress/geshi.css"  type="text/css" />	<style type="text/css">.recentcomments a{display:inline !important;padding:0 !important;margin:0 !important;}</style>
        <style type="text/css" media="all">
/*<![CDATA[*/
body { font-size: 100%; }
body { font-family: tahoma, geneva, sans-serif; }
div.post-header, h2.post-title, p.post-date-single, h2.post-title-single, div.post-entry h1, div.post-entry h2, div.post-entry h3, div.post-entry h4, div.post-entry h5, div.post-entry h6, div.post-entry blockquote, div.post-footer, h3#comment-count, h4#comment-header, div#comments ol li p.comment-metadata, h4#respond { font-family: verdana, geneva, sans-serif; }
div.post-entry p { text-align: left; }
div#wrapper { width: 100%; }

/*]]>*/
</style>
</head>
<body>

<div id="wrapper">

	<div id="header" onclick="location.href='http://blog.ianbicking.org/';" style="cursor:pointer;">
		<h1 id="title"><a href="../../../../index.html" title="Ian Bicking: a blog">Ian Bicking: a blog</a></h1>
		<p id="description"></p>
	</div>
<!-- WP Theme Credits -->
<div style="display: none;">We can answer on question <a href="http://www.olnevhost.net/vps-hosting.html">what is VPS</a>? and
what is <a href="http://www.olnevhost.net/dedicated-servers.html"><strong>cheap dedicated servers</strong></a>?</div>
<!-- END HEADER -->
<div id="container">
	<div id="content" class="narrowcolumn">


				
		<p class="post-date-single">{ Category Archives }</p>
		<h2 class="post-title-single">HTML</h2>		

				
		<div id="post-32" class="post">
			<div class="post-container">
				<div class="post-content">
					<h2 class="post-title"><a href="../../../../2007/09/24/lxmlhtml/index.html" title="Permalink to lxml.html" rel="bookmark">lxml.html</a></h2>
					<div class="post-entry">
						<div class="document">
<p>Over the summer I did quite a bit of work on <a class="reference external" href="http://codespeak.net/svn/lxml/trunk/doc/lxmlhtml.txt">lxml.html</a>.  I&#8217;m pretty excited about it, because with just a little work HTML starts to be very usefully manipulatable.  This isn&#8217;t how I&#8217;ve felt about HTML in the past, with all HTML emerging from templates and consumed only by browsers.</p>
<p>The ElementTree representation (which lxml copies) is a bit of a nuisance when representing HTML.  A <a class="reference external" href="http://codespeak.net/lxml/dev/lxmlhtml.html#html-element-methods">few methods</a> improve it, but it is still awkward for content with mixed tags and text (common in HTML, uncommon in most other XML).  Looking at <a class="reference external" href="http://genshi.edgewall.org/wiki/Documentation/filters.html#transformer">Genshi Transforms</a> there are some things I wish we could do, like simply &quot;unwrap&quot; text and then wrap it again.  But once you remove a tag the text is thoroughly merged into its neighbors.  Another little nuisance is that <tt class="docutils literal"><span class="pre">el.text</span></tt> and <tt class="docutils literal"><span class="pre">el.tail</span></tt> can be None, which means you have to guard a lot of code.</p>
<p>That said, here&#8217;s the Genshi example:</p>
<div class="dean_ch" style="white-space: wrap;"><br />
&gt;&gt;&gt; html = HTML<span class="br0">&#40;</span><span class="st0">''</span><span class="st0">'&lt;html&gt;<br />
... &nbsp; &lt;head&gt;&lt;/head&gt;<br />
... &nbsp; &lt;body&gt;<br />
... &nbsp; &nbsp; Some &lt;em&gt;body&lt;/em&gt; text.<br />
... &nbsp; &lt;/body&gt;<br />
... &lt;/html&gt;'</span><span class="st0">''</span><span class="br0">&#41;</span><br />
&gt;&gt;&gt; <span class="kw1">print</span> html | Transformer<span class="br0">&#40;</span><span class="st0">'body/em'</span><span class="br0">&#41;</span>.<span class="kw2">map</span><span class="br0">&#40;</span><span class="kw2">unicode</span>.<span class="me1">upper</span>, TEXT<span class="br0">&#41;</span> \<br />
... &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;.<span class="me1">unwrap</span><span class="br0">&#40;</span><span class="br0">&#41;</span>.<span class="me1">wrap</span><span class="br0">&#40;</span>tag.<span class="me1">u</span><span class="br0">&#41;</span>.<span class="me1">end</span><span class="br0">&#40;</span><span class="br0">&#41;</span> \<br />
... &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;.<span class="kw3">select</span><span class="br0">&#40;</span><span class="st0">'body/u'</span><span class="br0">&#41;</span> \<br />
... &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;.<span class="me1">prepend</span><span class="br0">&#40;</span><span class="st0">'underlined '</span><span class="br0">&#41;</span><br />
&nbsp;</div>
<p>Here&#8217;s how you&#8217;d do it with lxml.html:</p>
<div class="dean_ch" style="white-space: wrap;"><br />
&gt;&gt;&gt; html = fromstring<span class="br0">&#40;</span><span class="st0">''</span><span class="st0">'... same thing ...'</span><span class="st0">''</span><span class="br0">&#41;</span><br />
&gt;&gt;&gt; <span class="kw1">def</span> transform<span class="br0">&#40;</span>doc<span class="br0">&#41;</span>:<br />
... &nbsp; &nbsp; <span class="kw1">for</span> el <span class="kw1">in</span> doc.<span class="me1">xpath</span><span class="br0">&#40;</span><span class="st0">'body/em'</span><span class="br0">&#41;</span>:<br />
... &nbsp; &nbsp; &nbsp; &nbsp; <span class="me1">el</span>.<span class="me1">text</span> = <span class="br0">&#40;</span>el.<span class="me1">text</span> <span class="kw1">or</span> <span class="st0">''</span><span class="br0">&#41;</span>.<span class="me1">upper</span><span class="br0">&#40;</span><span class="br0">&#41;</span><br />
... &nbsp; &nbsp; &nbsp; &nbsp; <span class="me1">el</span>.<span class="me1">tag</span> = <span class="st0">'u'</span><br />
... &nbsp; &nbsp; <span class="kw1">for</span> el <span class="kw1">in</span> doc.<span class="me1">xpath</span><span class="br0">&#40;</span><span class="st0">'body/u'</span><span class="br0">&#41;</span>:<br />
... &nbsp; &nbsp; &nbsp; &nbsp; <span class="me1">el</span>.<span class="me1">text</span> = <span class="st0">'underlined '</span> + <span class="br0">&#40;</span>el.<span class="me1">text</span> <span class="kw1">or</span> <span class="st0">''</span><span class="br0">&#41;</span><br />
&nbsp;</div>
<p>I&#8217;m not sure if Genshi works in-place here, or makes a copy; otherwise these are pretty much equivalent.  Which is better?  Personally I prefer mine, and actually prefer it quite strongly, because it&#8217;s quite simple &#8212; it&#8217;s a function with loops and assignments.  It&#8217;s practically pedestrian in comparison to the Genshi example, which uses methods to declaratively create a transformer.</p>
<p>Some of the things now in lxml.html include:</p>
<ul>
<li>
<p class="first"><a class="reference external" href="http://codespeak.net/lxml/dev/lxmlhtml.html#working-with-links">Link handling</a>,   which is particularly focused on rewriting links so you can put HTML   fragments into a new context without breaking the relative links.</p>
</li>
<li>
<p class="first"><a class="reference external" href="http://codespeak.net/lxml/dev/lxmlhtml.html#running-html-doctests">Smart doctest comparisons</a>   (attribute-order-neutral comparisons, with improved diffs, and also   whitespace neutral, based loosely on <a class="reference external" href="http://formencode.org/module-formencode.doctest_xml_compare.html">formencode.doctest_xml_compare</a>).   Inside your doctest choose XML parsing with <tt class="docutils literal"><span class="pre">from</span> <span class="pre">lxml</span> <span class="pre">import</span>&nbsp;&nbsp; <span class="pre">usedoctest</span></tt> or HTML parsing with <tt class="docutils literal"><span class="pre">from</span> <span class="pre">lxml.html</span> <span class="pre">import</span>&nbsp;&nbsp; <span class="pre">usedoctest</span></tt>.  I consider the import trick My Worst Monkeypatch   Ever, but it kind of reads nicely.  For testing it is very nice.</p>
</li>
<li>
<p class="first"><a class="reference external" href="http://codespeak.net/lxml/dev/lxmlhtml.html#cleaning-up-html">Cleaning code</a>, to   avoid XSS attacks, in <tt class="docutils literal"><span class="pre">lxml.html.clean</span></tt>.  This is still pretty   messy, because there&#8217;s lots of little things you may or may not want   to protect against.  E.g., I think I can mostly clean out style tags   (at least of Javascript), but some people might want to remove all   style.  So there&#8217;s an option.  There&#8217;s lots of options.  Too many.</p>
</li>
<li>
<p class="first">With the cleaning code there&#8217;s <a class="reference external" href="http://codespeak.net/lxml/dev/lxmlhtml.html#wordwrap">word-wrapping code</a> and   <a class="reference external" href="http://codespeak.net/lxml/dev/lxmlhtml.html#autolink">autolinking code</a>.  I think   of these as clean-up-people&#8217;s-scrappy-HTML tools.  Also important   for putting untrusted HTML in a new context.</p>
</li>
<li>
<p class="first">I rewrote <a class="reference external" href="http://formencode.org/htmlfill.html">htmlfill</a> in   <tt class="docutils literal"><span class="pre">lxml.html.formfill</span></tt>.  It&#8217;s a bit simpler, and keeps error   messages separate from actual value filling.  They were really only   combined because I didn&#8217;t want to do two passes with <tt class="docutils literal"><span class="pre">HTMLParser</span></tt>   for the two steps, but that doesn&#8217;t matter when you load the   document into memory.  I also stopped using markup like   <tt class="docutils literal"><span class="pre">&lt;form:error&gt;</span></tt> for placing error messages; it&#8217;s all automatic now,   which I suppose is both good and bad.</p>
</li>
<li>
<p class="first"><em>After</em> I wrote <tt class="docutils literal"><span class="pre">lxml.html.formfill</span></tt> I got it into my head to make    smarter forms more natively.  So now you can do:</p>
<div class="dean_ch" style="white-space: wrap;"><br />
&gt;&gt;&gt; <span class="kw1">from</span> lxml.<span class="me1">html</span> <span class="kw1">import</span> parse<br />
&gt;&gt;&gt; page = parse<span class="br0">&#40;</span><span class="st0">'http://tripsweb.rtachicago.com/'</span><span class="br0">&#41;</span>.<span class="me1">getroot</span><span class="br0">&#40;</span><span class="br0">&#41;</span><br />
&gt;&gt;&gt; form = page.<span class="me1">forms</span><span class="br0">&#91;</span><span class="nu0">0</span><span class="br0">&#93;</span><br />
&gt;&gt;&gt; <span class="kw1">from</span> <span class="kw3">pprint</span> <span class="kw1">import</span> <span class="kw3">pprint</span><br />
&gt;&gt;&gt; <span class="kw3">pprint</span><span class="br0">&#40;</span>form.<span class="me1">form_values</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><br />
<span class="br0">&#91;</span><span class="br0">&#40;</span><span class="st0">'action'</span>, <span class="st0">'entry'</span><span class="br0">&#41;</span>,<br />
&nbsp;<span class="br0">&#40;</span><span class="st0">'resptype'</span>, <span class="st0">'U'</span><span class="br0">&#41;</span>,<br />
&nbsp;<span class="br0">&#40;</span><span class="st0">'Arr'</span>, <span class="st0">'D'</span><span class="br0">&#41;</span>,<br />
&nbsp;<span class="br0">&#40;</span><span class="st0">'f_month'</span>, <span class="st0">'09'</span><span class="br0">&#41;</span>,<br />
&nbsp;<span class="br0">&#40;</span><span class="st0">'f_day'</span>, <span class="st0">'21'</span><span class="br0">&#41;</span>,<br />
&nbsp;<span class="br0">&#40;</span><span class="st0">'f_year'</span>, <span class="st0">'2007'</span><span class="br0">&#41;</span>,<br />
&nbsp;<span class="br0">&#40;</span><span class="st0">'f_hours'</span>, <span class="st0">'9'</span><span class="br0">&#41;</span>,<br />
&nbsp;<span class="br0">&#40;</span><span class="st0">'f_minutes'</span>, <span class="st0">'30'</span><span class="br0">&#41;</span>,<br />
&nbsp;<span class="br0">&#40;</span><span class="st0">'f_ampm'</span>, <span class="st0">'AM'</span><span class="br0">&#41;</span>,<br />
&nbsp;<span class="br0">&#40;</span><span class="st0">'Atr'</span>, <span class="st0">'N'</span><span class="br0">&#41;</span>,<br />
&nbsp;<span class="br0">&#40;</span><span class="st0">'walk'</span>, <span class="st0">'0.9999'</span><span class="br0">&#41;</span>,<br />
&nbsp;<span class="br0">&#40;</span><span class="st0">'Min'</span>, <span class="st0">'T'</span><span class="br0">&#41;</span>,<br />
&nbsp;<span class="br0">&#40;</span><span class="st0">'mode'</span>, <span class="st0">'A'</span><span class="br0">&#41;</span><span class="br0">&#93;</span><br />
&gt;&gt;&gt; <span class="kw1">for</span> key <span class="kw1">in</span> <span class="kw2">sorted</span><span class="br0">&#40;</span>f.<span class="me1">fields</span>.<span class="me1">keys</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span>:<br />
... &nbsp; &nbsp; <span class="kw1">print</span> key<br />
<span class="kw2">None</span><br />
Arr<br />
Atr<br />
Dest<br />
Min<br />
Orig<br />
action<br />
dCity<br />
endpoint<br />
f_ampm<br />
f_day<br />
f_hours<br />
f_minutes<br />
f_month<br />
f_year<br />
mode<br />
oCity<br />
resptype<br />
startpoint<br />
walk<br />
&gt;&gt;&gt; f.<span class="me1">fields</span><span class="br0">&#91;</span><span class="st0">'Orig'</span><span class="br0">&#93;</span> = <span class="st0">'1500 W Leland'</span><br />
&gt;&gt;&gt; f.<span class="me1">fields</span><span class="br0">&#91;</span><span class="st0">'Dest'</span><span class="br0">&#93;</span> = <span class="st0">'LINCOLN PARK ZOO'</span><br />
&gt;&gt;&gt; <span class="kw1">from</span> lxml.<span class="me1">html</span> <span class="kw1">import</span> submit_form<span class="br0">&#40;</span><span class="br0">&#41;</span><br />
&gt;&gt;&gt; result = parse<span class="br0">&#40;</span>submit_form<span class="br0">&#40;</span>f<span class="br0">&#41;</span><span class="br0">&#41;</span>.<span class="me1">getroot</span><span class="br0">&#40;</span><span class="br0">&#41;</span><br />
&nbsp;</div>
<p>From there I&#8217;d have to actually scrape the results to figure out   what the best trip was, which isn&#8217;t as easy.</p>
</li>
<li>
<p class="first">HTML diffing and something like <tt class="docutils literal"><span class="pre">svn</span> <span class="pre">blame</span></tt> for a series of   documents, in <tt class="docutils literal"><span class="pre">lxml.html.diff</span></tt>.  Someone noted a similarity   between htmldiff and <a class="reference external" href="http://code.google.com/p/templatemaker/">templatemaker</a>, and they are   conceptually similar, but with very different purposes.  htmldiff   goes to great trouble to <em>ignore</em> markup and focus only on changes   to textual content.  As such it is great for a history page.   <tt class="docutils literal"><span class="pre">templatemaker</span></tt> focuses on the dissection of computer-generated   HTML and extracting its human-generated components.  Templatemaker   is focused on screen scraping.  It might be handy in that form   example above&#8230;</p>
</li>
<li>
<p class="first">There&#8217;s also a fairly complete implementation of <a class="reference external" href="http://codespeak.net/lxml/dev/cssselect.html">CSS 3 selectors</a>.  It would be   interesting to mix this with <a class="reference external" href="http://code.google.com/p/cssutils/">cssutils</a>.</p>
<p>Though <a class="reference external" href="http://alex.dojotoolkit.org/?p=625">some people aren&#8217;t so enthusiastic about CSS namespaces</a> (and I can&#8217;t really blame   him), conveniently this CSS 3 feature makes CSS selectors applicable to all XML.   I don&#8217;t know if anyone is actually going to use them instead of   XPath on non-HTML documents, but you <em>could</em>.  Because the implementation  just   compiles CSS to XPath, you could potentially use this module with   other XML libraries that know XPath.  Of which I only actually know   <a class="reference external" href="http://uche.ogbuji.net/tech/4suite/amara/">one</a> (or <cite>two   &lt;http://genshi.edgewall.org/&gt;</cite>?) &#8212; though compiling CSS to XPath,   then having XPath parsed and interpreted in Python, is probably not   a good idea.  But if you are so inclined, there&#8217;s also a parser in   there you could use.</p>
</li>
<li>
<p class="first">lxml and <a class="reference external" href="http://www.crummy.com/software/BeautifulSoup/">BeautifulSoup</a> are no longer   exclusive choices: <tt class="docutils literal"><span class="pre">lxml.html.ElementSoup.parse()</span></tt> can parse pages   with BeautifulSoup into lxml data structures.  While the native   lxml/libxml2 HTML parser works on pretty bad HTML, BeautifulSoup   works on <em>really</em> bad HTML.  It would be nice to have something   similar with <a class="reference external" href="http://code.google.com/p/html5lib/">html5lib</a>.</p>
</li>
</ul>
</div>
												<!-- <rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
			xmlns:dc="http://purl.org/dc/elements/1.1/"
			xmlns:trackback="http://madskills.com/public/xml/rss/module/trackback/">
		<rdf:Description rdf:about="http://blog.ianbicking.org/2007/09/24/lxmlhtml/"
    dc:identifier="http://blog.ianbicking.org/2007/09/24/lxmlhtml/"
    dc:title="lxml.html"
    trackback:ping="http://blog.ianbicking.org/2007/09/24/lxmlhtml/trackback/" />
</rdf:RDF> -->
					</div><!-- END POST-ENTRY -->
				</div><!-- END POST-CONTENT  -->
			</div><!-- END-CONTAINER -->
			<div class="post-header">
				<h3 class="post-date">2007 09 24</h3>
				<p class="post-categories"><a href="../../index.html" title="View all posts in HTML" rel="category tag">HTML</a><br/><a href="../../../python/index.html" title="View all posts in Python" rel="category tag">Python</a></p>
				<p class="post-comments"><a href="../../../../2007/09/24/lxmlhtml/index.html#comments" title="Comment on lxml.html">Comments (8)</a></p>
				<p class="post-permalink"><a href="../../../../2007/09/24/lxmlhtml/index.html" title="Permalink to lxml.html" rel="permalink">Permalink</a></p>
							</div><!-- END POST-FOOTER -->
		</div><!-- END POST -->

				
		<div id="post-23" class="post">
			<div class="post-container">
				<div class="post-content">
					<h2 class="post-title"><a href="../../../../2007/08/14/reflection-and-description-of-meaning/index.html" title="Permalink to Reflection and Description Of Meaning" rel="bookmark">Reflection and Description Of Meaning</a></h2>
					<div class="post-entry">
						<div class="document">
<p>After writing my <a class="reference external" href="../../../../2007/08/14/of-microformats-and-the-semantic-web/index.html">last post</a> I thought I might follow up with a bit of cognitive speculation. Since the <a class="reference external" href="../../../../2007/08/14/of-microformats-and-the-semantic-web/index.html#comment-148">first comment</a> was exactly about the issue I was thinking about writing on, I might as well follow up quickly.</p>
<p>Jeff Snell replied:</p>
<blockquote><p>
You parse semantic markup in rich text all the time. When     formatting changes, you apply a reason. RFC&#8217;s don&#8217;t capitalize     MUST and SHOULD because the author is thinking in upper-case     versus lower-case. They&#8217;re putting a strong emphasis on those     words. As a reader, you take special notice of those words being     formatted that way and immediately recognize that they contain a     special importance. So I think that readers <strong>do parse writing     into semantic markup inside their brains.</strong></p></blockquote>
<p>Emphasis not added.  Wait, bold isn&#8217;t emphasis, it&#8217;s strong!  So sorry, STRONG not added.</p>
<p>I think the reasoning here is flawed, in that it supposes that <em>reflection</em> on how we think is an accurate way of <em>describing</em> how we think.</p>
<p>A few years ago I got interested in cognition for a while and particularly some of the new theories on consciousness.  One of the parts that really stuck with me was the difference in how we think about thinking, and how thinking really works (as revealed with timing experiments).  That is, our conscious thought (the thinking-about-thinking) happened after the actual thought; we make up reasons for our actions when we&#8217;re challenged, but if we aren&#8217;t challenged to explain our actions there&#8217;s no consciousness at all (of course, you can challenge yourself to explain your reasoning &#8212; but you usually won&#8217;t).  And then we revise history so that our reasoning precedes our decision, but that&#8217;s not always very accurate. This gets around the infinite-loop problem, where either there&#8217;s always another level of meta-consciousness reasoning about the lower level of consciousness, or there&#8217;s a potentially infinite sequence of <em>whys</em> that have to be answered for every decision.  And of course sometimes we really <em>do</em> make rational decisions and there are several levels of <em>why</em> answered before we commit.  But this is not the most common case, and there&#8217;s always a limit to how much reflection we can do.  There are always decisions made without conscious consideration &#8212; if only to free ourselves to focus on the important decisions.</p>
<p>And so as both a reader and a writer, I <em>think</em> in terms of italic and bold.  As a reader and a writer there is of course translation from one form to another.  There&#8217;s some idea inside of me that I want to get out in my writing, there&#8217;s some idea outside of me that I want to understand as a reader.  But just because I <em>can</em> describe some intermediate form of semantic meaning, it doesn&#8217;t mean that that meaning is actually there.  Instead I <em>invent</em> things like &quot;strong&quot; and &quot;emphasis&quot; when I&#8217;m asked to decide why I chose a particular text style.  But the real decision is intuitive &#8212; I map directly from my ideas to words on the page, or vice versa for reading.</p>
<p>Obviously this is not true for all markup.  But my intuition as both a reader and a writer about bold and italic is strong enough that I feel confident there&#8217;s no intermediary representation.  This is not unlike the fact I don&#8217;t consider the phonetics of most words (though admittedly I did when trying to spell &quot;phonetics&quot;); common words are opaque tokens that I read in their entirety without consideration of their component letters.  And a good reader reads text words without consideration of their vocal equivalents (though as a writer I read my own writing out loud&#8230; is that typical?  I&#8217;m guessing it is).  A good reader can of course vocalize if asked, but that doesn&#8217;t mean the vocalization is an accurate representation of their original reading experience.</p>
<p>Though it&#8217;s kind of an aside, I think the use of MUST and SHOULD in RFCs fits with this theory.  By using all caps they emphasize the word over the prose, they make the reader see the words as tokens unique from &quot;must&quot; and &quot;should&quot;, with special meanings that are related to but also much more strict than their usual English meaning.  The caps are a way of disturbing our natural way of determining meaning because they need a more exact language.</p>
</div>
												<!-- <rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
			xmlns:dc="http://purl.org/dc/elements/1.1/"
			xmlns:trackback="http://madskills.com/public/xml/rss/module/trackback/">
		<rdf:Description rdf:about="http://blog.ianbicking.org/2007/08/14/reflection-and-description-of-meaning/"
    dc:identifier="http://blog.ianbicking.org/2007/08/14/reflection-and-description-of-meaning/"
    dc:title="Reflection and Description Of Meaning"
    trackback:ping="http://blog.ianbicking.org/2007/08/14/reflection-and-description-of-meaning/trackback/" />
</rdf:RDF> -->
					</div><!-- END POST-ENTRY -->
				</div><!-- END POST-CONTENT  -->
			</div><!-- END-CONTAINER -->
			<div class="post-header">
				<h3 class="post-date">2007 08 14</h3>
				<p class="post-categories"><a href="../../index.html" title="View all posts in HTML" rel="category tag">HTML</a><br/><a href="../../../notech/index.html" title="View all posts in Non-technical" rel="category tag">Non-technical</a></p>
				<p class="post-comments"><a href="../../../../2007/08/14/reflection-and-description-of-meaning/index.html#comments" title="Comment on Reflection and Description Of Meaning">Comments (7)</a></p>
				<p class="post-permalink"><a href="../../../../2007/08/14/reflection-and-description-of-meaning/index.html" title="Permalink to Reflection and Description Of Meaning" rel="permalink">Permalink</a></p>
							</div><!-- END POST-FOOTER -->
		</div><!-- END POST -->


		<div class="navigation">
			<div class="alignleft"></div>
			<div class="alignright"><a href="../../index.html" >Newer posts &raquo;</a></div>
		</div><!-- END NAVIGATION -->


	</div><!-- END CONTENT -->
</div><!-- END CONTAINER  -->

<div id="sidebar">
	<ul>
		<li id="home-link">
			<h2><a href="../../../../index.html" title="Ian Bicking: a blog">Home</a></h2>
		</li>
<li id="text-315934862" class="widget widget_text"><h2 class="widgettitle">About</h2>
			<div class="textwidget">Ian is a developer with Mozilla, <a href="http://ianbicking.appspot.com/projects">Python open source developer</a>, actually uses <a href="https://plus.google.com/u/0/104537541227697934010/posts">Google+</a> more than <a href="http://twitter.com/ianbicking">twitter</a> and lives in Minneapolis.<br>
<span class="gittip-0001" gittip-username="ianbicking"></span>
<script id="gittip-0001"
  src="https://www.gittip.com/assets/widgets/0001.js"></script>
</div>
		</li>
<li id="text-315934863" class="widget widget_text">			<div class="textwidget"><!-- <script type="text/javascript">mbgc='f5f5f5';ww='160';mbc='cecece';bbc='3F79D5';bmobc='3b71c6';bbgc='4889F0';bmoc='3F79D5';bfc='FFFFFF';bmofc='ffffff';tlc='cecece';tc='6a6a6a';nc='6a6a6a';bc='6a6a6a';l='y';fs='16';fsb='13';bw='100';ff='4';lu='6a6a6a';pc='4889F0';wh='340';b='s'; pid='104537541227697934010';</script><script type="text/javascript" src="http://widgetsplus.com/google_plus_widget.js"></script> --></div>
		</li>
<li id="archives-2" class="widget widget_archive"><h2 class="widgettitle">Archives</h2>
		<ul>
			<li><a href='../../../../2012/10/index.html' title='October 2012'>October 2012</a></li>
	<li><a href='../../../../2012/02/index.html' title='February 2012'>February 2012</a></li>
	<li><a href='../../../../2011/04/index.html' title='April 2011'>April 2011</a></li>
	<li><a href='../../../../2011/03/index.html' title='March 2011'>March 2011</a></li>
	<li><a href='../../../../2010/09/index.html' title='September 2010'>September 2010</a></li>
	<li><a href='../../../../2010/08/index.html' title='August 2010'>August 2010</a></li>
	<li><a href='../../../../2010/05/index.html' title='May 2010'>May 2010</a></li>
	<li><a href='../../../../2010/04/index.html' title='April 2010'>April 2010</a></li>
	<li><a href='../../../../2010/03/index.html' title='March 2010'>March 2010</a></li>
	<li><a href='../../../../2010/02/index.html' title='February 2010'>February 2010</a></li>
	<li><a href='../../../../2010/01/index.html' title='January 2010'>January 2010</a></li>
	<li><a href='../../../../2009/09/index.html' title='September 2009'>September 2009</a></li>
	<li><a href='../../../../2009/05/index.html' title='May 2009'>May 2009</a></li>
	<li><a href='../../../../2009/04/index.html' title='April 2009'>April 2009</a></li>
	<li><a href='../../../../2009/01/index.html' title='January 2009'>January 2009</a></li>
	<li><a href='../../../../2008/12/index.html' title='December 2008'>December 2008</a></li>
	<li><a href='../../../../2008/11/index.html' title='November 2008'>November 2008</a></li>
	<li><a href='../../../../2008/10/index.html' title='October 2008'>October 2008</a></li>
	<li><a href='../../../../2008/09/index.html' title='September 2008'>September 2008</a></li>
	<li><a href='../../../../2008/08/index.html' title='August 2008'>August 2008</a></li>
	<li><a href='../../../../2008/07/index.html' title='July 2008'>July 2008</a></li>
	<li><a href='../../../../2008/06/index.html' title='June 2008'>June 2008</a></li>
	<li><a href='../../../../2008/05/index.html' title='May 2008'>May 2008</a></li>
	<li><a href='../../../../2008/04/index.html' title='April 2008'>April 2008</a></li>
	<li><a href='../../../../2008/03/index.html' title='March 2008'>March 2008</a></li>
	<li><a href='../../../../2008/02/index.html' title='February 2008'>February 2008</a></li>
	<li><a href='../../../../2008/01/index.html' title='January 2008'>January 2008</a></li>
	<li><a href='../../../../2007/11/index.html' title='November 2007'>November 2007</a></li>
	<li><a href='../../../../2007/10/index.html' title='October 2007'>October 2007</a></li>
	<li><a href='../../../../2007/09/index.html' title='September 2007'>September 2007</a></li>
	<li><a href='../../../../2007/08/index.html' title='August 2007'>August 2007</a></li>
	<li><a href='../../../../2007/07/index.html' title='July 2007'>July 2007</a></li>
		</ul>
</li>
<li id="text-315934861" class="widget widget_text">			<div class="textwidget"><a href="../../../../archive/index.html">The Older Archives</a></div>
		</li>
<li id="categories-1" class="widget widget_categories"><h2 class="widgettitle">Categories</h2>
		<ul>
	<li class="cat-item cat-item-12"><a href="../../../erlang/index.html" title="View all posts filed under Erlang">Erlang</a>
</li>
	<li class="cat-item cat-item-11 current-cat"><a href="../../index.html" title="View all posts filed under HTML">HTML</a>
</li>
	<li class="cat-item cat-item-8"><a href="../../../javascript/index.html" title="View all posts filed under Javascript">Javascript</a>
</li>
	<li class="cat-item cat-item-15"><a href="../../../licensing/index.html" title="View all posts filed under Licensing">Licensing</a>
</li>
	<li class="cat-item cat-item-18"><a href="../../../mozilla/index.html" title="View all posts filed under Mozilla">Mozilla</a>
</li>
	<li class="cat-item cat-item-5"><a href="../../../notech/index.html" title="View all posts filed under Non-technical">Non-technical</a>
</li>
	<li class="cat-item cat-item-6"><a href="../../../olpc/index.html" title="View all posts filed under OLPC">OLPC</a>
</li>
	<li class="cat-item cat-item-14"><a href="../../../packaging/index.html" title="View all posts filed under Packaging">Packaging</a>
</li>
	<li class="cat-item cat-item-4"><a href="../../../politics/index.html" title="View all posts filed under Politics">Politics</a>
</li>
	<li class="cat-item cat-item-3"><a href="../../../programming/index.html" title="View all posts filed under Programming">Programming</a>
</li>
	<li class="cat-item cat-item-7"><a href="../../../python/index.html" title="View all posts filed under Python">Python</a>
</li>
	<li class="cat-item cat-item-10"><a href="../../../ruby/index.html" title="View all posts filed under Ruby">Ruby</a>
</li>
	<li class="cat-item cat-item-19"><a href="../../../security/index.html" title="View all posts filed under Security">Security</a>
</li>
	<li class="cat-item cat-item-16"><a href="../../../silverlining.1" title="View all posts filed under Silver Lining">Silver Lining</a>
</li>
	<li class="cat-item cat-item-20"><a href="../../../programming/testing/index.html" title="View all posts filed under Testing">Testing</a>
</li>
	<li class="cat-item cat-item-9"><a href="../../../web/index.html" title="View all posts filed under Web">Web</a>
</li>
	<li class="cat-item cat-item-13"><a href="../../../zopeplone/index.html" title="View all posts filed under Zope/Plone">Zope/Plone</a>
</li>
		</ul>
</li>
<li id="search-2" class="widget widget_search"><form id="searchform" method="get" action="../../../../index.html">
	<div>
		<input id="s" name="s" type="text" value="" tabindex="1" size="10" />
		<input id="searchsubmit" name="searchsubmit" type="submit" value="Find" tabindex="2" />
	</div>
</form> </li>
		<li id="recent-posts-2" class="widget widget_recent_entries">		<h2 class="widgettitle">Recent Posts</h2>
		<ul>
				<li><a href="../../../../index.html?p=291" title="Why doctest.js is better than Python&#8217;s doctest">Why doctest.js is better than Python&#8217;s doctest</a></li>
				<li><a href="../../../../index.html?p=283" title="Python Application Package">Python Application Package</a></li>
				<li><a href="../../../../index.html?p=277" title="Git-as-sync, not source-control-as-deployment">Git-as-sync, not source-control-as-deployment</a></li>
				<li><a href="../../../../index.html?p=253" title="My Unsolicited Advice For PyPy">My Unsolicited Advice For PyPy</a></li>
				<li><a href="../../../../index.html?p=250" title="A Python Web Application Package and Format (we should make one)">A Python Web Application Package and Format (we should make one)</a></li>
				</ul>
		</li>
<li id="recent-comments-2" class="widget widget_recent_comments"><h2 class="widgettitle">Recent Comments</h2>
<ul id="recentcomments"><li class="recentcomments"><a href='http://www.mirsa.com.tr' rel='external nofollow' class='url'>havalandırma</a> on <a href="../../../../2012/10/02/why-doctest-js-is-better-than-pythons-doctest/comment-page-1/index.html#comment-228633">Why doctest.js is better than Python&#8217;s doctest</a></li><li class="recentcomments"><a href='http://redealmeidense.com.br/portalx/modules/' rel='external nofollow' class='url'>this website</a> on <a href="../../../../2012/10/02/why-doctest-js-is-better-than-pythons-doctest/comment-page-1/index.html#comment-196267">Why doctest.js is better than Python&#8217;s doctest</a></li><li class="recentcomments">Eric Pierce on <a href="../../../../2012/10/02/why-doctest-js-is-better-than-pythons-doctest/comment-page-1/index.html#comment-195322">Why doctest.js is better than Python&#8217;s doctest</a></li><li class="recentcomments">Paul Brian on <a href="../../../../2012/10/02/why-doctest-js-is-better-than-pythons-doctest/comment-page-1/index.html#comment-195321">Why doctest.js is better than Python&#8217;s doctest</a></li><li class="recentcomments"><a href='http://benjiyork.com' rel='external nofollow' class='url'>Benji York</a> on <a href="../../../../2012/10/02/why-doctest-js-is-better-than-pythons-doctest/comment-page-1/index.html#comment-195320">Why doctest.js is better than Python&#8217;s doctest</a></li></ul></li>
	</ul>
</div>

	<div id="footer">
		<p>
			&copy; 2013 Ian Bicking<!--
Does this commenting make me evil?
			|
			Thanks, <a href="http://wordpress.org/" title="WordPress">WordPress</a>
			|
			<a href="http://www.plaintxt.org/themes/barthelme/" title="Barthelme for WordPress" rel="follow">Barthelme</a> theme by <a href="http://scottwallick.com/" title="scottwallick.com" rel="follow">Scott</a>
			| <!-- The following is a link to the theme author's sponsor. Please consider its smallness and that Scott was nice enough to make this theme publically available. -->
			Sponsor: <a href="http://www.active-sandals.com/womreefsan.html" title="Support: Reef Sandals">Reef Sandals</a>
			|
			Valid <a href="http://validator.w3.org/check?uri=http://blog.ianbicking.org&amp;outline=1&amp;verbose=1" title="Valid XHTML 1.0 Strict" rel="nofollow">XHTML</a> &amp; <a href="http://jigsaw.w3.org/css-validator/validator?uri=http://blog.ianbicking.org/wp-content/themes/Barthelme-ianb/style.css&amp;profile=css2&amp;warning=no" title="Valid CSS" rel="nofollow">CSS</a>
			|
			-->
			RSS: <a href="../../../../feed/rss/index.html" title="Ian Bicking: a blog RSS 2.0 (XML) Feed" rel="alternate" type="application/rss+xml">Posts</a> &amp; <a href="../../../../comments/feed/index.html" title="Ian Bicking: a blog Comments RSS 2.0 (XML) Feed" rel="alternate" type="application/rss+xml">Comments</a>
		</p>
	</div>

</div><!-- END WRAPPER -->

	<!-- Somehow 41 queries occured in 0.961 seconds. Magic! -->
	<!-- The "Barthelme" theme copyright (c) 2006 Scott Allan Wallick - http://www.plaintxt.org/themes/ -->
	
<!-- Google Analytics -->
<script src="http://www.google-analytics.com/urchin.js" type="text/javascript">
</script>
<script type="text/javascript">
_uacct = "UA-2442258-1";
urchinTracker();
</script>

</body>
</html>