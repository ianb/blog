<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
	<title>XML and doctest</title>
<link rel="stylesheet" href="WK/default.css" type="text/css">
<link rel="alternate" type="application/rss+xml" title="New Posts" href="http://blog.ianbicking.org/feeds/new_pages.xml">

<link rel="openid.server" href="http://www.myopenid.com/server" />
<link rel="openid.delegate" href="http://ianb.myopenid.com" />

</head>
<body color="black" bgcolor="white">
<h1 id="header"><a href="index.html">Ian Bicking: the old part of his blog</a></h1>

<div style="float: right">

<script type="text/javascript">google_ad_client = "pub-2913402032659646";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_ad_type = "text";
google_ad_channel ="";
google_color_border = "336699";
google_color_bg = "FFFFFF";
google_color_link = "0000FF";
google_color_text = "000000";
google_color_url = "008000";
//--></script>

 <script src="http://pagead2.googlesyndication.com/pagead/show_ads.js"></script>
</div><h1>XML and doctest</h1>
 
<div class="document">
<p>After writing <a class="reference" href="my-first-bit-of-elementtree.html">htmlgen</a>, I then went about using it with a new module
<a class="reference" href="http://svn.colorstudy.com/trunk/Validator/validator/formgen.py">formgen</a> (based on an <a class="reference" href="http://svn.colorstudy.com/trunk/FormEncode/src/htmlview.py">old module</a> that was more complicated).  I
kept the tests, which were based on <a class="reference" href="http://python.org/doc/current/lib/module-doctest.html">doctest</a>.  But that's annoying,
because all the attributes get moved around, and the output has no
indentation or whitespace, and that's not very good documentation (and
not very easy to write either).</p>
<p><a class="reference" href="http://formencode.org/docs/DataTest/README.html">DataTest</a> (now defunct since <a class="reference" href="http://codespeak.net/py/current/doc/test.html">py.test</a> is better) had a <a class="reference" href="http://svn.colorstudy.com/trunk/DataTest/datatest/doctesthacks.py">module</a> that
allowed you to plug in different comparisons, like one that did
simplistic HTML/XML parsing and did fuzzy comparisons based on that.
Luckily that's not necessary anymore, because doctest in Python 2.4
<a class="reference" href="http://python.org/doc/current/lib/doctest-OutputChecker.html">includes</a> the necessary documented hooks to do it yourself.  (That
doctest version still works fine in earlier versions of Python.)</p>
<p>So I wrote a module <a class="reference" href="http://svn.colorstudy.com/trunk/Validator/validator/doctest_xml_compare.py">doctest_xml_compare</a> that attempts to compare
output against input on that basis.  It's pretty rough, but it mostly
does the job.  It also has a comparison function for ElementTree trees
that gives you a little feedback on the difference between two trees
(so you don't have to puzzle your way through looking for a slight
difference).</p>
</div>
 <div class="dates" align="right">
Created 24 Feb '05<br>
Modified 24 Feb '05</div>
<hr noshade><h3 id="comments">Comments:</h3>
<blockquote>
 
<div class="document">
<p>This is off topic but... I've always had a strange problem with the recent changes RSS feed on this Wiki.  I get a lot of entries titled simple &quot;This Wiki&quot;.  When clicked on, I get this error message;</p>
<p>blog.ianbickingorghttp could not be found. Please check the name and try again.</p>
<p>I'm using Sage (an RSS plug-in for Firefox).  It's been going on for a long time. Is it just me?</p>
</div>
 <div align="right"><a href="http://blog.ianbicking.org/xml-and-doctest-comment-1.html" rel="nofollow">#</a> <a href="http://">joeg</a></div><hr noshade>
</blockquote>
<script src="http://www.google-analytics.com/urchin.js" type="text/javascript">
</script>
<script type="text/javascript">
_uacct = "UA-2442258-1";
urchinTracker();
</script></body>
</html>
