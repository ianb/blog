<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <!-- MOBIFY - DO NOT ALTER - PASTE IMMEDIATELY AFTER OPENING HEAD TAG -->
        <script type="text/javascript">
            /*<![CDATA[*/ (function (a) {
                function b(a, b) {
                    if (+a) return ~a || (d.cookie = h + "=; path=/");
                    (j = d.createElement(e)),
                        (k = d.getElementsByTagName(e)[0]),
                        (j.src = a),
                        b && (j.onload = j.onerror = b),
                        k.parentNode.insertBefore(j, k);
                }
                function c() {
                    n.api || b(l.shift() || -1, c);
                }
                if (this.Mobify) return;
                var d = document,
                    e = "script",
                    f = "mobify",
                    g = "." + f + ".com/",
                    h = f + "-path",
                    i = g + "un" + f + ".js",
                    j,
                    k,
                    l = [!1, 1],
                    m,
                    n = (this.Mobify = {
                        points: [+new Date()],
                        tagVersion: [6, 0],
                    }),
                    o = /(; |#|&|^)mobify-path=([^&;]*)/g.exec(
                        location.hash + "; " + d.cookie
                    );
                o
                    ? (m = o[2]) &&
                      !+(m = sessionStorage[h] || m) &&
                      (l = [!0, "//preview" + g + escape(m)])
                    : ((l = a() || l),
                      l[0] && l.push("//cdn" + i, "//files01" + i)),
                    l.shift()
                        ? (d.write('<plaintext style="display:none;">'),
                          setTimeout(c))
                        : b(l[0]);
            })(function () {
                if (
                    /ip(hone|od)|android.*(mobile)|blackberry.*applewebkit/i.test(
                        navigator.userAgent
                    )
                ) {
                    return [
                        1,
                        "//cdn.mobify.com/sites/ians-blog/production/mobify.js",
                    ];
                }
            }); /*]]>*/
        </script>
        <!-- END MOBIFY -->
        <title>Ian Bicking: a blog :: lxml.html</title>
        <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
        <meta name="generator" content="WordPress 3.4.2" />
        <!-- LEAVE FOR STATS -->
        <meta name="description" content="" />
        <link
            rel="stylesheet"
            title="plaintxtSimpler"
            href="../../../../wp-content/themes/Barthelme-ianb/style.css"
            type="text/css"
            media="all"
        />
        <link
            rel="start"
            href="../../../../index.html"
            title="Ian Bicking: a blog"
        />
        <link
            rel="alternate"
            type="application/atom+xml"
            title="Ian Bicking: a blog Atom Feed"
            href="../../../../feed/atom/index.html"
        />
        <link
            rel="alternate"
            type="application/rss+xml"
            title="Ian Bicking: a blog RSS 2.0 Feed"
            href="../../../../feed/rss/index.html"
        />
        <link
            rel="alternate"
            type="application/rss+xml"
            title="Ian Bicking: a blog Comments RSS 2.0 Feed"
            href="../../../../comments/feed/index.html"
        />
        <link
            rel="alternate"
            type="application/rdf+xml"
            title="Ian Bicking: a blog RSS 1.0"
            href="../../../../feed/rdf/index.html"
        />
        <link
            rel="alternate"
            type="text/xml"
            title="Ian Bicking: a blog RSS 0.92 Feed"
            href="../../../../feed/rss/index.html"
        />
        <link
            rel="archives"
            title="October 2012"
            href="../../../../2012/10/index.html"
        />
        <link
            rel="archives"
            title="February 2012"
            href="../../../../2012/02/index.html"
        />
        <link
            rel="archives"
            title="April 2011"
            href="../../../../2011/04/index.html"
        />
        <link
            rel="archives"
            title="March 2011"
            href="../../../../2011/03/index.html"
        />
        <link
            rel="archives"
            title="September 2010"
            href="../../../../2010/09/index.html"
        />
        <link
            rel="archives"
            title="August 2010"
            href="../../../../2010/08/index.html"
        />
        <link
            rel="archives"
            title="May 2010"
            href="../../../../2010/05/index.html"
        />
        <link
            rel="archives"
            title="April 2010"
            href="../../../../2010/04/index.html"
        />
        <link
            rel="archives"
            title="March 2010"
            href="../../../../2010/03/index.html"
        />
        <link
            rel="archives"
            title="February 2010"
            href="../../../../2010/02/index.html"
        />
        <link
            rel="archives"
            title="January 2010"
            href="../../../../2010/01/index.html"
        />
        <link
            rel="archives"
            title="September 2009"
            href="../../../../2009/09/index.html"
        />
        <link
            rel="archives"
            title="May 2009"
            href="../../../../2009/05/index.html"
        />
        <link
            rel="archives"
            title="April 2009"
            href="../../../../2009/04/index.html"
        />
        <link
            rel="archives"
            title="January 2009"
            href="../../../../2009/01/index.html"
        />
        <link
            rel="archives"
            title="December 2008"
            href="../../../../2008/12/index.html"
        />
        <link
            rel="archives"
            title="November 2008"
            href="../../../../2008/11/index.html"
        />
        <link
            rel="archives"
            title="October 2008"
            href="../../../../2008/10/index.html"
        />
        <link
            rel="archives"
            title="September 2008"
            href="../../../../2008/09/index.html"
        />
        <link
            rel="archives"
            title="August 2008"
            href="../../../../2008/08/index.html"
        />
        <link
            rel="archives"
            title="July 2008"
            href="../../../../2008/07/index.html"
        />
        <link
            rel="archives"
            title="June 2008"
            href="../../../../2008/06/index.html"
        />
        <link
            rel="archives"
            title="May 2008"
            href="../../../../2008/05/index.html"
        />
        <link
            rel="archives"
            title="April 2008"
            href="../../../../2008/04/index.html"
        />
        <link
            rel="archives"
            title="March 2008"
            href="../../../../2008/03/index.html"
        />
        <link
            rel="archives"
            title="February 2008"
            href="../../../../2008/02/index.html"
        />
        <link
            rel="archives"
            title="January 2008"
            href="../../../../2008/01/index.html"
        />
        <link
            rel="archives"
            title="November 2007"
            href="../../../11/index.html"
        />
        <link
            rel="archives"
            title="October 2007"
            href="../../../10/index.html"
        />
        <link rel="archives" title="September 2007" href="../../index.html" />
        <link
            rel="archives"
            title="August 2007"
            href="../../../08/index.html"
        />
        <link rel="archives" title="July 2007" href="../../../07/index.html" />
        <link
            rel="alternate"
            type="application/rss+xml"
            title="Ian Bicking: a blog &raquo; lxml.html Comments Feed"
            href="https://ianbicking.org/2007/09/24/lxmlhtml/feed/"
        />
        <link
            rel="EditURI"
            type="application/rsd+xml"
            title="RSD"
            href="../../../../xmlrpc.php?rsd"
        />
        <link
            rel="wlwmanifest"
            type="application/wlwmanifest+xml"
            href="../../../../wp-includes/wlwmanifest.xml"
        />
        <link
            rel="prev"
            title="2 Python Environment Experiments"
            href="../../16/2-python-environment-experiments/index.html"
        />
        <link
            rel="next"
            title="Workingenv is dead, long live Virtualenv!"
            href="../../../10/10/workingenv-is-dead-long-live-virtualenv/index.html"
        />
        <meta name="generator" content="WordPress 3.4.2" />
        <link rel="canonical" href="index.html" />
        <link rel="shortlink" href="https://ianbicking.org/?p=32" />
        <link
            rel="stylesheet"
            href="../../../../wp-content/plugins/source-code-syntax-highlighting-plugin-for-wordpress/geshi.css"
            type="text/css"
        />
        <style type="text/css">
            .recentcomments a {
                display: inline !important;
                padding: 0 !important;
                margin: 0 !important;
            }
        </style>
        <style type="text/css" media="all">
            /*<![CDATA[*/
            body {
                font-size: 100%;
            }
            body {
                font-family: tahoma, geneva, sans-serif;
            }
            div.post-header,
            h2.post-title,
            p.post-date-single,
            h2.post-title-single,
            div.post-entry h1,
            div.post-entry h2,
            div.post-entry h3,
            div.post-entry h4,
            div.post-entry h5,
            div.post-entry h6,
            div.post-entry blockquote,
            div.post-footer,
            h3#comment-count,
            h4#comment-header,
            div#comments ol li p.comment-metadata,
            h4#respond {
                font-family: verdana, geneva, sans-serif;
            }
            div.post-entry p {
                text-align: left;
            }
            div#wrapper {
                width: 100%;
            }

            /*]]>*/
        </style>
    </head>
    <body>
        <div id="wrapper">
            <div
                id="header"
                onclick="location.href='https://ianbicking.org/';"
                style="cursor: pointer"
            >
                <h1 id="title">
                    <a href="../../../../index.html" title="Ian Bicking: a blog"
                        >Ian Bicking: a blog</a
                    >
                </h1>
                <p id="description"></p>
            </div>
            <!-- WP Theme Credits -->
            <div style="display: none">
                We can answer on question
                <a href="http://www.olnevhost.net/vps-hosting.html"
                    >what is VPS</a
                >? and what is
                <a href="http://www.olnevhost.net/dedicated-servers.html"
                    ><strong>cheap dedicated servers</strong></a
                >?
            </div>
            <!-- END HEADER -->
            <div id="container">
                <div id="content" class="widecolumn">
                    <div id="post-32" class="post single-post">
                        <p class="post-date-single">{ 2007 09 24 }</p>
                        <h2 class="post-title-single">lxml.html</h2>
                        <div class="post-entry">
                            <div class="document">
                                <p>
                                    Over the summer I did quite a bit of work on
                                    <a
                                        class="reference external"
                                        href="http://codespeak.net/svn/lxml/trunk/doc/lxmlhtml.txt"
                                        >lxml.html</a
                                    >. I&#8217;m pretty excited about it,
                                    because with just a little work HTML starts
                                    to be very usefully manipulatable. This
                                    isn&#8217;t how I&#8217;ve felt about HTML
                                    in the past, with all HTML emerging from
                                    templates and consumed only by browsers.
                                </p>
                                <p>
                                    The ElementTree representation (which lxml
                                    copies) is a bit of a nuisance when
                                    representing HTML. A
                                    <a
                                        class="reference external"
                                        href="http://codespeak.net/lxml/dev/lxmlhtml.html#html-element-methods"
                                        >few methods</a
                                    >
                                    improve it, but it is still awkward for
                                    content with mixed tags and text (common in
                                    HTML, uncommon in most other XML). Looking
                                    at
                                    <a
                                        class="reference external"
                                        href="http://genshi.edgewall.org/wiki/Documentation/filters.html#transformer"
                                        >Genshi Transforms</a
                                    >
                                    there are some things I wish we could do,
                                    like simply &quot;unwrap&quot; text and then
                                    wrap it again. But once you remove a tag the
                                    text is thoroughly merged into its
                                    neighbors. Another little nuisance is that
                                    <tt class="docutils literal"
                                        ><span class="pre">el.text</span></tt
                                    >
                                    and
                                    <tt class="docutils literal"
                                        ><span class="pre">el.tail</span></tt
                                    >
                                    can be None, which means you have to guard a
                                    lot of code.
                                </p>
                                <p>
                                    That said, here&#8217;s the Genshi example:
                                </p>
                                <div class="dean_ch" style="white-space: wrap">
                                    <br />
                                    &gt;&gt;&gt; html = HTML<span class="br0"
                                        >&#40;</span
                                    ><span class="st0">''</span
                                    ><span class="st0"
                                        >'&lt;html&gt;<br />
                                        ... &nbsp; &lt;head&gt;&lt;/head&gt;<br />
                                        ... &nbsp; &lt;body&gt;<br />
                                        ... &nbsp; &nbsp; Some
                                        &lt;em&gt;body&lt;/em&gt; text.<br />
                                        ... &nbsp; &lt;/body&gt;<br />
                                        ... &lt;/html&gt;'</span
                                    ><span class="st0">''</span
                                    ><span class="br0">&#41;</span><br />
                                    &gt;&gt;&gt;
                                    <span class="kw1">print</span> html |
                                    Transformer<span class="br0">&#40;</span
                                    ><span class="st0">'body/em'</span
                                    ><span class="br0">&#41;</span>.<span
                                        class="kw2"
                                        >map</span
                                    ><span class="br0">&#40;</span
                                    ><span class="kw2">unicode</span>.<span
                                        class="me1"
                                        >upper</span
                                    >, TEXT<span class="br0">&#41;</span>
                                    \<br />
                                    ... &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
                                    &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
                                    &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
                                    &nbsp;.<span class="me1">unwrap</span
                                    ><span class="br0">&#40;</span
                                    ><span class="br0">&#41;</span>.<span
                                        class="me1"
                                        >wrap</span
                                    ><span class="br0">&#40;</span>tag.<span
                                        class="me1"
                                        >u</span
                                    ><span class="br0">&#41;</span>.<span
                                        class="me1"
                                        >end</span
                                    ><span class="br0">&#40;</span
                                    ><span class="br0">&#41;</span> \<br />
                                    ... &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
                                    &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
                                    &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
                                    &nbsp;.<span class="kw3">select</span
                                    ><span class="br0">&#40;</span
                                    ><span class="st0">'body/u'</span
                                    ><span class="br0">&#41;</span> \<br />
                                    ... &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
                                    &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
                                    &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
                                    &nbsp;.<span class="me1">prepend</span
                                    ><span class="br0">&#40;</span
                                    ><span class="st0">'underlined '</span
                                    ><span class="br0">&#41;</span><br />
                                    &nbsp;
                                </div>
                                <p>
                                    Here&#8217;s how you&#8217;d do it with
                                    lxml.html:
                                </p>
                                <div class="dean_ch" style="white-space: wrap">
                                    <br />
                                    &gt;&gt;&gt; html = fromstring<span
                                        class="br0"
                                        >&#40;</span
                                    ><span class="st0">''</span
                                    ><span class="st0"
                                        >'... same thing ...'</span
                                    ><span class="st0">''</span
                                    ><span class="br0">&#41;</span><br />
                                    &gt;&gt;&gt;
                                    <span class="kw1">def</span> transform<span
                                        class="br0"
                                        >&#40;</span
                                    >doc<span class="br0">&#41;</span>:<br />
                                    ... &nbsp; &nbsp;
                                    <span class="kw1">for</span> el
                                    <span class="kw1">in</span> doc.<span
                                        class="me1"
                                        >xpath</span
                                    ><span class="br0">&#40;</span
                                    ><span class="st0">'body/em'</span
                                    ><span class="br0">&#41;</span>:<br />
                                    ... &nbsp; &nbsp; &nbsp; &nbsp;
                                    <span class="me1">el</span>.<span
                                        class="me1"
                                        >text</span
                                    >
                                    = <span class="br0">&#40;</span>el.<span
                                        class="me1"
                                        >text</span
                                    >
                                    <span class="kw1">or</span>
                                    <span class="st0">''</span
                                    ><span class="br0">&#41;</span>.<span
                                        class="me1"
                                        >upper</span
                                    ><span class="br0">&#40;</span
                                    ><span class="br0">&#41;</span><br />
                                    ... &nbsp; &nbsp; &nbsp; &nbsp;
                                    <span class="me1">el</span>.<span
                                        class="me1"
                                        >tag</span
                                    >
                                    = <span class="st0">'u'</span><br />
                                    ... &nbsp; &nbsp;
                                    <span class="kw1">for</span> el
                                    <span class="kw1">in</span> doc.<span
                                        class="me1"
                                        >xpath</span
                                    ><span class="br0">&#40;</span
                                    ><span class="st0">'body/u'</span
                                    ><span class="br0">&#41;</span>:<br />
                                    ... &nbsp; &nbsp; &nbsp; &nbsp;
                                    <span class="me1">el</span>.<span
                                        class="me1"
                                        >text</span
                                    >
                                    = <span class="st0">'underlined '</span> +
                                    <span class="br0">&#40;</span>el.<span
                                        class="me1"
                                        >text</span
                                    >
                                    <span class="kw1">or</span>
                                    <span class="st0">''</span
                                    ><span class="br0">&#41;</span><br />
                                    &nbsp;
                                </div>
                                <p>
                                    I&#8217;m not sure if Genshi works in-place
                                    here, or makes a copy; otherwise these are
                                    pretty much equivalent. Which is better?
                                    Personally I prefer mine, and actually
                                    prefer it quite strongly, because it&#8217;s
                                    quite simple &#8212; it&#8217;s a function
                                    with loops and assignments. It&#8217;s
                                    practically pedestrian in comparison to the
                                    Genshi example, which uses methods to
                                    declaratively create a transformer.
                                </p>
                                <p>
                                    Some of the things now in lxml.html include:
                                </p>
                                <ul>
                                    <li>
                                        <p class="first">
                                            <a
                                                class="reference external"
                                                href="http://codespeak.net/lxml/dev/lxmlhtml.html#working-with-links"
                                                >Link handling</a
                                            >, which is particularly focused on
                                            rewriting links so you can put HTML
                                            fragments into a new context without
                                            breaking the relative links.
                                        </p>
                                    </li>
                                    <li>
                                        <p class="first">
                                            <a
                                                class="reference external"
                                                href="http://codespeak.net/lxml/dev/lxmlhtml.html#running-html-doctests"
                                                >Smart doctest comparisons</a
                                            >
                                            (attribute-order-neutral
                                            comparisons, with improved diffs,
                                            and also whitespace neutral, based
                                            loosely on
                                            <a
                                                class="reference external"
                                                href="http://formencode.org/module-formencode.doctest_xml_compare.html"
                                                >formencode.doctest_xml_compare</a
                                            >). Inside your doctest choose XML
                                            parsing with
                                            <tt class="docutils literal"
                                                ><span class="pre">from</span>
                                                <span class="pre">lxml</span>
                                                <span class="pre">import</span
                                                >&nbsp;&nbsp;
                                                <span class="pre"
                                                    >usedoctest</span
                                                ></tt
                                            >
                                            or HTML parsing with
                                            <tt class="docutils literal"
                                                ><span class="pre">from</span>
                                                <span class="pre"
                                                    >lxml.html</span
                                                >
                                                <span class="pre">import</span
                                                >&nbsp;&nbsp;
                                                <span class="pre"
                                                    >usedoctest</span
                                                ></tt
                                            >. I consider the import trick My
                                            Worst Monkeypatch Ever, but it kind
                                            of reads nicely. For testing it is
                                            very nice.
                                        </p>
                                    </li>
                                    <li>
                                        <p class="first">
                                            <a
                                                class="reference external"
                                                href="http://codespeak.net/lxml/dev/lxmlhtml.html#cleaning-up-html"
                                                >Cleaning code</a
                                            >, to avoid XSS attacks, in
                                            <tt class="docutils literal"
                                                ><span class="pre"
                                                    >lxml.html.clean</span
                                                ></tt
                                            >. This is still pretty messy,
                                            because there&#8217;s lots of little
                                            things you may or may not want to
                                            protect against. E.g., I think I can
                                            mostly clean out style tags (at
                                            least of Javascript), but some
                                            people might want to remove all
                                            style. So there&#8217;s an option.
                                            There&#8217;s lots of options. Too
                                            many.
                                        </p>
                                    </li>
                                    <li>
                                        <p class="first">
                                            With the cleaning code there&#8217;s
                                            <a
                                                class="reference external"
                                                href="http://codespeak.net/lxml/dev/lxmlhtml.html#wordwrap"
                                                >word-wrapping code</a
                                            >
                                            and
                                            <a
                                                class="reference external"
                                                href="http://codespeak.net/lxml/dev/lxmlhtml.html#autolink"
                                                >autolinking code</a
                                            >. I think of these as
                                            clean-up-people&#8217;s-scrappy-HTML
                                            tools. Also important for putting
                                            untrusted HTML in a new context.
                                        </p>
                                    </li>
                                    <li>
                                        <p class="first">
                                            I rewrote
                                            <a
                                                class="reference external"
                                                href="http://formencode.org/htmlfill.html"
                                                >htmlfill</a
                                            >
                                            in
                                            <tt class="docutils literal"
                                                ><span class="pre"
                                                    >lxml.html.formfill</span
                                                ></tt
                                            >. It&#8217;s a bit simpler, and
                                            keeps error messages separate from
                                            actual value filling. They were
                                            really only combined because I
                                            didn&#8217;t want to do two passes
                                            with
                                            <tt class="docutils literal"
                                                ><span class="pre"
                                                    >HTMLParser</span
                                                ></tt
                                            >
                                            for the two steps, but that
                                            doesn&#8217;t matter when you load
                                            the document into memory. I also
                                            stopped using markup like
                                            <tt class="docutils literal"
                                                ><span class="pre"
                                                    >&lt;form:error&gt;</span
                                                ></tt
                                            >
                                            for placing error messages;
                                            it&#8217;s all automatic now, which
                                            I suppose is both good and bad.
                                        </p>
                                    </li>
                                    <li>
                                        <p class="first">
                                            <em>After</em> I wrote
                                            <tt class="docutils literal"
                                                ><span class="pre"
                                                    >lxml.html.formfill</span
                                                ></tt
                                            >
                                            I got it into my head to make
                                            smarter forms more natively. So now
                                            you can do:
                                        </p>
                                        <div
                                            class="dean_ch"
                                            style="white-space: wrap"
                                        >
                                            <br />
                                            &gt;&gt;&gt;
                                            <span class="kw1">from</span>
                                            lxml.<span class="me1">html</span>
                                            <span class="kw1">import</span>
                                            parse<br />
                                            &gt;&gt;&gt; page = parse<span
                                                class="br0"
                                                >&#40;</span
                                            ><span class="st0"
                                                >'http://tripsweb.rtachicago.com/'</span
                                            ><span class="br0">&#41;</span
                                            >.<span class="me1">getroot</span
                                            ><span class="br0">&#40;</span
                                            ><span class="br0">&#41;</span
                                            ><br />
                                            &gt;&gt;&gt; form = page.<span
                                                class="me1"
                                                >forms</span
                                            ><span class="br0">&#91;</span
                                            ><span class="nu0">0</span
                                            ><span class="br0">&#93;</span
                                            ><br />
                                            &gt;&gt;&gt;
                                            <span class="kw1">from</span>
                                            <span class="kw3">pprint</span>
                                            <span class="kw1">import</span>
                                            <span class="kw3">pprint</span
                                            ><br />
                                            &gt;&gt;&gt;
                                            <span class="kw3">pprint</span
                                            ><span class="br0">&#40;</span
                                            >form.<span class="me1"
                                                >form_values</span
                                            ><span class="br0">&#40;</span
                                            ><span class="br0">&#41;</span
                                            ><span class="br0">&#41;</span
                                            ><br />
                                            <span class="br0">&#91;</span
                                            ><span class="br0">&#40;</span
                                            ><span class="st0">'action'</span>,
                                            <span class="st0">'entry'</span
                                            ><span class="br0">&#41;</span
                                            >,<br />
                                            &nbsp;<span class="br0">&#40;</span
                                            ><span class="st0">'resptype'</span
                                            >, <span class="st0">'U'</span
                                            ><span class="br0">&#41;</span
                                            >,<br />
                                            &nbsp;<span class="br0">&#40;</span
                                            ><span class="st0">'Arr'</span>,
                                            <span class="st0">'D'</span
                                            ><span class="br0">&#41;</span
                                            >,<br />
                                            &nbsp;<span class="br0">&#40;</span
                                            ><span class="st0">'f_month'</span>,
                                            <span class="st0">'09'</span
                                            ><span class="br0">&#41;</span
                                            >,<br />
                                            &nbsp;<span class="br0">&#40;</span
                                            ><span class="st0">'f_day'</span>,
                                            <span class="st0">'21'</span
                                            ><span class="br0">&#41;</span
                                            >,<br />
                                            &nbsp;<span class="br0">&#40;</span
                                            ><span class="st0">'f_year'</span>,
                                            <span class="st0">'2007'</span
                                            ><span class="br0">&#41;</span
                                            >,<br />
                                            &nbsp;<span class="br0">&#40;</span
                                            ><span class="st0">'f_hours'</span>,
                                            <span class="st0">'9'</span
                                            ><span class="br0">&#41;</span
                                            >,<br />
                                            &nbsp;<span class="br0">&#40;</span
                                            ><span class="st0">'f_minutes'</span
                                            >, <span class="st0">'30'</span
                                            ><span class="br0">&#41;</span
                                            >,<br />
                                            &nbsp;<span class="br0">&#40;</span
                                            ><span class="st0">'f_ampm'</span>,
                                            <span class="st0">'AM'</span
                                            ><span class="br0">&#41;</span
                                            >,<br />
                                            &nbsp;<span class="br0">&#40;</span
                                            ><span class="st0">'Atr'</span>,
                                            <span class="st0">'N'</span
                                            ><span class="br0">&#41;</span
                                            >,<br />
                                            &nbsp;<span class="br0">&#40;</span
                                            ><span class="st0">'walk'</span>,
                                            <span class="st0">'0.9999'</span
                                            ><span class="br0">&#41;</span
                                            >,<br />
                                            &nbsp;<span class="br0">&#40;</span
                                            ><span class="st0">'Min'</span>,
                                            <span class="st0">'T'</span
                                            ><span class="br0">&#41;</span
                                            >,<br />
                                            &nbsp;<span class="br0">&#40;</span
                                            ><span class="st0">'mode'</span>,
                                            <span class="st0">'A'</span
                                            ><span class="br0">&#41;</span
                                            ><span class="br0">&#93;</span
                                            ><br />
                                            &gt;&gt;&gt;
                                            <span class="kw1">for</span> key
                                            <span class="kw1">in</span>
                                            <span class="kw2">sorted</span
                                            ><span class="br0">&#40;</span
                                            >f.<span class="me1">fields</span
                                            >.<span class="me1">keys</span
                                            ><span class="br0">&#40;</span
                                            ><span class="br0">&#41;</span
                                            ><span class="br0">&#41;</span
                                            >:<br />
                                            ... &nbsp; &nbsp;
                                            <span class="kw1">print</span>
                                            key<br />
                                            <span class="kw2">None</span><br />
                                            Arr<br />
                                            Atr<br />
                                            Dest<br />
                                            Min<br />
                                            Orig<br />
                                            action<br />
                                            dCity<br />
                                            endpoint<br />
                                            f_ampm<br />
                                            f_day<br />
                                            f_hours<br />
                                            f_minutes<br />
                                            f_month<br />
                                            f_year<br />
                                            mode<br />
                                            oCity<br />
                                            resptype<br />
                                            startpoint<br />
                                            walk<br />
                                            &gt;&gt;&gt; f.<span class="me1"
                                                >fields</span
                                            ><span class="br0">&#91;</span
                                            ><span class="st0">'Orig'</span
                                            ><span class="br0">&#93;</span> =
                                            <span class="st0"
                                                >'1500 W Leland'</span
                                            ><br />
                                            &gt;&gt;&gt; f.<span class="me1"
                                                >fields</span
                                            ><span class="br0">&#91;</span
                                            ><span class="st0">'Dest'</span
                                            ><span class="br0">&#93;</span> =
                                            <span class="st0"
                                                >'LINCOLN PARK ZOO'</span
                                            ><br />
                                            &gt;&gt;&gt;
                                            <span class="kw1">from</span>
                                            lxml.<span class="me1">html</span>
                                            <span class="kw1">import</span>
                                            submit_form<span class="br0"
                                                >&#40;</span
                                            ><span class="br0">&#41;</span
                                            ><br />
                                            &gt;&gt;&gt; result = parse<span
                                                class="br0"
                                                >&#40;</span
                                            >submit_form<span class="br0"
                                                >&#40;</span
                                            >f<span class="br0">&#41;</span
                                            ><span class="br0">&#41;</span
                                            >.<span class="me1">getroot</span
                                            ><span class="br0">&#40;</span
                                            ><span class="br0">&#41;</span
                                            ><br />
                                            &nbsp;
                                        </div>
                                        <p>
                                            From there I&#8217;d have to
                                            actually scrape the results to
                                            figure out what the best trip was,
                                            which isn&#8217;t as easy.
                                        </p>
                                    </li>
                                    <li>
                                        <p class="first">
                                            HTML diffing and something like
                                            <tt class="docutils literal"
                                                ><span class="pre">svn</span>
                                                <span class="pre"
                                                    >blame</span
                                                ></tt
                                            >
                                            for a series of documents, in
                                            <tt class="docutils literal"
                                                ><span class="pre"
                                                    >lxml.html.diff</span
                                                ></tt
                                            >. Someone noted a similarity
                                            between htmldiff and
                                            <a
                                                class="reference external"
                                                href="http://code.google.com/p/templatemaker/"
                                                >templatemaker</a
                                            >, and they are conceptually
                                            similar, but with very different
                                            purposes. htmldiff goes to great
                                            trouble to <em>ignore</em> markup
                                            and focus only on changes to textual
                                            content. As such it is great for a
                                            history page.
                                            <tt class="docutils literal"
                                                ><span class="pre"
                                                    >templatemaker</span
                                                ></tt
                                            >
                                            focuses on the dissection of
                                            computer-generated HTML and
                                            extracting its human-generated
                                            components. Templatemaker is focused
                                            on screen scraping. It might be
                                            handy in that form example
                                            above&#8230;
                                        </p>
                                    </li>
                                    <li>
                                        <p class="first">
                                            There&#8217;s also a fairly complete
                                            implementation of
                                            <a
                                                class="reference external"
                                                href="http://codespeak.net/lxml/dev/cssselect.html"
                                                >CSS 3 selectors</a
                                            >. It would be interesting to mix
                                            this with
                                            <a
                                                class="reference external"
                                                href="http://code.google.com/p/cssutils/"
                                                >cssutils</a
                                            >.
                                        </p>
                                        <p>
                                            Though
                                            <a
                                                class="reference external"
                                                href="http://alex.dojotoolkit.org/?p=625"
                                                >some people aren&#8217;t so
                                                enthusiastic about CSS
                                                namespaces</a
                                            >
                                            (and I can&#8217;t really blame
                                            him), conveniently this CSS 3
                                            feature makes CSS selectors
                                            applicable to all XML. I don&#8217;t
                                            know if anyone is actually going to
                                            use them instead of XPath on
                                            non-HTML documents, but you
                                            <em>could</em>. Because the
                                            implementation just compiles CSS to
                                            XPath, you could potentially use
                                            this module with other XML libraries
                                            that know XPath. Of which I only
                                            actually know
                                            <a
                                                class="reference external"
                                                href="http://uche.ogbuji.net/tech/4suite/amara/"
                                                >one</a
                                            >
                                            (or
                                            <cite
                                                >two
                                                &lt;http://genshi.edgewall.org/&gt;</cite
                                            >?) &#8212; though compiling CSS to
                                            XPath, then having XPath parsed and
                                            interpreted in Python, is probably
                                            not a good idea. But if you are so
                                            inclined, there&#8217;s also a
                                            parser in there you could use.
                                        </p>
                                    </li>
                                    <li>
                                        <p class="first">
                                            lxml and
                                            <a
                                                class="reference external"
                                                href="http://www.crummy.com/software/BeautifulSoup/"
                                                >BeautifulSoup</a
                                            >
                                            are no longer exclusive choices:
                                            <tt class="docutils literal"
                                                ><span class="pre"
                                                    >lxml.html.ElementSoup.parse()</span
                                                ></tt
                                            >
                                            can parse pages with BeautifulSoup
                                            into lxml data structures. While the
                                            native lxml/libxml2 HTML parser
                                            works on pretty bad HTML,
                                            BeautifulSoup works on
                                            <em>really</em> bad HTML. It would
                                            be nice to have something similar
                                            with
                                            <a
                                                class="reference external"
                                                href="http://code.google.com/p/html5lib/"
                                                >html5lib</a
                                            >.
                                        </p>
                                    </li>
                                </ul>
                            </div>
                            <p>
                                Automatically generated list of related posts:
                            </p>
                            <ol>
                                <li>
                                    <a
                                        href="../../../../2008/12/10/lxml-an-underappreciated-web-scraping-library/index.html"
                                        rel="bookmark"
                                        title="lxml: an underappreciated web scraping library"
                                        >lxml: an underappreciated web scraping
                                        library</a
                                    >
                                    <small
                                        >When people think about web scraping in
                                        Python, they usually...</small
                                    >
                                </li>
                                <li>
                                    <a
                                        href="../../../../2008/03/30/python-html-parser-performance/index.html"
                                        rel="bookmark"
                                        title="Python HTML Parser Performance"
                                        >Python HTML Parser Performance</a
                                    >
                                    <small
                                        >In preparation for my PyCon talk on
                                        HTML I thought...</small
                                    >
                                </li>
                                <li>
                                    <a
                                        href="../../../../2008/07/30/making-a-proxy-with-wsgi-and-lxml/index.html"
                                        rel="bookmark"
                                        title="Making a proxy with WSGI and lxml"
                                        >Making a proxy with WSGI and lxml</a
                                    >
                                    <small
                                        >You can use WSGI to make rewriting
                                        middleware; WebOb specifically...</small
                                    >
                                </li>
                                <li>
                                    <a
                                        href="../../../../2008/03/23/html-accessibility/index.html"
                                        rel="bookmark"
                                        title="HTML Accessibility"
                                        >HTML Accessibility</a
                                    >
                                    <small
                                        >So I gave a presentation at PyCon about
                                        HTML, which...</small
                                    >
                                </li>
                            </ol>
                        </div>
                        <!-- END POST-ENTRY  -->
                        <!-- <rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
			xmlns:dc="http://purl.org/dc/elements/1.1/"
			xmlns:trackback="http://madskills.com/public/xml/rss/module/trackback/">
		<rdf:Description rdf:about="https://ianbicking.org/2007/09/24/lxmlhtml/"
    dc:identifier="https://ianbicking.org/2007/09/24/lxmlhtml/"
    dc:title="lxml.html"
    trackback:ping="https://ianbicking.org/2007/09/24/lxmlhtml/trackback/" />
</rdf:RDF> -->
                        <div class="post-footer">
                            <p>
                                Posted by Ian Bicking on Monday, September 24th,
                                2007, at 8:32 am, and filed under
                                <a
                                    href="../../../../category/html/index.html"
                                    title="View all posts in HTML"
                                    rel="category tag"
                                    >HTML</a
                                >,
                                <a
                                    href="../../../../category/python/index.html"
                                    title="View all posts in Python"
                                    rel="category tag"
                                    >Python</a
                                >.
                            </p>
                            <p>
                                Comments have a
                                <a
                                    href="https://ianbicking.org/2007/09/24/lxmlhtml/feed/"
                                    >feed</a
                                >.
                            </p>
                        </div>
                        <!-- END POST-FOOTER -->
                    </div>
                    <!-- END POST -->

                    <div id="comments">
                        <h4 id="comments">8 Comments</h4>
                        <ul class="commentlist">
                            <li
                                class="comment even thread-even depth-1"
                                id="comment-1093"
                            >
                                <div id="div-comment-1093" class="comment-body">
                                    <div class="comment-author vcard">
                                        <img
                                            alt=""
                                            src="http://1.gravatar.com/avatar/73e879fe356b2e446337d69233af2392?s=32&amp;d=http%3A%2F%2Fblog.ianbicking.org%2Fwp-includes%2Fimages%2Fblank.gif&amp;r=PG"
                                            class="avatar avatar-32 photo"
                                            height="32"
                                            width="32"
                                        />
                                        <cite class="fn">Fredrik</cite>
                                        <span class="says">says:</span>
                                    </div>

                                    <div class="comment-meta commentmetadata">
                                        <a
                                            href="https://ianbicking.org/2007/09/24/lxmlhtml/comment-page-1/#comment-1093"
                                        >
                                            September 24, 2007 at 10:13 am</a
                                        >
                                    </div>

                                    <p>
                                        So how hard would it be to make the
                                        relevant portions of this work also for
                                        xml.etree ?
                                    </p>

                                    <div class="reply"></div>
                                </div>
                            </li>
                            <li
                                class="comment byuser comment-author-ianb bypostauthor odd alt thread-odd thread-alt depth-1"
                                id="comment-1094"
                            >
                                <div id="div-comment-1094" class="comment-body">
                                    <div class="comment-author vcard">
                                        <img
                                            alt=""
                                            src="http://0.gravatar.com/avatar/cc8334869c9d2a9e603017f2da805eb3?s=32&amp;d=http%3A%2F%2Fblog.ianbicking.org%2Fwp-includes%2Fimages%2Fblank.gif&amp;r=PG"
                                            class="avatar avatar-32 photo"
                                            height="32"
                                            width="32"
                                        />
                                        <cite class="fn"
                                            ><a
                                                href="../../../../index.html"
                                                rel="external nofollow"
                                                class="url"
                                                >Ian Bicking</a
                                            ></cite
                                        >
                                        <span class="says">says:</span>
                                    </div>

                                    <div class="comment-meta commentmetadata">
                                        <a
                                            href="https://ianbicking.org/2007/09/24/lxmlhtml/comment-page-1/#comment-1094"
                                        >
                                            September 24, 2007 at 11:26 am</a
                                        >
                                    </div>

                                    <p>
                                        Fredrik: I&#8217;m not sure. Obviously
                                        the first part is parsing HTML, but
                                        there are BeautifulSoup parsers and
                                        native serialization in ET 1.3. I use
                                        <code>el.getparent()</code> sometimes,
                                        and though not a tremendous amount
                                        I&#8217;ve found it&#8217;s hard to
                                        refactor when you don&#8217;t have that
                                        pointer to the parent, as in
                                        ElementTree. Also, many of these use
                                        XPath very heavily. You could probably
                                        rewrite several of them to be simpler
                                        (ET-compatible) expressions plus a
                                        simple list comprehension.
                                    </p>

                                    <p>
                                        A couple might be more feasible than the
                                        others: the differ, maybe formfill, and
                                        definitely the doctest comparison stuff
                                        would be okay (since it is based on code
                                        that was written for ElementTree
                                        originally).
                                    </p>

                                    <div class="reply"></div>
                                </div>
                            </li>
                            <li
                                class="comment even thread-even depth-1"
                                id="comment-1099"
                            >
                                <div id="div-comment-1099" class="comment-body">
                                    <div class="comment-author vcard">
                                        <img
                                            alt=""
                                            src="http://1.gravatar.com/avatar/141ac8cdf6d5306a15201d472a32a1c5?s=32&amp;d=http%3A%2F%2Fblog.ianbicking.org%2Fwp-includes%2Fimages%2Fblank.gif&amp;r=PG"
                                            class="avatar avatar-32 photo"
                                            height="32"
                                            width="32"
                                        />
                                        <cite class="fn">Martijn Faassen</cite>
                                        <span class="says">says:</span>
                                    </div>

                                    <div class="comment-meta commentmetadata">
                                        <a
                                            href="https://ianbicking.org/2007/09/24/lxmlhtml/comment-page-1/#comment-1099"
                                        >
                                            September 24, 2007 at 1:44 pm</a
                                        >
                                    </div>

                                    <p>
                                        I&#8217;m happy to see all this great
                                        work appear in lxml! lxml is still my
                                        baby too and I&#8217;m very proud. :)
                                        Thanks Ian for these great contributions
                                        and thanks Stefan for being such an
                                        excellent lead developer for lxml!
                                    </p>

                                    <div class="reply"></div>
                                </div>
                            </li>
                            <li
                                class="comment odd alt thread-odd thread-alt depth-1"
                                id="comment-1101"
                            >
                                <div id="div-comment-1101" class="comment-body">
                                    <div class="comment-author vcard">
                                        <img
                                            alt=""
                                            src="http://1.gravatar.com/avatar/5e14e03b801b4839a5aa7e16daaba2a9?s=32&amp;d=http%3A%2F%2Fblog.ianbicking.org%2Fwp-includes%2Fimages%2Fblank.gif&amp;r=PG"
                                            class="avatar avatar-32 photo"
                                            height="32"
                                            width="32"
                                        />
                                        <cite class="fn"
                                            ><a
                                                href="http://james.html5.org/"
                                                rel="external nofollow"
                                                class="url"
                                                >jgraham</a
                                            ></cite
                                        >
                                        <span class="says">says:</span>
                                    </div>

                                    <div class="comment-meta commentmetadata">
                                        <a
                                            href="https://ianbicking.org/2007/09/24/lxmlhtml/comment-page-1/#comment-1101"
                                        >
                                            September 24, 2007 at 4:18 pm</a
                                        >
                                    </div>

                                    <p>
                                        &gt; It would be nice to have something
                                        similar with html5lib.
                                    </p>

                                    <p>
                                        It appears lxml has grown a HTML
                                        5-incompatible idea desire to enforce
                                        &#8220;valid&#8221; tag names. In
                                        particular it seems things like
                                        lxml.etree.Element(&#8220;foo?bar&#8221;)
                                        now throw a value errors even though
                                        HTML 5 parsers are expected to be able
                                        to create elements called
                                        &#8220;foo?bar&#8221;. Not only does
                                        this mean that not all HTML 5 trees can
                                        be represented in lxml.etree, but it
                                        means that our hack of using a HTML
                                        5-illegal element name to represent the
                                        notional document root doesn&#8217;t
                                        work any more. If this problem can be
                                        overcome, html5lib already supports
                                        generating lxml trees, so it would be
                                        easy to wrap it in syntax like
                                        lxml.html.html5lib.parse().
                                    </p>

                                    <div class="reply"></div>
                                </div>
                            </li>
                            <li
                                class="comment even thread-even depth-1"
                                id="comment-1121"
                            >
                                <div id="div-comment-1121" class="comment-body">
                                    <div class="comment-author vcard">
                                        <img
                                            alt=""
                                            src="http://1.gravatar.com/avatar/3e7e975f0fa432f4ae6604f72c132309?s=32&amp;d=http%3A%2F%2Fblog.ianbicking.org%2Fwp-includes%2Fimages%2Fblank.gif&amp;r=PG"
                                            class="avatar avatar-32 photo"
                                            height="32"
                                            width="32"
                                        />
                                        <cite class="fn"
                                            ><a
                                                href="http://farmdev.com/"
                                                rel="external nofollow"
                                                class="url"
                                                >Kumar McMillan</a
                                            ></cite
                                        >
                                        <span class="says">says:</span>
                                    </div>

                                    <div class="comment-meta commentmetadata">
                                        <a
                                            href="https://ianbicking.org/2007/09/24/lxmlhtml/comment-page-1/#comment-1121"
                                        >
                                            September 25, 2007 at 12:52 pm</a
                                        >
                                    </div>

                                    <p>
                                        Hi Ian, I just wanted to say thanks for
                                        hacking on this and I look forward to
                                        seeing it merged into lxml&#8217;s
                                        trunk. I&#8217;ve deployed it from the
                                        branch and have been using it for a side
                                        project quite successfully. Ironically,
                                        it&#8217;s a screen scraper. I tried
                                        using templatemaker on the scrapee but
                                        its template is obfuscated (my theory
                                        anyway) so it [breaks templatemaker
                                        pretty bad](<a
                                            href="http://code.google.com/p/templatemaker/issues/detail?id=4"
                                            rel="nofollow"
                                            >http://code.google.com/p/templatemaker/issues/detail?id=4</a
                                        >). Anyway, xpath seems cleaner and more
                                        maintainable. Plus, it is very useful to
                                        have HTMLElement.text_content() so that
                                        the template can be analyzed in a more
                                        contextual way.
                                    </p>

                                    <p>
                                        I&#8217;ve also been starting to work
                                        with paste (via pylons) a little more
                                        than just experimentation and it might
                                        be nice to use xpath for assertions on
                                        paste.fixture&#8217;s response. However,
                                        I haven&#8217;t needed more than the
                                        provided mustcontain() method yet so
                                        maybe it would be overkill, just a
                                        thought.
                                    </p>

                                    <p>
                                        Xpath would certainly be a clean,
                                        maintainable way to
                                        &#8220;validate&#8221; a template. That
                                        is, answer : Do all my pages implement
                                        the common header/footer/nav-bar layout
                                        for the site? I&#8217;m not sure if it
                                        is reasonable to go to such lengths in
                                        ones tests, this again is just a
                                        thought.
                                    </p>

                                    <div class="reply"></div>
                                </div>
                            </li>
                            <li
                                class="comment odd alt thread-odd thread-alt depth-1"
                                id="comment-1122"
                            >
                                <div id="div-comment-1122" class="comment-body">
                                    <div class="comment-author vcard">
                                        <img
                                            alt=""
                                            src="http://1.gravatar.com/avatar/3e7e975f0fa432f4ae6604f72c132309?s=32&amp;d=http%3A%2F%2Fblog.ianbicking.org%2Fwp-includes%2Fimages%2Fblank.gif&amp;r=PG"
                                            class="avatar avatar-32 photo"
                                            height="32"
                                            width="32"
                                        />
                                        <cite class="fn"
                                            ><a
                                                href="http://farmdev.com/"
                                                rel="external nofollow"
                                                class="url"
                                                >Kumar McMillan</a
                                            ></cite
                                        >
                                        <span class="says">says:</span>
                                    </div>

                                    <div class="comment-meta commentmetadata">
                                        <a
                                            href="https://ianbicking.org/2007/09/24/lxmlhtml/comment-page-1/#comment-1122"
                                        >
                                            September 25, 2007 at 12:58 pm</a
                                        >
                                    </div>

                                    <p>
                                        oh, cool, I see it&#8217;s already in
                                        lxml&#8217;s trunk :)
                                    </p>

                                    <div class="reply"></div>
                                </div>
                            </li>
                            <li
                                class="comment byuser comment-author-ianb bypostauthor even thread-even depth-1"
                                id="comment-1126"
                            >
                                <div id="div-comment-1126" class="comment-body">
                                    <div class="comment-author vcard">
                                        <img
                                            alt=""
                                            src="http://0.gravatar.com/avatar/cc8334869c9d2a9e603017f2da805eb3?s=32&amp;d=http%3A%2F%2Fblog.ianbicking.org%2Fwp-includes%2Fimages%2Fblank.gif&amp;r=PG"
                                            class="avatar avatar-32 photo"
                                            height="32"
                                            width="32"
                                        />
                                        <cite class="fn"
                                            ><a
                                                href="../../../../index.html"
                                                rel="external nofollow"
                                                class="url"
                                                >Ian Bicking</a
                                            ></cite
                                        >
                                        <span class="says">says:</span>
                                    </div>

                                    <div class="comment-meta commentmetadata">
                                        <a
                                            href="https://ianbicking.org/2007/09/24/lxmlhtml/comment-page-1/#comment-1126"
                                        >
                                            September 25, 2007 at 6:18 pm</a
                                        >
                                    </div>

                                    <p>
                                        Re: testing &#8212; there&#8217;s a
                                        property to access the lxml document in
                                        WebTest (an extraction of
                                        paste.fixture):
                                        <a
                                            href="http://pythonpaste.org/webtest/#parsing-the-body"
                                            rel="nofollow"
                                            >http://pythonpaste.org/webtest/#parsing-the-body</a
                                        >
                                    </p>

                                    <div class="reply"></div>
                                </div>
                            </li>
                            <li
                                class="comment odd alt thread-odd thread-alt depth-1"
                                id="comment-171895"
                            >
                                <div
                                    id="div-comment-171895"
                                    class="comment-body"
                                >
                                    <div class="comment-author vcard">
                                        <img
                                            alt=""
                                            src="http://0.gravatar.com/avatar/24617651310fd4e77c246f8e96efb900?s=32&amp;d=http%3A%2F%2Fblog.ianbicking.org%2Fwp-includes%2Fimages%2Fblank.gif&amp;r=PG"
                                            class="avatar avatar-32 photo"
                                            height="32"
                                            width="32"
                                        />
                                        <cite class="fn"
                                            ><a
                                                href="http://tv.free-tutorials.org"
                                                rel="external nofollow"
                                                class="url"
                                                >Catalin Festila</a
                                            ></cite
                                        >
                                        <span class="says">says:</span>
                                    </div>

                                    <div class="comment-meta commentmetadata">
                                        <a
                                            href="https://ianbicking.org/2007/09/24/lxmlhtml/comment-page-1/#comment-171895"
                                        >
                                            August 30, 2010 at 8:13 am</a
                                        >
                                    </div>

                                    <p>
                                        I test your example . I have a question
                                        about this. If the result is another
                                        page (see your source &#8220;result =
                                        parse(submit_form(f)).getroot()&#8221;
                                        ). And this page has another form , how
                                        is correct way to repeat your example to
                                        use the new form ? I try with :
                                        page2=parse(result).getroot() but i got
                                        some errors . Thank&#8217;s
                                    </p>

                                    <div class="reply"></div>
                                </div>
                            </li>
                        </ul>

                        <div class="navigation">
                            <div class="alignleft"></div>
                            <div class="alignright"></div>
                        </div>
                    </div>

                    <div class="navigation">
                        <div class="nav-left">
                            &laquo;
                            <a
                                href="../../16/2-python-environment-experiments/index.html"
                                rel="prev"
                                >2 Python Environment Experiments</a
                            >
                        </div>
                        <div class="nav-right">
                            <a
                                href="../../../10/10/workingenv-is-dead-long-live-virtualenv/index.html"
                                rel="next"
                                >Workingenv is dead, long live Virtualenv!</a
                            >
                            &raquo;
                        </div>
                    </div>
                    <!-- END NAVIGATION -->
                </div>
                <!-- END CONTENT -->
            </div>
            <!-- END CONTAINER  -->

            <div id="sidebar">
                <ul>
                    <li id="home-link">
                        <h2>
                            <a
                                href="../../../../index.html"
                                title="Ian Bicking: a blog"
                                >Home</a
                            >
                        </h2>
                    </li>
                    <li id="text-315934862" class="widget widget_text">
                        <h2 class="widgettitle">About</h2>
                        <div class="textwidget">
                            Ian is a developer with Mozilla,
                            <a href="http://ianbicking.appspot.com/projects"
                                >Python open source developer</a
                            >, actually uses
                            <a
                                href="https://plus.google.com/u/0/104537541227697934010/posts"
                                >Google+</a
                            >
                            more than
                            <a href="http://twitter.com/ianbicking">twitter</a>
                            and lives in Minneapolis.<br />
                            <span
                                class="gittip-0001"
                                gittip-username="ianbicking"
                            ></span>
                            <script
                                id="gittip-0001"
                                src="https://www.gittip.com/assets/widgets/0001.js"
                            ></script>
                        </div>
                    </li>
                    <li id="text-315934863" class="widget widget_text">
                        <div class="textwidget">
                            <!-- <script type="text/javascript">mbgc='f5f5f5';ww='160';mbc='cecece';bbc='3F79D5';bmobc='3b71c6';bbgc='4889F0';bmoc='3F79D5';bfc='FFFFFF';bmofc='ffffff';tlc='cecece';tc='6a6a6a';nc='6a6a6a';bc='6a6a6a';l='y';fs='16';fsb='13';bw='100';ff='4';lu='6a6a6a';pc='4889F0';wh='340';b='s'; pid='104537541227697934010';</script><script type="text/javascript" src="http://widgetsplus.com/google_plus_widget.js"></script> -->
                        </div>
                    </li>
                    <li id="archives-2" class="widget widget_archive">
                        <h2 class="widgettitle">Archives</h2>
                        <ul>
                            <li>
                                <a
                                    href="../../../../2012/10/index.html"
                                    title="October 2012"
                                    >October 2012</a
                                >
                            </li>
                            <li>
                                <a
                                    href="../../../../2012/02/index.html"
                                    title="February 2012"
                                    >February 2012</a
                                >
                            </li>
                            <li>
                                <a
                                    href="../../../../2011/04/index.html"
                                    title="April 2011"
                                    >April 2011</a
                                >
                            </li>
                            <li>
                                <a
                                    href="../../../../2011/03/index.html"
                                    title="March 2011"
                                    >March 2011</a
                                >
                            </li>
                            <li>
                                <a
                                    href="../../../../2010/09/index.html"
                                    title="September 2010"
                                    >September 2010</a
                                >
                            </li>
                            <li>
                                <a
                                    href="../../../../2010/08/index.html"
                                    title="August 2010"
                                    >August 2010</a
                                >
                            </li>
                            <li>
                                <a
                                    href="../../../../2010/05/index.html"
                                    title="May 2010"
                                    >May 2010</a
                                >
                            </li>
                            <li>
                                <a
                                    href="../../../../2010/04/index.html"
                                    title="April 2010"
                                    >April 2010</a
                                >
                            </li>
                            <li>
                                <a
                                    href="../../../../2010/03/index.html"
                                    title="March 2010"
                                    >March 2010</a
                                >
                            </li>
                            <li>
                                <a
                                    href="../../../../2010/02/index.html"
                                    title="February 2010"
                                    >February 2010</a
                                >
                            </li>
                            <li>
                                <a
                                    href="../../../../2010/01/index.html"
                                    title="January 2010"
                                    >January 2010</a
                                >
                            </li>
                            <li>
                                <a
                                    href="../../../../2009/09/index.html"
                                    title="September 2009"
                                    >September 2009</a
                                >
                            </li>
                            <li>
                                <a
                                    href="../../../../2009/05/index.html"
                                    title="May 2009"
                                    >May 2009</a
                                >
                            </li>
                            <li>
                                <a
                                    href="../../../../2009/04/index.html"
                                    title="April 2009"
                                    >April 2009</a
                                >
                            </li>
                            <li>
                                <a
                                    href="../../../../2009/01/index.html"
                                    title="January 2009"
                                    >January 2009</a
                                >
                            </li>
                            <li>
                                <a
                                    href="../../../../2008/12/index.html"
                                    title="December 2008"
                                    >December 2008</a
                                >
                            </li>
                            <li>
                                <a
                                    href="../../../../2008/11/index.html"
                                    title="November 2008"
                                    >November 2008</a
                                >
                            </li>
                            <li>
                                <a
                                    href="../../../../2008/10/index.html"
                                    title="October 2008"
                                    >October 2008</a
                                >
                            </li>
                            <li>
                                <a
                                    href="../../../../2008/09/index.html"
                                    title="September 2008"
                                    >September 2008</a
                                >
                            </li>
                            <li>
                                <a
                                    href="../../../../2008/08/index.html"
                                    title="August 2008"
                                    >August 2008</a
                                >
                            </li>
                            <li>
                                <a
                                    href="../../../../2008/07/index.html"
                                    title="July 2008"
                                    >July 2008</a
                                >
                            </li>
                            <li>
                                <a
                                    href="../../../../2008/06/index.html"
                                    title="June 2008"
                                    >June 2008</a
                                >
                            </li>
                            <li>
                                <a
                                    href="../../../../2008/05/index.html"
                                    title="May 2008"
                                    >May 2008</a
                                >
                            </li>
                            <li>
                                <a
                                    href="../../../../2008/04/index.html"
                                    title="April 2008"
                                    >April 2008</a
                                >
                            </li>
                            <li>
                                <a
                                    href="../../../../2008/03/index.html"
                                    title="March 2008"
                                    >March 2008</a
                                >
                            </li>
                            <li>
                                <a
                                    href="../../../../2008/02/index.html"
                                    title="February 2008"
                                    >February 2008</a
                                >
                            </li>
                            <li>
                                <a
                                    href="../../../../2008/01/index.html"
                                    title="January 2008"
                                    >January 2008</a
                                >
                            </li>
                            <li>
                                <a
                                    href="../../../11/index.html"
                                    title="November 2007"
                                    >November 2007</a
                                >
                            </li>
                            <li>
                                <a
                                    href="../../../10/index.html"
                                    title="October 2007"
                                    >October 2007</a
                                >
                            </li>
                            <li>
                                <a
                                    href="../../index.html"
                                    title="September 2007"
                                    >September 2007</a
                                >
                            </li>
                            <li>
                                <a
                                    href="../../../08/index.html"
                                    title="August 2007"
                                    >August 2007</a
                                >
                            </li>
                            <li>
                                <a
                                    href="../../../07/index.html"
                                    title="July 2007"
                                    >July 2007</a
                                >
                            </li>
                        </ul>
                    </li>
                    <li id="text-315934861" class="widget widget_text">
                        <div class="textwidget">
                            <a href="../../../../archive/index.html"
                                >The Older Archives</a
                            >
                        </div>
                    </li>
                    <li id="categories-1" class="widget widget_categories">
                        <h2 class="widgettitle">Categories</h2>
                        <ul>
                            <li class="cat-item cat-item-12">
                                <a
                                    href="../../../../category/erlang/index.html"
                                    title="View all posts filed under Erlang"
                                    >Erlang</a
                                >
                            </li>
                            <li class="cat-item cat-item-11">
                                <a
                                    href="../../../../category/html/index.html"
                                    title="View all posts filed under HTML"
                                    >HTML</a
                                >
                            </li>
                            <li class="cat-item cat-item-8">
                                <a
                                    href="../../../../category/javascript/index.html"
                                    title="View all posts filed under Javascript"
                                    >Javascript</a
                                >
                            </li>
                            <li class="cat-item cat-item-15">
                                <a
                                    href="../../../../category/licensing/index.html"
                                    title="View all posts filed under Licensing"
                                    >Licensing</a
                                >
                            </li>
                            <li class="cat-item cat-item-18">
                                <a
                                    href="../../../../category/mozilla/index.html"
                                    title="View all posts filed under Mozilla"
                                    >Mozilla</a
                                >
                            </li>
                            <li class="cat-item cat-item-5">
                                <a
                                    href="../../../../category/notech/index.html"
                                    title="View all posts filed under Non-technical"
                                    >Non-technical</a
                                >
                            </li>
                            <li class="cat-item cat-item-6">
                                <a
                                    href="../../../../category/olpc/index.html"
                                    title="View all posts filed under OLPC"
                                    >OLPC</a
                                >
                            </li>
                            <li class="cat-item cat-item-14">
                                <a
                                    href="../../../../category/packaging/index.html"
                                    title="View all posts filed under Packaging"
                                    >Packaging</a
                                >
                            </li>
                            <li class="cat-item cat-item-4">
                                <a
                                    href="../../../../category/politics/index.html"
                                    title="View all posts filed under Politics"
                                    >Politics</a
                                >
                            </li>
                            <li class="cat-item cat-item-3">
                                <a
                                    href="../../../../category/programming/index.html"
                                    title="View all posts filed under Programming"
                                    >Programming</a
                                >
                            </li>
                            <li class="cat-item cat-item-7">
                                <a
                                    href="../../../../category/python/index.html"
                                    title="View all posts filed under Python"
                                    >Python</a
                                >
                            </li>
                            <li class="cat-item cat-item-10">
                                <a
                                    href="../../../../category/ruby/index.html"
                                    title="View all posts filed under Ruby"
                                    >Ruby</a
                                >
                            </li>
                            <li class="cat-item cat-item-19">
                                <a
                                    href="../../../../category/security/index.html"
                                    title="View all posts filed under Security"
                                    >Security</a
                                >
                            </li>
                            <li class="cat-item cat-item-16">
                                <a
                                    href="../../../../category/silverlining.1"
                                    title="View all posts filed under Silver Lining"
                                    >Silver Lining</a
                                >
                            </li>
                            <li class="cat-item cat-item-20">
                                <a
                                    href="../../../../category/programming/testing/index.html"
                                    title="View all posts filed under Testing"
                                    >Testing</a
                                >
                            </li>
                            <li class="cat-item cat-item-9">
                                <a
                                    href="../../../../category/web/index.html"
                                    title="View all posts filed under Web"
                                    >Web</a
                                >
                            </li>
                            <li class="cat-item cat-item-13">
                                <a
                                    href="../../../../category/zopeplone/index.html"
                                    title="View all posts filed under Zope/Plone"
                                    >Zope/Plone</a
                                >
                            </li>
                        </ul>
                    </li>
                    <li id="search-2" class="widget widget_search">
                        <form
                            id="searchform"
                            method="get"
                            action="../../../../index.html"
                        >
                            <div>
                                <input
                                    id="s"
                                    name="s"
                                    type="text"
                                    value=""
                                    tabindex="1"
                                    size="10"
                                />
                                <input
                                    id="searchsubmit"
                                    name="searchsubmit"
                                    type="submit"
                                    value="Find"
                                    tabindex="2"
                                />
                            </div>
                        </form>
                    </li>
                    <li
                        id="recent-posts-2"
                        class="widget widget_recent_entries"
                    >
                        <h2 class="widgettitle">Recent Posts</h2>
                        <ul>
                            <li>
                                <a
                                    href="../../../../index.html?p=291"
                                    title="Why doctest.js is better than Python&#8217;s doctest"
                                    >Why doctest.js is better than
                                    Python&#8217;s doctest</a
                                >
                            </li>
                            <li>
                                <a
                                    href="../../../../index.html?p=283"
                                    title="Python Application Package"
                                    >Python Application Package</a
                                >
                            </li>
                            <li>
                                <a
                                    href="../../../../index.html?p=277"
                                    title="Git-as-sync, not source-control-as-deployment"
                                    >Git-as-sync, not
                                    source-control-as-deployment</a
                                >
                            </li>
                            <li>
                                <a
                                    href="../../../../index.html?p=253"
                                    title="My Unsolicited Advice For PyPy"
                                    >My Unsolicited Advice For PyPy</a
                                >
                            </li>
                            <li>
                                <a
                                    href="../../../../index.html?p=250"
                                    title="A Python Web Application Package and Format (we should make one)"
                                    >A Python Web Application Package and Format
                                    (we should make one)</a
                                >
                            </li>
                        </ul>
                    </li>
                    <li
                        id="recent-comments-2"
                        class="widget widget_recent_comments"
                    >
                        <h2 class="widgettitle">Recent Comments</h2>
                        <ul id="recentcomments">
                            <li class="recentcomments">
                                <a
                                    href="http://www.mirsa.com.tr"
                                    rel="external nofollow"
                                    class="url"
                                    >havalandrma</a
                                >
                                on
                                <a
                                    href="../../../../2012/10/02/why-doctest-js-is-better-than-pythons-doctest/comment-page-1/index.html#comment-228633"
                                    >Why doctest.js is better than
                                    Python&#8217;s doctest</a
                                >
                            </li>
                            <li class="recentcomments">
                                <a
                                    href="http://redealmeidense.com.br/portalx/modules/"
                                    rel="external nofollow"
                                    class="url"
                                    >this website</a
                                >
                                on
                                <a
                                    href="../../../../2012/10/02/why-doctest-js-is-better-than-pythons-doctest/comment-page-1/index.html#comment-196267"
                                    >Why doctest.js is better than
                                    Python&#8217;s doctest</a
                                >
                            </li>
                            <li class="recentcomments">
                                Eric Pierce on
                                <a
                                    href="../../../../2012/10/02/why-doctest-js-is-better-than-pythons-doctest/comment-page-1/index.html#comment-195322"
                                    >Why doctest.js is better than
                                    Python&#8217;s doctest</a
                                >
                            </li>
                            <li class="recentcomments">
                                Paul Brian on
                                <a
                                    href="../../../../2012/10/02/why-doctest-js-is-better-than-pythons-doctest/comment-page-1/index.html#comment-195321"
                                    >Why doctest.js is better than
                                    Python&#8217;s doctest</a
                                >
                            </li>
                            <li class="recentcomments">
                                <a
                                    href="http://benjiyork.com"
                                    rel="external nofollow"
                                    class="url"
                                    >Benji York</a
                                >
                                on
                                <a
                                    href="../../../../2012/10/02/why-doctest-js-is-better-than-pythons-doctest/comment-page-1/index.html#comment-195320"
                                    >Why doctest.js is better than
                                    Python&#8217;s doctest</a
                                >
                            </li>
                        </ul>
                    </li>
                </ul>
            </div>

            <div id="footer">
                <p>
                    &copy; 2013 Ian Bicking<!--
Does this commenting make me evil?
			|
			Thanks, <a href="http://wordpress.org/" title="WordPress">WordPress</a>
			|
			<a href="http://www.plaintxt.org/themes/barthelme/" title="Barthelme for WordPress" rel="follow">Barthelme</a> theme by <a href="http://scottwallick.com/" title="scottwallick.com" rel="follow">Scott</a>
			| <!-- The following is a link to the theme author's sponsor. Please consider its smallness and that Scott was nice enough to make this theme publically available. -->
                    Sponsor:
                    <a
                        href="http://www.active-sandals.com/womreefsan.html"
                        title="Support: Reef Sandals"
                        >Reef Sandals</a
                    >
                    | Valid
                    <a
                        href="http://validator.w3.org/check?uri=http://blog.ianbicking.org&amp;outline=1&amp;verbose=1"
                        title="Valid XHTML 1.0 Strict"
                        rel="nofollow"
                        >XHTML</a
                    >
                    &amp;
                    <a
                        href="http://jigsaw.w3.org/css-validator/validator?uri=https://ianbicking.org/wp-content/themes/Barthelme-ianb/style.css&amp;profile=css2&amp;warning=no"
                        title="Valid CSS"
                        rel="nofollow"
                        >CSS</a
                    >
                    | --> RSS:
                    <a
                        href="../../../../feed/rss/index.html"
                        title="Ian Bicking: a blog RSS 2.0 (XML) Feed"
                        rel="alternate"
                        type="application/rss+xml"
                        >Posts</a
                    >
                    &amp;
                    <a
                        href="../../../../comments/feed/index.html"
                        title="Ian Bicking: a blog Comments RSS 2.0 (XML) Feed"
                        rel="alternate"
                        type="application/rss+xml"
                        >Comments</a
                    >
                </p>
            </div>
        </div>
        <!-- END WRAPPER -->

        <!-- Somehow 44 queries occured in 1.516 seconds. Magic! -->
        <!-- The "Barthelme" theme copyright (c) 2006 Scott Allan Wallick - http://www.plaintxt.org/themes/ -->
        <script
            type="text/javascript"
            src="../../../../wp-includes/js/comment-reply.js?ver=3.4.2"
        ></script>

        <!-- Google Analytics -->
        <script
            src="http://www.google-analytics.com/urchin.js"
            type="text/javascript"
        ></script>
        <script type="text/javascript">
            _uacct = "UA-2442258-1";
            urchinTracker();
        </script>
    </body>
</html>
