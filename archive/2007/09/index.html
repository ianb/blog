<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <!-- MOBIFY - DO NOT ALTER - PASTE IMMEDIATELY AFTER OPENING HEAD TAG -->
        <script type="text/javascript">
            /*<![CDATA[*/ (function (a) {
                function b(a, b) {
                    if (+a) return ~a || (d.cookie = h + "=; path=/");
                    (j = d.createElement(e)),
                        (k = d.getElementsByTagName(e)[0]),
                        (j.src = a),
                        b && (j.onload = j.onerror = b),
                        k.parentNode.insertBefore(j, k);
                }
                function c() {
                    n.api || b(l.shift() || -1, c);
                }
                if (this.Mobify) return;
                var d = document,
                    e = "script",
                    f = "mobify",
                    g = "." + f + ".com/",
                    h = f + "-path",
                    i = g + "un" + f + ".js",
                    j,
                    k,
                    l = [!1, 1],
                    m,
                    n = (this.Mobify = {
                        points: [+new Date()],
                        tagVersion: [6, 0],
                    }),
                    o = /(; |#|&|^)mobify-path=([^&;]*)/g.exec(
                        location.hash + "; " + d.cookie
                    );
                o
                    ? (m = o[2]) &&
                      !+(m = sessionStorage[h] || m) &&
                      (l = [!0, "//preview" + g + escape(m)])
                    : ((l = a() || l),
                      l[0] && l.push("//cdn" + i, "//files01" + i)),
                    l.shift()
                        ? (d.write('<plaintext style="display:none;">'),
                          setTimeout(c))
                        : b(l[0]);
            })(function () {
                if (
                    /ip(hone|od)|android.*(mobile)|blackberry.*applewebkit/i.test(
                        navigator.userAgent
                    )
                ) {
                    return [
                        1,
                        "//cdn.mobify.com/sites/ians-blog/production/mobify.js",
                    ];
                }
            }); /*]]>*/
        </script>
        <!-- END MOBIFY -->
        <title>Ian Bicking: a blog :: 2007 :: September</title>
        <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
        <meta name="generator" content="WordPress 3.4.2" />
        <!-- LEAVE FOR STATS -->
        <meta name="description" content="" />
        <link
            rel="stylesheet"
            title="plaintxtSimpler"
            href="../../wp-content/themes/Barthelme-ianb/style.css"
            type="text/css"
            media="all"
        />
        <link rel="start" href="../../index.html" title="Ian Bicking: a blog" />
        <link
            rel="alternate"
            type="application/atom+xml"
            title="Ian Bicking: a blog Atom Feed"
            href="../../feed/atom/index.html"
        />
        <link
            rel="alternate"
            type="application/rss+xml"
            title="Ian Bicking: a blog RSS 2.0 Feed"
            href="../../feed/rss/index.html"
        />
        <link
            rel="alternate"
            type="application/rss+xml"
            title="Ian Bicking: a blog Comments RSS 2.0 Feed"
            href="../../comments/feed/index.html"
        />
        <link
            rel="alternate"
            type="application/rdf+xml"
            title="Ian Bicking: a blog RSS 1.0"
            href="../../feed/rdf/index.html"
        />
        <link
            rel="alternate"
            type="text/xml"
            title="Ian Bicking: a blog RSS 0.92 Feed"
            href="../../feed/rss/index.html"
        />
        <link
            rel="archives"
            title="October 2012"
            href="../../2012/10/index.html"
        />
        <link
            rel="archives"
            title="February 2012"
            href="../../2012/02/index.html"
        />
        <link
            rel="archives"
            title="April 2011"
            href="../../2011/04/index.html"
        />
        <link
            rel="archives"
            title="March 2011"
            href="../../2011/03/index.html"
        />
        <link
            rel="archives"
            title="September 2010"
            href="../../2010/09/index.html"
        />
        <link
            rel="archives"
            title="August 2010"
            href="../../2010/08/index.html"
        />
        <link rel="archives" title="May 2010" href="../../2010/05/index.html" />
        <link
            rel="archives"
            title="April 2010"
            href="../../2010/04/index.html"
        />
        <link
            rel="archives"
            title="March 2010"
            href="../../2010/03/index.html"
        />
        <link
            rel="archives"
            title="February 2010"
            href="../../2010/02/index.html"
        />
        <link
            rel="archives"
            title="January 2010"
            href="../../2010/01/index.html"
        />
        <link
            rel="archives"
            title="September 2009"
            href="../../2009/09/index.html"
        />
        <link rel="archives" title="May 2009" href="../../2009/05/index.html" />
        <link
            rel="archives"
            title="April 2009"
            href="../../2009/04/index.html"
        />
        <link
            rel="archives"
            title="January 2009"
            href="../../2009/01/index.html"
        />
        <link
            rel="archives"
            title="December 2008"
            href="../../2008/12/index.html"
        />
        <link
            rel="archives"
            title="November 2008"
            href="../../2008/11/index.html"
        />
        <link
            rel="archives"
            title="October 2008"
            href="../../2008/10/index.html"
        />
        <link
            rel="archives"
            title="September 2008"
            href="../../2008/09/index.html"
        />
        <link
            rel="archives"
            title="August 2008"
            href="../../2008/08/index.html"
        />
        <link
            rel="archives"
            title="July 2008"
            href="../../2008/07/index.html"
        />
        <link
            rel="archives"
            title="June 2008"
            href="../../2008/06/index.html"
        />
        <link rel="archives" title="May 2008" href="../../2008/05/index.html" />
        <link
            rel="archives"
            title="April 2008"
            href="../../2008/04/index.html"
        />
        <link
            rel="archives"
            title="March 2008"
            href="../../2008/03/index.html"
        />
        <link
            rel="archives"
            title="February 2008"
            href="../../2008/02/index.html"
        />
        <link
            rel="archives"
            title="January 2008"
            href="../../2008/01/index.html"
        />
        <link rel="archives" title="November 2007" href="../11/index.html" />
        <link rel="archives" title="October 2007" href="../10/index.html" />
        <link rel="archives" title="September 2007" href="index.html" />
        <link rel="archives" title="August 2007" href="../08/index.html" />
        <link rel="archives" title="July 2007" href="../07/index.html" />
        <link
            rel="EditURI"
            type="application/rsd+xml"
            title="RSD"
            href="../../xmlrpc.php?rsd"
        />
        <link
            rel="wlwmanifest"
            type="application/wlwmanifest+xml"
            href="../../wp-includes/wlwmanifest.xml"
        />
        <meta name="generator" content="WordPress 3.4.2" />
        <link
            rel="stylesheet"
            href="../../wp-content/plugins/source-code-syntax-highlighting-plugin-for-wordpress/geshi.css"
            type="text/css"
        />
        <style type="text/css">
            .recentcomments a {
                display: inline !important;
                padding: 0 !important;
                margin: 0 !important;
            }
        </style>
        <style type="text/css" media="all">
            /*<![CDATA[*/
            body {
                font-size: 100%;
            }
            body {
                font-family: tahoma, geneva, sans-serif;
            }
            div.post-header,
            h2.post-title,
            p.post-date-single,
            h2.post-title-single,
            div.post-entry h1,
            div.post-entry h2,
            div.post-entry h3,
            div.post-entry h4,
            div.post-entry h5,
            div.post-entry h6,
            div.post-entry blockquote,
            div.post-footer,
            h3#comment-count,
            h4#comment-header,
            div#comments ol li p.comment-metadata,
            h4#respond {
                font-family: verdana, geneva, sans-serif;
            }
            div.post-entry p {
                text-align: left;
            }
            div#wrapper {
                width: 100%;
            }

            /*]]>*/
        </style>
    </head>
    <body>
        <div id="wrapper">
            <div
                id="header"
                onclick="location.href='https://ianbicking.org/';"
                style="cursor: pointer"
            >
                <h1 id="title">
                    <a href="../../index.html" title="Ian Bicking: a blog"
                        >Ian Bicking: a blog</a
                    >
                </h1>
                <p id="description"></p>
            </div>
            <!-- WP Theme Credits -->
            <div style="display: none">
                We can answer on question
                <a href="http://www.olnevhost.net/vps-hosting.html"
                    >what is VPS</a
                >? and what is
                <a href="http://www.olnevhost.net/dedicated-servers.html"
                    ><strong>cheap dedicated servers</strong></a
                >?
            </div>
            <!-- END HEADER -->
            <div id="container">
                <div id="content" class="narrowcolumn">
                    <p class="post-date-single">{ Monthly Archives }</p>
                    <h2 class="post-title-single">September 2007</h2>

                    <div id="post-32" class="post">
                        <div class="post-container">
                            <div class="post-content">
                                <h2 class="post-title">
                                    <a
                                        href="24/lxmlhtml/index.html"
                                        title="Permalink to lxml.html"
                                        rel="bookmark"
                                        >lxml.html</a
                                    >
                                </h2>
                                <div class="post-entry">
                                    <div class="document">
                                        <p>
                                            Over the summer I did quite a bit of
                                            work on
                                            <a
                                                class="reference external"
                                                href="http://codespeak.net/svn/lxml/trunk/doc/lxmlhtml.txt"
                                                >lxml.html</a
                                            >. I&#8217;m pretty excited about
                                            it, because with just a little work
                                            HTML starts to be very usefully
                                            manipulatable. This isn&#8217;t how
                                            I&#8217;ve felt about HTML in the
                                            past, with all HTML emerging from
                                            templates and consumed only by
                                            browsers.
                                        </p>
                                        <p>
                                            The ElementTree representation
                                            (which lxml copies) is a bit of a
                                            nuisance when representing HTML. A
                                            <a
                                                class="reference external"
                                                href="http://codespeak.net/lxml/dev/lxmlhtml.html#html-element-methods"
                                                >few methods</a
                                            >
                                            improve it, but it is still awkward
                                            for content with mixed tags and text
                                            (common in HTML, uncommon in most
                                            other XML). Looking at
                                            <a
                                                class="reference external"
                                                href="http://genshi.edgewall.org/wiki/Documentation/filters.html#transformer"
                                                >Genshi Transforms</a
                                            >
                                            there are some things I wish we
                                            could do, like simply
                                            &quot;unwrap&quot; text and then
                                            wrap it again. But once you remove a
                                            tag the text is thoroughly merged
                                            into its neighbors. Another little
                                            nuisance is that
                                            <tt class="docutils literal"
                                                ><span class="pre"
                                                    >el.text</span
                                                ></tt
                                            >
                                            and
                                            <tt class="docutils literal"
                                                ><span class="pre"
                                                    >el.tail</span
                                                ></tt
                                            >
                                            can be None, which means you have to
                                            guard a lot of code.
                                        </p>
                                        <p>
                                            That said, here&#8217;s the Genshi
                                            example:
                                        </p>
                                        <div
                                            class="dean_ch"
                                            style="white-space: wrap"
                                        >
                                            <br />
                                            &gt;&gt;&gt; html = HTML<span
                                                class="br0"
                                                >&#40;</span
                                            ><span class="st0">''</span
                                            ><span class="st0"
                                                >'&lt;html&gt;<br />
                                                ... &nbsp;
                                                &lt;head&gt;&lt;/head&gt;<br />
                                                ... &nbsp; &lt;body&gt;<br />
                                                ... &nbsp; &nbsp; Some
                                                &lt;em&gt;body&lt;/em&gt;
                                                text.<br />
                                                ... &nbsp; &lt;/body&gt;<br />
                                                ... &lt;/html&gt;'</span
                                            ><span class="st0">''</span
                                            ><span class="br0">&#41;</span
                                            ><br />
                                            &gt;&gt;&gt;
                                            <span class="kw1">print</span> html
                                            | Transformer<span class="br0"
                                                >&#40;</span
                                            ><span class="st0">'body/em'</span
                                            ><span class="br0">&#41;</span
                                            >.<span class="kw2">map</span
                                            ><span class="br0">&#40;</span
                                            ><span class="kw2">unicode</span
                                            >.<span class="me1">upper</span>,
                                            TEXT<span class="br0">&#41;</span>
                                            \<br />
                                            ... &nbsp; &nbsp; &nbsp; &nbsp;
                                            &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
                                            &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
                                            &nbsp; &nbsp; &nbsp; &nbsp;.<span
                                                class="me1"
                                                >unwrap</span
                                            ><span class="br0">&#40;</span
                                            ><span class="br0">&#41;</span
                                            >.<span class="me1">wrap</span
                                            ><span class="br0">&#40;</span
                                            >tag.<span class="me1">u</span
                                            ><span class="br0">&#41;</span
                                            >.<span class="me1">end</span
                                            ><span class="br0">&#40;</span
                                            ><span class="br0">&#41;</span>
                                            \<br />
                                            ... &nbsp; &nbsp; &nbsp; &nbsp;
                                            &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
                                            &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
                                            &nbsp; &nbsp; &nbsp; &nbsp;.<span
                                                class="kw3"
                                                >select</span
                                            ><span class="br0">&#40;</span
                                            ><span class="st0">'body/u'</span
                                            ><span class="br0">&#41;</span>
                                            \<br />
                                            ... &nbsp; &nbsp; &nbsp; &nbsp;
                                            &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
                                            &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
                                            &nbsp; &nbsp; &nbsp; &nbsp;.<span
                                                class="me1"
                                                >prepend</span
                                            ><span class="br0">&#40;</span
                                            ><span class="st0"
                                                >'underlined '</span
                                            ><span class="br0">&#41;</span
                                            ><br />
                                            &nbsp;
                                        </div>
                                        <p>
                                            Here&#8217;s how you&#8217;d do it
                                            with lxml.html:
                                        </p>
                                        <div
                                            class="dean_ch"
                                            style="white-space: wrap"
                                        >
                                            <br />
                                            &gt;&gt;&gt; html = fromstring<span
                                                class="br0"
                                                >&#40;</span
                                            ><span class="st0">''</span
                                            ><span class="st0"
                                                >'... same thing ...'</span
                                            ><span class="st0">''</span
                                            ><span class="br0">&#41;</span
                                            ><br />
                                            &gt;&gt;&gt;
                                            <span class="kw1">def</span>
                                            transform<span class="br0"
                                                >&#40;</span
                                            >doc<span class="br0">&#41;</span
                                            >:<br />
                                            ... &nbsp; &nbsp;
                                            <span class="kw1">for</span> el
                                            <span class="kw1">in</span>
                                            doc.<span class="me1">xpath</span
                                            ><span class="br0">&#40;</span
                                            ><span class="st0">'body/em'</span
                                            ><span class="br0">&#41;</span
                                            >:<br />
                                            ... &nbsp; &nbsp; &nbsp; &nbsp;
                                            <span class="me1">el</span>.<span
                                                class="me1"
                                                >text</span
                                            >
                                            =
                                            <span class="br0">&#40;</span
                                            >el.<span class="me1">text</span>
                                            <span class="kw1">or</span>
                                            <span class="st0">''</span
                                            ><span class="br0">&#41;</span
                                            >.<span class="me1">upper</span
                                            ><span class="br0">&#40;</span
                                            ><span class="br0">&#41;</span
                                            ><br />
                                            ... &nbsp; &nbsp; &nbsp; &nbsp;
                                            <span class="me1">el</span>.<span
                                                class="me1"
                                                >tag</span
                                            >
                                            = <span class="st0">'u'</span><br />
                                            ... &nbsp; &nbsp;
                                            <span class="kw1">for</span> el
                                            <span class="kw1">in</span>
                                            doc.<span class="me1">xpath</span
                                            ><span class="br0">&#40;</span
                                            ><span class="st0">'body/u'</span
                                            ><span class="br0">&#41;</span
                                            >:<br />
                                            ... &nbsp; &nbsp; &nbsp; &nbsp;
                                            <span class="me1">el</span>.<span
                                                class="me1"
                                                >text</span
                                            >
                                            =
                                            <span class="st0"
                                                >'underlined '</span
                                            >
                                            +
                                            <span class="br0">&#40;</span
                                            >el.<span class="me1">text</span>
                                            <span class="kw1">or</span>
                                            <span class="st0">''</span
                                            ><span class="br0">&#41;</span
                                            ><br />
                                            &nbsp;
                                        </div>
                                        <p>
                                            I&#8217;m not sure if Genshi works
                                            in-place here, or makes a copy;
                                            otherwise these are pretty much
                                            equivalent. Which is better?
                                            Personally I prefer mine, and
                                            actually prefer it quite strongly,
                                            because it&#8217;s quite simple
                                            &#8212; it&#8217;s a function with
                                            loops and assignments. It&#8217;s
                                            practically pedestrian in comparison
                                            to the Genshi example, which uses
                                            methods to declaratively create a
                                            transformer.
                                        </p>
                                        <p>
                                            Some of the things now in lxml.html
                                            include:
                                        </p>
                                        <ul>
                                            <li>
                                                <p class="first">
                                                    <a
                                                        class="reference external"
                                                        href="http://codespeak.net/lxml/dev/lxmlhtml.html#working-with-links"
                                                        >Link handling</a
                                                    >, which is particularly
                                                    focused on rewriting links
                                                    so you can put HTML
                                                    fragments into a new context
                                                    without breaking the
                                                    relative links.
                                                </p>
                                            </li>
                                            <li>
                                                <p class="first">
                                                    <a
                                                        class="reference external"
                                                        href="http://codespeak.net/lxml/dev/lxmlhtml.html#running-html-doctests"
                                                        >Smart doctest
                                                        comparisons</a
                                                    >
                                                    (attribute-order-neutral
                                                    comparisons, with improved
                                                    diffs, and also whitespace
                                                    neutral, based loosely on
                                                    <a
                                                        class="reference external"
                                                        href="http://formencode.org/module-formencode.doctest_xml_compare.html"
                                                        >formencode.doctest_xml_compare</a
                                                    >). Inside your doctest
                                                    choose XML parsing with
                                                    <tt class="docutils literal"
                                                        ><span class="pre"
                                                            >from</span
                                                        >
                                                        <span class="pre"
                                                            >lxml</span
                                                        >
                                                        <span class="pre"
                                                            >import</span
                                                        >&nbsp;&nbsp;
                                                        <span class="pre"
                                                            >usedoctest</span
                                                        ></tt
                                                    >
                                                    or HTML parsing with
                                                    <tt class="docutils literal"
                                                        ><span class="pre"
                                                            >from</span
                                                        >
                                                        <span class="pre"
                                                            >lxml.html</span
                                                        >
                                                        <span class="pre"
                                                            >import</span
                                                        >&nbsp;&nbsp;
                                                        <span class="pre"
                                                            >usedoctest</span
                                                        ></tt
                                                    >. I consider the import
                                                    trick My Worst Monkeypatch
                                                    Ever, but it kind of reads
                                                    nicely. For testing it is
                                                    very nice.
                                                </p>
                                            </li>
                                            <li>
                                                <p class="first">
                                                    <a
                                                        class="reference external"
                                                        href="http://codespeak.net/lxml/dev/lxmlhtml.html#cleaning-up-html"
                                                        >Cleaning code</a
                                                    >, to avoid XSS attacks, in
                                                    <tt class="docutils literal"
                                                        ><span class="pre"
                                                            >lxml.html.clean</span
                                                        ></tt
                                                    >. This is still pretty
                                                    messy, because there&#8217;s
                                                    lots of little things you
                                                    may or may not want to
                                                    protect against. E.g., I
                                                    think I can mostly clean out
                                                    style tags (at least of
                                                    Javascript), but some people
                                                    might want to remove all
                                                    style. So there&#8217;s an
                                                    option. There&#8217;s lots
                                                    of options. Too many.
                                                </p>
                                            </li>
                                            <li>
                                                <p class="first">
                                                    With the cleaning code
                                                    there&#8217;s
                                                    <a
                                                        class="reference external"
                                                        href="http://codespeak.net/lxml/dev/lxmlhtml.html#wordwrap"
                                                        >word-wrapping code</a
                                                    >
                                                    and
                                                    <a
                                                        class="reference external"
                                                        href="http://codespeak.net/lxml/dev/lxmlhtml.html#autolink"
                                                        >autolinking code</a
                                                    >. I think of these as
                                                    clean-up-people&#8217;s-scrappy-HTML
                                                    tools. Also important for
                                                    putting untrusted HTML in a
                                                    new context.
                                                </p>
                                            </li>
                                            <li>
                                                <p class="first">
                                                    I rewrote
                                                    <a
                                                        class="reference external"
                                                        href="http://formencode.org/htmlfill.html"
                                                        >htmlfill</a
                                                    >
                                                    in
                                                    <tt class="docutils literal"
                                                        ><span class="pre"
                                                            >lxml.html.formfill</span
                                                        ></tt
                                                    >. It&#8217;s a bit simpler,
                                                    and keeps error messages
                                                    separate from actual value
                                                    filling. They were really
                                                    only combined because I
                                                    didn&#8217;t want to do two
                                                    passes with
                                                    <tt class="docutils literal"
                                                        ><span class="pre"
                                                            >HTMLParser</span
                                                        ></tt
                                                    >
                                                    for the two steps, but that
                                                    doesn&#8217;t matter when
                                                    you load the document into
                                                    memory. I also stopped using
                                                    markup like
                                                    <tt class="docutils literal"
                                                        ><span class="pre"
                                                            >&lt;form:error&gt;</span
                                                        ></tt
                                                    >
                                                    for placing error messages;
                                                    it&#8217;s all automatic
                                                    now, which I suppose is both
                                                    good and bad.
                                                </p>
                                            </li>
                                            <li>
                                                <p class="first">
                                                    <em>After</em> I wrote
                                                    <tt class="docutils literal"
                                                        ><span class="pre"
                                                            >lxml.html.formfill</span
                                                        ></tt
                                                    >
                                                    I got it into my head to
                                                    make smarter forms more
                                                    natively. So now you can do:
                                                </p>
                                                <div
                                                    class="dean_ch"
                                                    style="white-space: wrap"
                                                >
                                                    <br />
                                                    &gt;&gt;&gt;
                                                    <span class="kw1"
                                                        >from</span
                                                    >
                                                    lxml.<span class="me1"
                                                        >html</span
                                                    >
                                                    <span class="kw1"
                                                        >import</span
                                                    >
                                                    parse<br />
                                                    &gt;&gt;&gt; page =
                                                    parse<span class="br0"
                                                        >&#40;</span
                                                    ><span class="st0"
                                                        >'http://tripsweb.rtachicago.com/'</span
                                                    ><span class="br0"
                                                        >&#41;</span
                                                    >.<span class="me1"
                                                        >getroot</span
                                                    ><span class="br0"
                                                        >&#40;</span
                                                    ><span class="br0"
                                                        >&#41;</span
                                                    ><br />
                                                    &gt;&gt;&gt; form =
                                                    page.<span class="me1"
                                                        >forms</span
                                                    ><span class="br0"
                                                        >&#91;</span
                                                    ><span class="nu0">0</span
                                                    ><span class="br0"
                                                        >&#93;</span
                                                    ><br />
                                                    &gt;&gt;&gt;
                                                    <span class="kw1"
                                                        >from</span
                                                    >
                                                    <span class="kw3"
                                                        >pprint</span
                                                    >
                                                    <span class="kw1"
                                                        >import</span
                                                    >
                                                    <span class="kw3"
                                                        >pprint</span
                                                    ><br />
                                                    &gt;&gt;&gt;
                                                    <span class="kw3"
                                                        >pprint</span
                                                    ><span class="br0"
                                                        >&#40;</span
                                                    >form.<span class="me1"
                                                        >form_values</span
                                                    ><span class="br0"
                                                        >&#40;</span
                                                    ><span class="br0"
                                                        >&#41;</span
                                                    ><span class="br0"
                                                        >&#41;</span
                                                    ><br />
                                                    <span class="br0"
                                                        >&#91;</span
                                                    ><span class="br0"
                                                        >&#40;</span
                                                    ><span class="st0"
                                                        >'action'</span
                                                    >,
                                                    <span class="st0"
                                                        >'entry'</span
                                                    ><span class="br0"
                                                        >&#41;</span
                                                    >,<br />
                                                    &nbsp;<span class="br0"
                                                        >&#40;</span
                                                    ><span class="st0"
                                                        >'resptype'</span
                                                    >,
                                                    <span class="st0">'U'</span
                                                    ><span class="br0"
                                                        >&#41;</span
                                                    >,<br />
                                                    &nbsp;<span class="br0"
                                                        >&#40;</span
                                                    ><span class="st0"
                                                        >'Arr'</span
                                                    >,
                                                    <span class="st0">'D'</span
                                                    ><span class="br0"
                                                        >&#41;</span
                                                    >,<br />
                                                    &nbsp;<span class="br0"
                                                        >&#40;</span
                                                    ><span class="st0"
                                                        >'f_month'</span
                                                    >,
                                                    <span class="st0">'09'</span
                                                    ><span class="br0"
                                                        >&#41;</span
                                                    >,<br />
                                                    &nbsp;<span class="br0"
                                                        >&#40;</span
                                                    ><span class="st0"
                                                        >'f_day'</span
                                                    >,
                                                    <span class="st0">'21'</span
                                                    ><span class="br0"
                                                        >&#41;</span
                                                    >,<br />
                                                    &nbsp;<span class="br0"
                                                        >&#40;</span
                                                    ><span class="st0"
                                                        >'f_year'</span
                                                    >,
                                                    <span class="st0"
                                                        >'2007'</span
                                                    ><span class="br0"
                                                        >&#41;</span
                                                    >,<br />
                                                    &nbsp;<span class="br0"
                                                        >&#40;</span
                                                    ><span class="st0"
                                                        >'f_hours'</span
                                                    >,
                                                    <span class="st0">'9'</span
                                                    ><span class="br0"
                                                        >&#41;</span
                                                    >,<br />
                                                    &nbsp;<span class="br0"
                                                        >&#40;</span
                                                    ><span class="st0"
                                                        >'f_minutes'</span
                                                    >,
                                                    <span class="st0">'30'</span
                                                    ><span class="br0"
                                                        >&#41;</span
                                                    >,<br />
                                                    &nbsp;<span class="br0"
                                                        >&#40;</span
                                                    ><span class="st0"
                                                        >'f_ampm'</span
                                                    >,
                                                    <span class="st0">'AM'</span
                                                    ><span class="br0"
                                                        >&#41;</span
                                                    >,<br />
                                                    &nbsp;<span class="br0"
                                                        >&#40;</span
                                                    ><span class="st0"
                                                        >'Atr'</span
                                                    >,
                                                    <span class="st0">'N'</span
                                                    ><span class="br0"
                                                        >&#41;</span
                                                    >,<br />
                                                    &nbsp;<span class="br0"
                                                        >&#40;</span
                                                    ><span class="st0"
                                                        >'walk'</span
                                                    >,
                                                    <span class="st0"
                                                        >'0.9999'</span
                                                    ><span class="br0"
                                                        >&#41;</span
                                                    >,<br />
                                                    &nbsp;<span class="br0"
                                                        >&#40;</span
                                                    ><span class="st0"
                                                        >'Min'</span
                                                    >,
                                                    <span class="st0">'T'</span
                                                    ><span class="br0"
                                                        >&#41;</span
                                                    >,<br />
                                                    &nbsp;<span class="br0"
                                                        >&#40;</span
                                                    ><span class="st0"
                                                        >'mode'</span
                                                    >,
                                                    <span class="st0">'A'</span
                                                    ><span class="br0"
                                                        >&#41;</span
                                                    ><span class="br0"
                                                        >&#93;</span
                                                    ><br />
                                                    &gt;&gt;&gt;
                                                    <span class="kw1">for</span>
                                                    key
                                                    <span class="kw1">in</span>
                                                    <span class="kw2"
                                                        >sorted</span
                                                    ><span class="br0"
                                                        >&#40;</span
                                                    >f.<span class="me1"
                                                        >fields</span
                                                    >.<span class="me1"
                                                        >keys</span
                                                    ><span class="br0"
                                                        >&#40;</span
                                                    ><span class="br0"
                                                        >&#41;</span
                                                    ><span class="br0"
                                                        >&#41;</span
                                                    >:<br />
                                                    ... &nbsp; &nbsp;
                                                    <span class="kw1"
                                                        >print</span
                                                    >
                                                    key<br />
                                                    <span class="kw2">None</span
                                                    ><br />
                                                    Arr<br />
                                                    Atr<br />
                                                    Dest<br />
                                                    Min<br />
                                                    Orig<br />
                                                    action<br />
                                                    dCity<br />
                                                    endpoint<br />
                                                    f_ampm<br />
                                                    f_day<br />
                                                    f_hours<br />
                                                    f_minutes<br />
                                                    f_month<br />
                                                    f_year<br />
                                                    mode<br />
                                                    oCity<br />
                                                    resptype<br />
                                                    startpoint<br />
                                                    walk<br />
                                                    &gt;&gt;&gt; f.<span
                                                        class="me1"
                                                        >fields</span
                                                    ><span class="br0"
                                                        >&#91;</span
                                                    ><span class="st0"
                                                        >'Orig'</span
                                                    ><span class="br0"
                                                        >&#93;</span
                                                    >
                                                    =
                                                    <span class="st0"
                                                        >'1500 W Leland'</span
                                                    ><br />
                                                    &gt;&gt;&gt; f.<span
                                                        class="me1"
                                                        >fields</span
                                                    ><span class="br0"
                                                        >&#91;</span
                                                    ><span class="st0"
                                                        >'Dest'</span
                                                    ><span class="br0"
                                                        >&#93;</span
                                                    >
                                                    =
                                                    <span class="st0"
                                                        >'LINCOLN PARK
                                                        ZOO'</span
                                                    ><br />
                                                    &gt;&gt;&gt;
                                                    <span class="kw1"
                                                        >from</span
                                                    >
                                                    lxml.<span class="me1"
                                                        >html</span
                                                    >
                                                    <span class="kw1"
                                                        >import</span
                                                    >
                                                    submit_form<span class="br0"
                                                        >&#40;</span
                                                    ><span class="br0"
                                                        >&#41;</span
                                                    ><br />
                                                    &gt;&gt;&gt; result =
                                                    parse<span class="br0"
                                                        >&#40;</span
                                                    >submit_form<span
                                                        class="br0"
                                                        >&#40;</span
                                                    >f<span class="br0"
                                                        >&#41;</span
                                                    ><span class="br0"
                                                        >&#41;</span
                                                    >.<span class="me1"
                                                        >getroot</span
                                                    ><span class="br0"
                                                        >&#40;</span
                                                    ><span class="br0"
                                                        >&#41;</span
                                                    ><br />
                                                    &nbsp;
                                                </div>
                                                <p>
                                                    From there I&#8217;d have to
                                                    actually scrape the results
                                                    to figure out what the best
                                                    trip was, which isn&#8217;t
                                                    as easy.
                                                </p>
                                            </li>
                                            <li>
                                                <p class="first">
                                                    HTML diffing and something
                                                    like
                                                    <tt class="docutils literal"
                                                        ><span class="pre"
                                                            >svn</span
                                                        >
                                                        <span class="pre"
                                                            >blame</span
                                                        ></tt
                                                    >
                                                    for a series of documents,
                                                    in
                                                    <tt class="docutils literal"
                                                        ><span class="pre"
                                                            >lxml.html.diff</span
                                                        ></tt
                                                    >. Someone noted a
                                                    similarity between htmldiff
                                                    and
                                                    <a
                                                        class="reference external"
                                                        href="http://code.google.com/p/templatemaker/"
                                                        >templatemaker</a
                                                    >, and they are conceptually
                                                    similar, but with very
                                                    different purposes. htmldiff
                                                    goes to great trouble to
                                                    <em>ignore</em> markup and
                                                    focus only on changes to
                                                    textual content. As such it
                                                    is great for a history page.
                                                    <tt class="docutils literal"
                                                        ><span class="pre"
                                                            >templatemaker</span
                                                        ></tt
                                                    >
                                                    focuses on the dissection of
                                                    computer-generated HTML and
                                                    extracting its
                                                    human-generated components.
                                                    Templatemaker is focused on
                                                    screen scraping. It might be
                                                    handy in that form example
                                                    above&#8230;
                                                </p>
                                            </li>
                                            <li>
                                                <p class="first">
                                                    There&#8217;s also a fairly
                                                    complete implementation of
                                                    <a
                                                        class="reference external"
                                                        href="http://codespeak.net/lxml/dev/cssselect.html"
                                                        >CSS 3 selectors</a
                                                    >. It would be interesting
                                                    to mix this with
                                                    <a
                                                        class="reference external"
                                                        href="http://code.google.com/p/cssutils/"
                                                        >cssutils</a
                                                    >.
                                                </p>
                                                <p>
                                                    Though
                                                    <a
                                                        class="reference external"
                                                        href="http://alex.dojotoolkit.org/?p=625"
                                                        >some people
                                                        aren&#8217;t so
                                                        enthusiastic about CSS
                                                        namespaces</a
                                                    >
                                                    (and I can&#8217;t really
                                                    blame him), conveniently
                                                    this CSS 3 feature makes CSS
                                                    selectors applicable to all
                                                    XML. I don&#8217;t know if
                                                    anyone is actually going to
                                                    use them instead of XPath on
                                                    non-HTML documents, but you
                                                    <em>could</em>. Because the
                                                    implementation just compiles
                                                    CSS to XPath, you could
                                                    potentially use this module
                                                    with other XML libraries
                                                    that know XPath. Of which I
                                                    only actually know
                                                    <a
                                                        class="reference external"
                                                        href="http://uche.ogbuji.net/tech/4suite/amara/"
                                                        >one</a
                                                    >
                                                    (or
                                                    <cite
                                                        >two
                                                        &lt;http://genshi.edgewall.org/&gt;</cite
                                                    >?) &#8212; though compiling
                                                    CSS to XPath, then having
                                                    XPath parsed and interpreted
                                                    in Python, is probably not a
                                                    good idea. But if you are so
                                                    inclined, there&#8217;s also
                                                    a parser in there you could
                                                    use.
                                                </p>
                                            </li>
                                            <li>
                                                <p class="first">
                                                    lxml and
                                                    <a
                                                        class="reference external"
                                                        href="http://www.crummy.com/software/BeautifulSoup/"
                                                        >BeautifulSoup</a
                                                    >
                                                    are no longer exclusive
                                                    choices:
                                                    <tt class="docutils literal"
                                                        ><span class="pre"
                                                            >lxml.html.ElementSoup.parse()</span
                                                        ></tt
                                                    >
                                                    can parse pages with
                                                    BeautifulSoup into lxml data
                                                    structures. While the native
                                                    lxml/libxml2 HTML parser
                                                    works on pretty bad HTML,
                                                    BeautifulSoup works on
                                                    <em>really</em> bad HTML. It
                                                    would be nice to have
                                                    something similar with
                                                    <a
                                                        class="reference external"
                                                        href="http://code.google.com/p/html5lib/"
                                                        >html5lib</a
                                                    >.
                                                </p>
                                            </li>
                                        </ul>
                                    </div>
                                    <!-- <rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
			xmlns:dc="http://purl.org/dc/elements/1.1/"
			xmlns:trackback="http://madskills.com/public/xml/rss/module/trackback/">
		<rdf:Description rdf:about="https://ianbicking.org/2007/09/24/lxmlhtml/"
    dc:identifier="https://ianbicking.org/2007/09/24/lxmlhtml/"
    dc:title="lxml.html"
    trackback:ping="https://ianbicking.org/2007/09/24/lxmlhtml/trackback/" />
</rdf:RDF> -->
                                </div>
                                <!-- END POST-ENTRY -->
                            </div>
                            <!-- END POST-CONTENT  -->
                        </div>
                        <!-- END-CONTAINER -->
                        <div class="post-header">
                            <h3 class="post-date">2007 09 24</h3>
                            <p class="post-categories">
                                <a
                                    href="../../category/html/index.html"
                                    title="View all posts in HTML"
                                    rel="category tag"
                                    >HTML</a
                                ><br /><a
                                    href="../../category/python/index.html"
                                    title="View all posts in Python"
                                    rel="category tag"
                                    >Python</a
                                >
                            </p>
                            <p class="post-comments">
                                <a
                                    href="24/lxmlhtml/index.html#comments"
                                    title="Comment on lxml.html"
                                    >Comments (8)</a
                                >
                            </p>
                            <p class="post-permalink">
                                <a
                                    href="24/lxmlhtml/index.html"
                                    title="Permalink to lxml.html"
                                    rel="permalink"
                                    >Permalink</a
                                >
                            </p>
                        </div>
                        <!-- END POST-FOOTER -->
                    </div>
                    <!-- END POST -->

                    <div id="post-31" class="post">
                        <div class="post-container">
                            <div class="post-content">
                                <h2 class="post-title">
                                    <a
                                        href="16/2-python-environment-experiments/index.html"
                                        title="Permalink to 2 Python Environment Experiments"
                                        rel="bookmark"
                                        >2 Python Environment Experiments</a
                                    >
                                </h2>
                                <div class="post-entry">
                                    <div class="document">
                                        <p>
                                            two experiments in the Python
                                            environment. The first is
                                            <a
                                                class="reference external"
                                                href="http://pypi.python.org/pypi/virtualenv"
                                                >virtualenv</a
                                            >, which is a rethinking of
                                            <a
                                                class="reference external"
                                                href="http://peak.telecommunity.com/DevCenter/EasyInstall#creating-a-virtual-python"
                                                >virtual-python.py</a
                                            >, and my attempt to move away from
                                            <a
                                                class="reference external"
                                                href="http://pypi.python.org/pypi/workingenv.py"
                                                >workingenv</a
                                            >. It works mostly like
                                            <tt class="docutils literal"
                                                ><span class="pre"
                                                    >virtual-python.py</span
                                                ></tt
                                            >, and on systems where it works
                                            (not Windows, nor Framework Mac
                                            Python) I think it works
                                            considerably better than workingenv.
                                            No more
                                            <tt class="docutils literal"
                                                ><span class="pre">not</span>
                                                <span class="pre">a</span>
                                                <span class="pre"
                                                    >setuptools'</span
                                                >
                                                <span class="pre"
                                                    >site.py</span
                                                ></tt
                                            >, in particular. The basic
                                            technique is that it creates/copies
                                            a new
                                            <tt class="docutils literal"
                                                ><span class="pre"
                                                    >python</span
                                                ></tt
                                            >
                                            executable, and anything that uses
                                            that executable (including a script
                                            that references that executable with
                                            <tt class="docutils literal"
                                                ><span class="pre">#!</span></tt
                                            >) will use that environment.
                                        </p>
                                        <p>
                                            On the systems where it
                                            doesn&#8217;t work, I&#8217;m not
                                            quite sure what to do. The problem
                                            with the Mac is that
                                            <tt class="docutils literal"
                                                ><span class="pre"
                                                    >sys.prefix</span
                                                ></tt
                                            >
                                            is not determined by the location of
                                            the
                                            <tt class="docutils literal"
                                                ><span class="pre"
                                                    >python</span
                                                ></tt
                                            >
                                            executable, it&#8217;s hard-coded in
                                            some fashion. I
                                            <a
                                                class="reference external"
                                                href="http://mail.python.org/pipermail/distutils-sig/2007-September/008265.html"
                                                >asked about it on
                                                distutils-sig</a
                                            >
                                            and got some response, but
                                            haven&#8217;t figured out any
                                            solution yet.
                                        </p>
                                        <p>
                                            On Windows similarly
                                            <tt class="docutils literal"
                                                ><span class="pre"
                                                    >sys.prefix</span
                                                ></tt
                                            >
                                            is not determined by the executable
                                            location. What it&#8217;s determined
                                            by there I don&#8217;t know &#8212;
                                            the location of
                                            <tt class="docutils literal"
                                                ><span class="pre"
                                                    >python25.dll</span
                                                ></tt
                                            >, something in the registry? If I
                                            could figure it out, perhaps this
                                            could work there too &#8212; the
                                            existance of symlinks isn&#8217;t as
                                            important as it was with
                                            <tt class="docutils literal"
                                                ><span class="pre"
                                                    >virtual-python.py</span
                                                ></tt
                                            >.
                                        </p>
                                        <p>
                                            If I can get these figured out, I
                                            think this will be a much happier
                                            experience than
                                            <tt class="docutils literal"
                                                ><span class="pre"
                                                    >workingenv</span
                                                ></tt
                                            >, and a somewhat friendlier
                                            experience than
                                            <tt class="docutils literal"
                                                ><span class="pre"
                                                    >virtual-python.py</span
                                                ></tt
                                            >. On non-Mac posix systems it works
                                            well right now.
                                        </p>
                                        <p>
                                            The other experiment is in
                                            <a
                                                class="reference external"
                                                href="https://www.knowledgetap.com/hg/buildutils"
                                                >buildutils</a
                                            >
                                            (downloadable with
                                            <a
                                                class="reference external"
                                                href="http://www.selenic.com/mercurial/wiki/"
                                                >Mercurial</a
                                            >): a new command
                                            <tt class="docutils literal"
                                                ><span class="pre">python</span>
                                                <span class="pre"
                                                    >setup.py</span
                                                >
                                                <span class="pre"
                                                    >bundle</span
                                                ></tt
                                            >, run in the application package
                                            you want to bundle. This creates a
                                            directory with all the dependencies
                                            of the application, and scripts that
                                            load up the appropriate
                                            dependencies. You can then ship the
                                            entire thing in a zip file as a
                                            runnable application that
                                            doesn&#8217;t require any
                                            installation except for unpacking.
                                        </p>
                                        <p>
                                            Actually creating the bundle can be
                                            a little finicky, because
                                            <tt class="docutils literal"
                                                ><span class="pre"
                                                    >easy_install</span
                                                ></tt
                                            >
                                            has a tendency to prefer things on
                                            the local machine even though it
                                            shouldn&#8217;t. Probably it would
                                            be best to run this inside a
                                            virtualenv; when you are done you
                                            can also feel more confident that
                                            you&#8217;ve actually included all
                                            the dependencies (if you use
                                            <tt class="docutils literal"
                                                ><span class="pre"
                                                    >--no-site-packages</span
                                                ></tt
                                            >
                                            when creating the virtualenv).
                                        </p>
                                        <p>
                                            Anyway, while both of these are a
                                            little incomplete I&#8217;m feeling
                                            optimistic about them, and I&#8217;m
                                            hoping intrepid souls can give
                                            feedback on how they work.
                                        </p>
                                        <p>
                                            <strong>Update:</strong> virtualenv
                                            0.8.2 is out, featuring Better Error
                                            Messages (and nothing else). Still
                                            doesn&#8217;t work on Mac Framework
                                            Pythons, or Windows. You&#8217;ll
                                            have to keep using workingenv there
                                            &#8212; but patches extremely
                                            welcome! Contact me if you are
                                            interested in supporting these
                                            platforms. It will involve some
                                            digging, but maybe we can just do
                                            the digging once for everyone.
                                        </p>
                                        <p>
                                            <strong>Update 2:</strong>
                                            virtualenv 0.8.3 is out, featuring
                                            Windows!
                                        </p>
                                    </div>
                                    <!-- <rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
			xmlns:dc="http://purl.org/dc/elements/1.1/"
			xmlns:trackback="http://madskills.com/public/xml/rss/module/trackback/">
		<rdf:Description rdf:about="https://ianbicking.org/2007/09/16/2-python-environment-experiments/"
    dc:identifier="https://ianbicking.org/2007/09/16/2-python-environment-experiments/"
    dc:title="2 Python Environment Experiments"
    trackback:ping="https://ianbicking.org/2007/09/16/2-python-environment-experiments/trackback/" />
</rdf:RDF> -->
                                </div>
                                <!-- END POST-ENTRY -->
                            </div>
                            <!-- END POST-CONTENT  -->
                        </div>
                        <!-- END-CONTAINER -->
                        <div class="post-header">
                            <h3 class="post-date">2007 09 16</h3>
                            <p class="post-categories">
                                <a
                                    href="../../category/programming/index.html"
                                    title="View all posts in Programming"
                                    rel="category tag"
                                    >Programming</a
                                ><br /><a
                                    href="../../category/python/index.html"
                                    title="View all posts in Python"
                                    rel="category tag"
                                    >Python</a
                                >
                            </p>
                            <p class="post-comments">
                                <a
                                    href="16/2-python-environment-experiments/index.html#comments"
                                    title="Comment on 2 Python Environment Experiments"
                                    >Comments (10)</a
                                >
                            </p>
                            <p class="post-permalink">
                                <a
                                    href="16/2-python-environment-experiments/index.html"
                                    title="Permalink to 2 Python Environment Experiments"
                                    rel="permalink"
                                    >Permalink</a
                                >
                            </p>
                        </div>
                        <!-- END POST-FOOTER -->
                    </div>
                    <!-- END POST -->

                    <div id="post-30" class="post">
                        <div class="post-container">
                            <div class="post-content">
                                <h2 class="post-title">
                                    <a
                                        href="12/flatatompub/index.html"
                                        title="Permalink to FlatAtompub"
                                        rel="bookmark"
                                        >FlatAtompub</a
                                    >
                                </h2>
                                <div class="post-entry">
                                    <div class="document">
                                        <p>
                                            A little while ago I decided to whip
                                            up a small
                                            <a
                                                class="reference external"
                                                href="http://atompub.org/"
                                                >Atompub</a
                                            >
                                            server to get my head around the
                                            Atom Publishing Protocol. I called
                                            it FlatAtomPub because it was just
                                            storing stuff in flat files.
                                            I&#8217;m not committing to that
                                            name. It was also a chance to kick
                                            the tires on
                                            <a
                                                class="reference external"
                                                href="http://pythonpaste.org/webob/"
                                                >WebOb</a
                                            >.
                                        </p>
                                        <p>What I take out of the process:</p>
                                        <ul class="simple">
                                            <li>
                                                <a
                                                    class="reference external"
                                                    href="http://www.tbray.org/ape/"
                                                    >APE</a
                                                >
                                                was very handy. I lazily did
                                                very little unit testing,
                                                instead relying on APE to do the
                                                work for me. This seemed to work
                                                quite well. It is fun doing test
                                                driven development when someone
                                                else develops the tests.
                                            </li>
                                            <li>
                                                I wrote a
                                                <a
                                                    class="reference external"
                                                    href="http://svn.pythonpaste.org/Paste/apps/FlatAtomPub/trunk/flatatompub/dec.py"
                                                    >little decorator</a
                                                >
                                                that serves as a kind of
                                                framework. It worked pretty
                                                well, I think. This might be the
                                                prototype of what the
                                                <tt class="docutils literal"
                                                    ><span class="pre"
                                                        >PylonsController.__call__</span
                                                    ></tt
                                                >
                                                method does in some WebOb-using
                                                future.
                                            </li>
                                            <li>
                                                Stuff like conditional requests
                                                and responses are mostly
                                                implemented in WebOb itself,
                                                which works well. HTTP is clear
                                                about how conditional requests
                                                work, so if you can just setup
                                                the basic info (ETag,
                                                Last-Modified) you can let the
                                                library handle the rest. I could
                                                probably save a little work by
                                                paying closer attention to ETags
                                                and Last-Modified up-front, but
                                                since there&#8217;s no
                                                complicated template rendering
                                                the work saved doesn&#8217;t
                                                seem significant.
                                            </li>
                                            <li>
                                                The
                                                <a
                                                    class="reference external"
                                                    href="https://svn.openplans.org/svn/TaggerClient/trunk/taggerclient/atom.py"
                                                    >atom library</a
                                                >
                                                removed most concern about the
                                                XML itself.
                                            </li>
                                            <li>
                                                I don&#8217;t know what to with
                                                <a
                                                    class="reference external"
                                                    href="http://bitworking.org/projects/atom/draft-ietf-atompub-protocol-17.html#rfc.section.8.3.3"
                                                    >collections</a
                                                >. I guess I could allow
                                                multiple collections via
                                                configuration. If the store
                                                wasn&#8217;t a dumb store (e.g.,
                                                it was plugged directly into a
                                                blog, it didn&#8217;t just
                                                passively store things) it would
                                                be clearer what a collection
                                                would mean. As it is,
                                                collections are just a way of
                                                aggregating multiple Atompub
                                                servers into one service
                                                document, which doesn&#8217;t
                                                seem very useful.
                                            </li>
                                            <li>
                                                Handling links and slugs is kind
                                                of annoying. I took the lazy way
                                                out for this, using relative
                                                links and treating the slug and
                                                link as the same thing. This
                                                isn&#8217;t a good long-term
                                                solution, as it can mess things
                                                up if you start handing entries
                                                around, or worse move a server,
                                                and I don&#8217;t even set
                                                <tt class="docutils literal"
                                                    ><span class="pre"
                                                        >xml:base</span
                                                    ></tt
                                                >
                                                on elements. In theory it should
                                                all work, but it makes the
                                                client do more effort than I
                                                would like. On the other hand, I
                                                suppose a client
                                                <em>should</em> do that extra
                                                work anyway, as it
                                                shouldn&#8217;t rely on the
                                                server not being lazy. So maybe
                                                I&#8217;m better off sticking
                                                with a lazy solution, and making
                                                sure I work with non-lazy
                                                clients.
                                            </li>
                                            <li>
                                                I considered pluggable storage,
                                                but ultimately decided it
                                                didn&#8217;t matter. Storing
                                                entries in files is fine; files
                                                are easy, and they work. I put
                                                in pluggable indexing instead.
                                                <a
                                                    class="reference external"
                                                    href="http://trac.defuze.org/wiki/amplee"
                                                    >Amplee</a
                                                >
                                                is another Python Atompub
                                                server, and I looked at
                                                <a
                                                    class="reference external"
                                                    href="https://svn.defuze.org/oss/amplee/amplee/storage/"
                                                    >Amplee storage backends</a
                                                >. It&#8217;s kind of clever to
                                                have things like svn or S3
                                                backends. But I&#8217;m not sure
                                                what use I&#8217;d actually
                                                <em>do</em> with that.
                                            </li>
                                            <li>
                                                I haven&#8217;t yet considered
                                                transactions; if something fails
                                                part way through, stuff will be
                                                inconsistent. Admittedly this is
                                                where files make things harder.
                                                Probably a clear way to re-index
                                                would be useful too, as at least
                                                there&#8217;s a clear location
                                                for the canonical data (the
                                                files).
                                            </li>
                                            <li>
                                                The dependencies are still a
                                                little tangled; even though the
                                                library doesn&#8217;t
                                                <em>use</em> a great deal of
                                                stuff, there&#8217;s enough
                                                pieces that some people have had
                                                a hard time getting it setup.
                                            </li>
                                            <li>
                                                Ignoring authentication is nice.
                                                I should see what it takes to
                                                setup some authentication, but
                                                implementing it directly is out
                                                of scope for FlatAtomPub.
                                            </li>
                                        </ul>
                                        <p>
                                            Interested people can look at the
                                            <a
                                                class="reference external"
                                                href="http://svn.pythonpaste.org/Paste/apps/FlatAtomPub/trunk"
                                                >svn repository</a
                                            >.
                                        </p>
                                        <p>
                                            This makes me wonder how hard WebDAV
                                            would be&#8230;
                                        </p>
                                    </div>
                                    <!-- <rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
			xmlns:dc="http://purl.org/dc/elements/1.1/"
			xmlns:trackback="http://madskills.com/public/xml/rss/module/trackback/">
		<rdf:Description rdf:about="https://ianbicking.org/2007/09/12/flatatompub/"
    dc:identifier="https://ianbicking.org/2007/09/12/flatatompub/"
    dc:title="FlatAtompub"
    trackback:ping="https://ianbicking.org/2007/09/12/flatatompub/trackback/" />
</rdf:RDF> -->
                                </div>
                                <!-- END POST-ENTRY -->
                            </div>
                            <!-- END POST-CONTENT  -->
                        </div>
                        <!-- END-CONTAINER -->
                        <div class="post-header">
                            <h3 class="post-date">2007 09 12</h3>
                            <p class="post-categories">
                                <a
                                    href="../../category/programming/index.html"
                                    title="View all posts in Programming"
                                    rel="category tag"
                                    >Programming</a
                                ><br /><a
                                    href="../../category/python/index.html"
                                    title="View all posts in Python"
                                    rel="category tag"
                                    >Python</a
                                ><br /><a
                                    href="../../category/web/index.html"
                                    title="View all posts in Web"
                                    rel="category tag"
                                    >Web</a
                                >
                            </p>
                            <p class="post-comments">
                                <a
                                    href="12/flatatompub/index.html#comments"
                                    title="Comment on FlatAtompub"
                                    >Comments (4)</a
                                >
                            </p>
                            <p class="post-permalink">
                                <a
                                    href="12/flatatompub/index.html"
                                    title="Permalink to FlatAtompub"
                                    rel="permalink"
                                    >Permalink</a
                                >
                            </p>
                        </div>
                        <!-- END POST-FOOTER -->
                    </div>
                    <!-- END POST -->

                    <div id="post-29" class="post">
                        <div class="post-container">
                            <div class="post-content">
                                <h2 class="post-title">
                                    <a
                                        href="12/re-raising-exceptions/index.html"
                                        title="Permalink to Re-raising Exceptions"
                                        rel="bookmark"
                                        >Re-raising Exceptions</a
                                    >
                                </h2>
                                <div class="post-entry">
                                    <div class="document">
                                        <p>
                                            After reading Chris
                                            McDonough&#8217;s
                                            <a
                                                class="reference external"
                                                href="http://plope.com/Members/chrism/now_not_to_write_python"
                                                >What Not To Do When Writing
                                                Python Software</a
                                            >, it occurred to me that many
                                            people don&#8217;t actually know
                                            <em>how</em> to properly re-raise
                                            exceptions. So a little
                                            mini-tutorial for Python
                                            programmers, about exceptions&#8230;
                                        </p>
                                        <p>First, this is bad:</p>
                                        <div
                                            class="dean_ch"
                                            style="white-space: wrap"
                                        >
                                            <br />
                                            <span class="kw1">try</span>:<br />
                                            &nbsp; &nbsp; some_code<span
                                                class="br0"
                                                >&#40;</span
                                            ><span class="br0">&#41;</span
                                            ><br />
                                            <span class="kw1">except</span
                                            >:<br />
                                            &nbsp; &nbsp; revert_stuff<span
                                                class="br0"
                                                >&#40;</span
                                            ><span class="br0">&#41;</span
                                            ><br />
                                            &nbsp; &nbsp;
                                            <span class="kw1">raise</span>
                                            <span class="kw2">Exception</span
                                            ><span class="br0">&#40;</span
                                            ><span class="st0"
                                                >&quot;some_code
                                                failed!&quot;</span
                                            ><span class="br0">&#41;</span
                                            ><br />
                                            &nbsp;
                                        </div>
                                        <p>
                                            It is bad because all the
                                            information about how
                                            <tt class="docutils literal"
                                                ><span class="pre"
                                                    >some_code()</span
                                                ></tt
                                            >
                                            failed is lost. The traceback, the
                                            error message itself. Maybe it was
                                            an expected error, maybe it
                                            wasn&#8217;t.
                                        </p>
                                        <p>
                                            Here&#8217;s a modest improvement
                                            (but still not very good):
                                        </p>
                                        <div
                                            class="dean_ch"
                                            style="white-space: wrap"
                                        >
                                            <br />
                                            <span class="kw1">try</span>:<br />
                                            &nbsp; &nbsp; some_code<span
                                                class="br0"
                                                >&#40;</span
                                            ><span class="br0">&#41;</span
                                            ><br />
                                            <span class="kw1">except</span
                                            >:<br />
                                            &nbsp; &nbsp;
                                            <span class="kw1">import</span>
                                            <span class="kw3">traceback</span
                                            ><br />
                                            &nbsp; &nbsp;
                                            <span class="kw3">traceback</span
                                            >.<span class="me1">print_exc</span
                                            ><span class="br0">&#40;</span
                                            ><span class="br0">&#41;</span
                                            ><br />
                                            &nbsp; &nbsp; revert_stuff<span
                                                class="br0"
                                                >&#40;</span
                                            ><span class="br0">&#41;</span
                                            ><br />
                                            &nbsp; &nbsp;
                                            <span class="kw1">raise</span>
                                            <span class="kw2">Exception</span
                                            ><span class="br0">&#40;</span
                                            ><span class="st0"
                                                >&quot;some_code
                                                failed!&quot;</span
                                            ><span class="br0">&#41;</span
                                            ><br />
                                            &nbsp;
                                        </div>
                                        <p>
                                            <tt class="docutils literal"
                                                ><span class="pre"
                                                    >traceback.print_exc()</span
                                                ></tt
                                            >
                                            prints the original traceback to
                                            stderr. Sometimes that&#8217;s the
                                            best you can do, because you really
                                            want to recover from an unexpected
                                            error. But if you aren&#8217;t
                                            recovering, <em>this</em> is what
                                            you should do:
                                        </p>
                                        <div
                                            class="dean_ch"
                                            style="white-space: wrap"
                                        >
                                            <br />
                                            <span class="kw1">try</span>:<br />
                                            &nbsp; &nbsp; some_code<span
                                                class="br0"
                                                >&#40;</span
                                            ><span class="br0">&#41;</span
                                            ><br />
                                            <span class="kw1">except</span
                                            >:<br />
                                            &nbsp; &nbsp; revert_stuff<span
                                                class="br0"
                                                >&#40;</span
                                            ><span class="br0">&#41;</span
                                            ><br />
                                            &nbsp; &nbsp;
                                            <span class="kw1">raise</span><br />
                                            &nbsp;
                                        </div>
                                        <p>
                                            Using
                                            <tt class="docutils literal"
                                                ><span class="pre"
                                                    >raise</span
                                                ></tt
                                            >
                                            with no arguments re-raises the last
                                            exception. Sometimes people give a
                                            blank
                                            <em
                                                >never use
                                                &#8220;except:&#8220;</em
                                            >
                                            statement, but this particular form
                                            (<tt class="docutils literal"
                                                ><span class="pre"
                                                    >except:</span
                                                ></tt
                                            >
                                            +
                                            <tt class="docutils literal"
                                                ><span class="pre"
                                                    >raise</span
                                                ></tt
                                            >) is okay.
                                        </p>
                                        <p>
                                            There&#8217;s another form of
                                            <tt class="docutils literal"
                                                ><span class="pre"
                                                    >raise</span
                                                ></tt
                                            >
                                            that not many people know about, but
                                            can also be handy. Like
                                            <tt class="docutils literal"
                                                ><span class="pre"
                                                    >raise</span
                                                ></tt
                                            >
                                            with no arguments, it can be used to
                                            keep the traceback:
                                        </p>
                                        <div
                                            class="dean_ch"
                                            style="white-space: wrap"
                                        >
                                            <br />
                                            <span class="kw1">try</span>:<br />
                                            &nbsp; &nbsp; some_code<span
                                                class="br0"
                                                >&#40;</span
                                            ><span class="br0">&#41;</span
                                            ><br />
                                            <span class="kw1">except</span
                                            >:<br />
                                            &nbsp; &nbsp;
                                            <span class="kw1">import</span>
                                            <span class="kw3">sys</span><br />
                                            &nbsp; &nbsp; exc_info =
                                            <span class="kw3">sys</span>.<span
                                                class="me1"
                                                >exc_info</span
                                            ><span class="br0">&#40;</span
                                            ><span class="br0">&#41;</span
                                            ><br />
                                            &nbsp; &nbsp; maybe_raise<span
                                                class="br0"
                                                >&#40;</span
                                            >exc_info<span class="br0"
                                                >&#41;</span
                                            ><br />
                                            <br />
                                            <span class="kw1">def</span>
                                            maybe_raise<span class="br0"
                                                >&#40;</span
                                            >exc_info<span class="br0"
                                                >&#41;</span
                                            >:<br />
                                            &nbsp; &nbsp;
                                            <span class="kw1">if</span>
                                            <span class="kw1">for</span> some
                                            reason this seems like it should be
                                            raised:<br />
                                            &nbsp; &nbsp; &nbsp; &nbsp;
                                            <span class="kw1">raise</span>
                                            exc_info<span class="br0"
                                                >&#91;</span
                                            ><span class="nu0">0</span
                                            ><span class="br0">&#93;</span>,
                                            exc_info<span class="br0"
                                                >&#91;</span
                                            ><span class="nu0">1</span
                                            ><span class="br0">&#93;</span>,
                                            exc_info<span class="br0"
                                                >&#91;</span
                                            ><span class="nu0">2</span
                                            ><span class="br0">&#93;</span
                                            ><br />
                                            &nbsp;
                                        </div>
                                        <p>
                                            This can be handy if you need to
                                            handle the exception in some
                                            different part of the code from
                                            where the exception happened. But
                                            usually it&#8217;s not that handy;
                                            it&#8217;s an obscure feature for a
                                            reason.
                                        </p>
                                        <p>
                                            Another case when people often
                                            clobber the traceback is when they
                                            want to add information to it, e.g.:
                                        </p>
                                        <div
                                            class="dean_ch"
                                            style="white-space: wrap"
                                        >
                                            <br />
                                            <span class="kw1">for</span> lineno,
                                            line <span class="kw1">in</span>
                                            <span class="kw2">enumerate</span
                                            ><span class="br0">&#40;</span
                                            ><span class="kw2">file</span
                                            ><span class="br0">&#41;</span
                                            >:<br />
                                            &nbsp; &nbsp;
                                            <span class="kw1">try</span>:<br />
                                            &nbsp; &nbsp; &nbsp; &nbsp;
                                            process_line<span class="br0"
                                                >&#40;</span
                                            >line<span class="br0">&#41;</span
                                            ><br />
                                            &nbsp; &nbsp;
                                            <span class="kw1">except</span>
                                            <span class="kw2">Exception</span>,
                                            exc:<br />
                                            &nbsp; &nbsp; &nbsp; &nbsp;
                                            <span class="kw1">raise</span>
                                            <span class="kw2">Exception</span
                                            ><span class="br0">&#40;</span
                                            ><span class="st0"
                                                >&quot;Error in line %s:
                                                %s&quot;</span
                                            >
                                            %
                                            <span class="br0">&#40;</span
                                            >lineno, exc<span class="br0"
                                                >&#41;</span
                                            ><span class="br0">&#41;</span
                                            ><br />
                                            &nbsp;
                                        </div>
                                        <p>
                                            You keep the error message here, but
                                            lose the traceback. There&#8217;s a
                                            couple ways to keep that traceback.
                                            One I sometimes use is to retain the
                                            exception, but change the message:
                                        </p>
                                        <div
                                            class="dean_ch"
                                            style="white-space: wrap"
                                        >
                                            <br />
                                            <span class="kw1">except</span>
                                            <span class="kw2">Exception</span>,
                                            exc:<br />
                                            &nbsp; &nbsp; args = exc.<span
                                                class="me1"
                                                >args</span
                                            ><br />
                                            &nbsp; &nbsp;
                                            <span class="kw1">if</span>
                                            <span class="kw1">not</span>
                                            args:<br />
                                            &nbsp; &nbsp; &nbsp; &nbsp; arg0 =
                                            <span class="st0">''</span><br />
                                            &nbsp; &nbsp;
                                            <span class="kw1">else</span>:<br />
                                            &nbsp; &nbsp; &nbsp; &nbsp; arg0 =
                                            args<span class="br0">&#91;</span
                                            ><span class="nu0">0</span
                                            ><span class="br0">&#93;</span
                                            ><br />
                                            &nbsp; &nbsp; arg0 +=
                                            <span class="st0"
                                                >' at line %s'</span
                                            >
                                            % lineno<br />
                                            &nbsp; &nbsp; exc.<span class="me1"
                                                >args</span
                                            >
                                            = arg0 + args<span class="br0"
                                                >&#91;</span
                                            ><span class="nu0">1</span>:<span
                                                class="br0"
                                                >&#93;</span
                                            ><br />
                                            &nbsp; &nbsp;
                                            <span class="kw1">raise</span><br />
                                            &nbsp;
                                        </div>
                                        <p>
                                            It&#8217;s a little awkward.
                                            Technically (though it&#8217;s
                                            deprecated) you can raise
                                            <em>anything</em> as an exception.
                                            If you use
                                            <tt class="docutils literal"
                                                ><span class="pre">except</span>
                                                <span class="pre"
                                                    >Exception:</span
                                                ></tt
                                            >
                                            you won&#8217;t catch things like
                                            string exceptions or other weird
                                            types. It&#8217;s up to you to
                                            decide if you care about these
                                            cases; I generally ignore them.
                                            It&#8217;s also possible that an
                                            exception won&#8217;t have
                                            <tt class="docutils literal"
                                                ><span class="pre"
                                                    >.args</span
                                                ></tt
                                            >, or the string message for the
                                            exception won&#8217;t be derived
                                            from those arguments, or that it
                                            will be formatted in a funny way<br />
                                            (<tt class="docutils literal"
                                                ><span class="pre"
                                                    >KeyError</span
                                                ></tt
                                            >
                                            formats its message differently, for
                                            instance). So this isn&#8217;t
                                            foolproof. To be a bit more robust,
                                            you can get the exception like this:
                                        </p>
                                        <div
                                            class="dean_ch"
                                            style="white-space: wrap"
                                        >
                                            <br />
                                            <span class="kw1">except</span
                                            >:<br />
                                            &nbsp; &nbsp; exc_class, exc, tb =
                                            <span class="kw3">sys</span>.<span
                                                class="me1"
                                                >exc_info</span
                                            ><span class="br0">&#40;</span
                                            ><span class="br0">&#41;</span
                                            ><br />
                                            &nbsp;
                                        </div>
                                        <p>
                                            <tt class="docutils literal"
                                                ><span class="pre"
                                                    >exc_class</span
                                                ></tt
                                            >
                                            will be a string, if someone does
                                            something like
                                            <tt class="docutils literal"
                                                ><span class="pre">raise</span>
                                                <span class="pre"
                                                    >&quot;not</span
                                                >
                                                <span class="pre"
                                                    >found&quot;</span
                                                ></tt
                                            >. There&#8217;s a reason why that
                                            style is deprecated. Anyway, if you
                                            really want to mess around with
                                            things, you can then do:
                                        </p>
                                        <div
                                            class="dean_ch"
                                            style="white-space: wrap"
                                        >
                                            <br />
                                            new_exc =
                                            <span class="kw2">Exception</span
                                            ><span class="br0">&#40;</span
                                            ><span class="st0"
                                                >&quot;Error in line %s:
                                                %s&quot;</span
                                            ><br />
                                            &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
                                            &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; %
                                            <span class="br0">&#40;</span
                                            >lineno, exc
                                            <span class="kw1">or</span>
                                            exc_class<span class="br0"
                                                >&#41;</span
                                            ><span class="br0">&#41;</span
                                            ><br />
                                            <span class="kw1">raise</span>
                                            new_exc.__class__, new_exc, tb<br />
                                            &nbsp;
                                        </div>
                                        <p>
                                            The confusing part is that
                                            you&#8217;ve changed the exception
                                            class around, but you have at least
                                            kept the traceback intact. It can
                                            look a little odd to see
                                            <tt class="docutils literal"
                                                ><span class="pre">raise</span>
                                                <span class="pre"
                                                    >ValueError(...)</span
                                                ></tt
                                            >
                                            in the traceback, and
                                            <tt class="docutils literal"
                                                ><span class="pre"
                                                    >Exception</span
                                                ></tt
                                            >
                                            in the error message.
                                        </p>
                                        <p>
                                            Anyway, a quick summary of proper
                                            ways to re-raise exceptions in
                                            Python. May your tracebacks prosper!
                                        </p>
                                        <p>
                                            <strong>Update:</strong> Kumar notes
                                            the problem of errors in your error
                                            handler. Things get more long
                                            winded, but here&#8217;s the
                                            simplest way I know of to deal with
                                            that:
                                        </p>
                                        <div
                                            class="dean_ch"
                                            style="white-space: wrap"
                                        >
                                            <br />
                                            <span class="kw1">try</span>:<br />
                                            &nbsp; &nbsp;
                                            <span class="kw3">code</span
                                            ><span class="br0">&#40;</span
                                            ><span class="br0">&#41;</span
                                            ><br />
                                            <span class="kw1">except</span
                                            >:<br />
                                            &nbsp; &nbsp; exc_info =
                                            <span class="kw3">sys</span>.<span
                                                class="me1"
                                                >exc_info</span
                                            ><span class="br0">&#40;</span
                                            ><span class="br0">&#41;</span
                                            ><br />
                                            &nbsp; &nbsp;
                                            <span class="kw1">try</span>:<br />
                                            &nbsp; &nbsp; &nbsp; &nbsp;
                                            revert_stuff<span class="br0"
                                                >&#40;</span
                                            ><span class="br0">&#41;</span
                                            ><br />
                                            &nbsp; &nbsp;
                                            <span class="kw1">except</span
                                            >:<br />
                                            &nbsp; &nbsp; &nbsp; &nbsp;
                                            <span class="co1"
                                                ># If this happens, it clobbers
                                                exc_info, which is why we
                                                had</span
                                            ><br />
                                            &nbsp; &nbsp; &nbsp; &nbsp;
                                            <span class="co1"
                                                ># to save it above</span
                                            ><br />
                                            &nbsp; &nbsp; &nbsp; &nbsp;
                                            <span class="kw1">import</span>
                                            <span class="kw3">traceback</span
                                            ><br />
                                            &nbsp; &nbsp; &nbsp; &nbsp;
                                            <span class="kw1">print</span>
                                            &gt;&gt;
                                            <span class="kw3">sys</span>.<span
                                                class="me1"
                                                >stderr</span
                                            >,
                                            <span class="st0"
                                                >&quot;Error in
                                                revert_stuff():&quot;</span
                                            ><br />
                                            &nbsp; &nbsp; &nbsp; &nbsp;
                                            <span class="kw3">traceback</span
                                            >.<span class="me1">print_exc</span
                                            ><span class="br0">&#40;</span
                                            ><span class="br0">&#41;</span
                                            ><br />
                                            &nbsp; &nbsp;
                                            <span class="kw1">raise</span>
                                            exc_info<span class="br0"
                                                >&#91;</span
                                            ><span class="nu0">0</span
                                            ><span class="br0">&#93;</span>,
                                            exc_info<span class="br0"
                                                >&#91;</span
                                            ><span class="nu0">1</span
                                            ><span class="br0">&#93;</span>,
                                            exc_info<span class="br0"
                                                >&#91;</span
                                            ><span class="nu0">2</span
                                            ><span class="br0">&#93;</span
                                            ><br />
                                            &nbsp;
                                        </div>
                                    </div>
                                    <!-- <rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
			xmlns:dc="http://purl.org/dc/elements/1.1/"
			xmlns:trackback="http://madskills.com/public/xml/rss/module/trackback/">
		<rdf:Description rdf:about="https://ianbicking.org/2007/09/12/re-raising-exceptions/"
    dc:identifier="https://ianbicking.org/2007/09/12/re-raising-exceptions/"
    dc:title="Re-raising Exceptions"
    trackback:ping="https://ianbicking.org/2007/09/12/re-raising-exceptions/trackback/" />
</rdf:RDF> -->
                                </div>
                                <!-- END POST-ENTRY -->
                            </div>
                            <!-- END POST-CONTENT  -->
                        </div>
                        <!-- END-CONTAINER -->
                        <div class="post-header">
                            <h3 class="post-date">2007 09 12</h3>
                            <p class="post-categories">
                                <a
                                    href="../../category/python/index.html"
                                    title="View all posts in Python"
                                    rel="category tag"
                                    >Python</a
                                >
                            </p>
                            <p class="post-comments">
                                <a
                                    href="12/re-raising-exceptions/index.html#comments"
                                    title="Comment on Re-raising Exceptions"
                                    >Comments (23)</a
                                >
                            </p>
                            <p class="post-permalink">
                                <a
                                    href="12/re-raising-exceptions/index.html"
                                    title="Permalink to Re-raising Exceptions"
                                    rel="permalink"
                                    >Permalink</a
                                >
                            </p>
                        </div>
                        <!-- END POST-FOOTER -->
                    </div>
                    <!-- END POST -->

                    <div id="post-28" class="post">
                        <div class="post-container">
                            <div class="post-content">
                                <h2 class="post-title">
                                    <a
                                        href="11/9112007/index.html"
                                        title="Permalink to 9/11/2007"
                                        rel="bookmark"
                                        >9/11/2007</a
                                    >
                                </h2>
                                <div class="post-entry">
                                    <div class="document">
                                        <p>
                                            So, today is 9/11. I almost missed
                                            it. It&#8217;s not like it catches
                                            you by surprise, you&#8217;re not
                                            going to forget the date. But
                                            it&#8217;s just been slipping by for
                                            a few years now without much notice.
                                        </p>
                                        <p>
                                            As an event it is still very
                                            <em>important</em>. History flowed
                                            from that day. But it doesn&#8217;t
                                            mean anything anymore.
                                        </p>
                                        <p>
                                            Remember how everyone was saying, on
                                            those days after 9/11/2001, that
                                            they thought about life differently,
                                            about the things that really
                                            mattered and the things that
                                            didn&#8217;t? A couple years ago I
                                            felt frustrated by how quickly that
                                            seemed to disappear, how quickly
                                            genuine sentiment turned into empty
                                            rhetoric. A few years ago that
                                            transition was frustrating, now the
                                            whole thing seems laughable. The
                                            death of irony? No&#8230; after 9/11
                                            our modern cynicism was down but it
                                            wasn&#8217;t out. It came back
                                            fighting, and a National Sense Of
                                            Grief was no match.
                                        </p>
                                        <p>
                                            Whatever. I&#8217;m tired of it
                                            anyway. You win Whatever,
                                            you&#8217;re the champ.
                                        </p>
                                    </div>
                                    <!-- <rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
			xmlns:dc="http://purl.org/dc/elements/1.1/"
			xmlns:trackback="http://madskills.com/public/xml/rss/module/trackback/">
		<rdf:Description rdf:about="https://ianbicking.org/2007/09/11/9112007/"
    dc:identifier="https://ianbicking.org/2007/09/11/9112007/"
    dc:title="9/11/2007"
    trackback:ping="https://ianbicking.org/2007/09/11/9112007/trackback/" />
</rdf:RDF> -->
                                </div>
                                <!-- END POST-ENTRY -->
                            </div>
                            <!-- END POST-CONTENT  -->
                        </div>
                        <!-- END-CONTAINER -->
                        <div class="post-header">
                            <h3 class="post-date">2007 09 11</h3>
                            <p class="post-categories">
                                <a
                                    href="../../category/notech/index.html"
                                    title="View all posts in Non-technical"
                                    rel="category tag"
                                    >Non-technical</a
                                ><br /><a
                                    href="../../category/politics/index.html"
                                    title="View all posts in Politics"
                                    rel="category tag"
                                    >Politics</a
                                >
                            </p>
                            <p class="post-comments">
                                <a
                                    href="11/9112007/index.html#comments"
                                    title="Comment on 9/11/2007"
                                    >Comments (9)</a
                                >
                            </p>
                            <p class="post-permalink">
                                <a
                                    href="11/9112007/index.html"
                                    title="Permalink to 9/11/2007"
                                    rel="permalink"
                                    >Permalink</a
                                >
                            </p>
                        </div>
                        <!-- END POST-FOOTER -->
                    </div>
                    <!-- END POST -->

                    <div class="navigation">
                        <div class="alignleft"></div>
                        <div class="alignright"></div>
                    </div>
                    <!-- END NAVIGATION -->
                </div>
                <!-- END CONTENT -->
            </div>
            <!-- END CONTAINER  -->

            <div id="sidebar">
                <ul>
                    <li id="home-link">
                        <h2>
                            <a
                                href="../../index.html"
                                title="Ian Bicking: a blog"
                                >Home</a
                            >
                        </h2>
                    </li>
                    <li id="text-315934862" class="widget widget_text">
                        <h2 class="widgettitle">About</h2>
                        <div class="textwidget">
                            Ian is a developer with Mozilla,
                            <a href="http://ianbicking.appspot.com/projects"
                                >Python open source developer</a
                            >, actually uses
                            <a
                                href="https://plus.google.com/u/0/104537541227697934010/posts"
                                >Google+</a
                            >
                            more than
                            <a href="http://twitter.com/ianbicking">twitter</a>
                            and lives in Minneapolis.<br />
                            <span
                                class="gittip-0001"
                                gittip-username="ianbicking"
                            ></span>
                            <script
                                id="gittip-0001"
                                src="https://www.gittip.com/assets/widgets/0001.js"
                            ></script>
                        </div>
                    </li>
                    <li id="text-315934863" class="widget widget_text">
                        <div class="textwidget">
                            <!-- <script type="text/javascript">mbgc='f5f5f5';ww='160';mbc='cecece';bbc='3F79D5';bmobc='3b71c6';bbgc='4889F0';bmoc='3F79D5';bfc='FFFFFF';bmofc='ffffff';tlc='cecece';tc='6a6a6a';nc='6a6a6a';bc='6a6a6a';l='y';fs='16';fsb='13';bw='100';ff='4';lu='6a6a6a';pc='4889F0';wh='340';b='s'; pid='104537541227697934010';</script><script type="text/javascript" src="http://widgetsplus.com/google_plus_widget.js"></script> -->
                        </div>
                    </li>
                    <li id="archives-2" class="widget widget_archive">
                        <h2 class="widgettitle">Archives</h2>
                        <ul>
                            <li>
                                <a
                                    href="../../2012/10/index.html"
                                    title="October 2012"
                                    >October 2012</a
                                >
                            </li>
                            <li>
                                <a
                                    href="../../2012/02/index.html"
                                    title="February 2012"
                                    >February 2012</a
                                >
                            </li>
                            <li>
                                <a
                                    href="../../2011/04/index.html"
                                    title="April 2011"
                                    >April 2011</a
                                >
                            </li>
                            <li>
                                <a
                                    href="../../2011/03/index.html"
                                    title="March 2011"
                                    >March 2011</a
                                >
                            </li>
                            <li>
                                <a
                                    href="../../2010/09/index.html"
                                    title="September 2010"
                                    >September 2010</a
                                >
                            </li>
                            <li>
                                <a
                                    href="../../2010/08/index.html"
                                    title="August 2010"
                                    >August 2010</a
                                >
                            </li>
                            <li>
                                <a
                                    href="../../2010/05/index.html"
                                    title="May 2010"
                                    >May 2010</a
                                >
                            </li>
                            <li>
                                <a
                                    href="../../2010/04/index.html"
                                    title="April 2010"
                                    >April 2010</a
                                >
                            </li>
                            <li>
                                <a
                                    href="../../2010/03/index.html"
                                    title="March 2010"
                                    >March 2010</a
                                >
                            </li>
                            <li>
                                <a
                                    href="../../2010/02/index.html"
                                    title="February 2010"
                                    >February 2010</a
                                >
                            </li>
                            <li>
                                <a
                                    href="../../2010/01/index.html"
                                    title="January 2010"
                                    >January 2010</a
                                >
                            </li>
                            <li>
                                <a
                                    href="../../2009/09/index.html"
                                    title="September 2009"
                                    >September 2009</a
                                >
                            </li>
                            <li>
                                <a
                                    href="../../2009/05/index.html"
                                    title="May 2009"
                                    >May 2009</a
                                >
                            </li>
                            <li>
                                <a
                                    href="../../2009/04/index.html"
                                    title="April 2009"
                                    >April 2009</a
                                >
                            </li>
                            <li>
                                <a
                                    href="../../2009/01/index.html"
                                    title="January 2009"
                                    >January 2009</a
                                >
                            </li>
                            <li>
                                <a
                                    href="../../2008/12/index.html"
                                    title="December 2008"
                                    >December 2008</a
                                >
                            </li>
                            <li>
                                <a
                                    href="../../2008/11/index.html"
                                    title="November 2008"
                                    >November 2008</a
                                >
                            </li>
                            <li>
                                <a
                                    href="../../2008/10/index.html"
                                    title="October 2008"
                                    >October 2008</a
                                >
                            </li>
                            <li>
                                <a
                                    href="../../2008/09/index.html"
                                    title="September 2008"
                                    >September 2008</a
                                >
                            </li>
                            <li>
                                <a
                                    href="../../2008/08/index.html"
                                    title="August 2008"
                                    >August 2008</a
                                >
                            </li>
                            <li>
                                <a
                                    href="../../2008/07/index.html"
                                    title="July 2008"
                                    >July 2008</a
                                >
                            </li>
                            <li>
                                <a
                                    href="../../2008/06/index.html"
                                    title="June 2008"
                                    >June 2008</a
                                >
                            </li>
                            <li>
                                <a
                                    href="../../2008/05/index.html"
                                    title="May 2008"
                                    >May 2008</a
                                >
                            </li>
                            <li>
                                <a
                                    href="../../2008/04/index.html"
                                    title="April 2008"
                                    >April 2008</a
                                >
                            </li>
                            <li>
                                <a
                                    href="../../2008/03/index.html"
                                    title="March 2008"
                                    >March 2008</a
                                >
                            </li>
                            <li>
                                <a
                                    href="../../2008/02/index.html"
                                    title="February 2008"
                                    >February 2008</a
                                >
                            </li>
                            <li>
                                <a
                                    href="../../2008/01/index.html"
                                    title="January 2008"
                                    >January 2008</a
                                >
                            </li>
                            <li>
                                <a href="../11/index.html" title="November 2007"
                                    >November 2007</a
                                >
                            </li>
                            <li>
                                <a href="../10/index.html" title="October 2007"
                                    >October 2007</a
                                >
                            </li>
                            <li>
                                <a href="index.html" title="September 2007"
                                    >September 2007</a
                                >
                            </li>
                            <li>
                                <a href="../08/index.html" title="August 2007"
                                    >August 2007</a
                                >
                            </li>
                            <li>
                                <a href="../07/index.html" title="July 2007"
                                    >July 2007</a
                                >
                            </li>
                        </ul>
                    </li>
                    <li id="text-315934861" class="widget widget_text">
                        <div class="textwidget">
                            <a href="../../archive/index.html"
                                >The Older Archives</a
                            >
                        </div>
                    </li>
                    <li id="categories-1" class="widget widget_categories">
                        <h2 class="widgettitle">Categories</h2>
                        <ul>
                            <li class="cat-item cat-item-12">
                                <a
                                    href="../../category/erlang/index.html"
                                    title="View all posts filed under Erlang"
                                    >Erlang</a
                                >
                            </li>
                            <li class="cat-item cat-item-11">
                                <a
                                    href="../../category/html/index.html"
                                    title="View all posts filed under HTML"
                                    >HTML</a
                                >
                            </li>
                            <li class="cat-item cat-item-8">
                                <a
                                    href="../../category/javascript/index.html"
                                    title="View all posts filed under Javascript"
                                    >Javascript</a
                                >
                            </li>
                            <li class="cat-item cat-item-15">
                                <a
                                    href="../../category/licensing/index.html"
                                    title="View all posts filed under Licensing"
                                    >Licensing</a
                                >
                            </li>
                            <li class="cat-item cat-item-18">
                                <a
                                    href="../../category/mozilla/index.html"
                                    title="View all posts filed under Mozilla"
                                    >Mozilla</a
                                >
                            </li>
                            <li class="cat-item cat-item-5">
                                <a
                                    href="../../category/notech/index.html"
                                    title="View all posts filed under Non-technical"
                                    >Non-technical</a
                                >
                            </li>
                            <li class="cat-item cat-item-6">
                                <a
                                    href="../../category/olpc/index.html"
                                    title="View all posts filed under OLPC"
                                    >OLPC</a
                                >
                            </li>
                            <li class="cat-item cat-item-14">
                                <a
                                    href="../../category/packaging/index.html"
                                    title="View all posts filed under Packaging"
                                    >Packaging</a
                                >
                            </li>
                            <li class="cat-item cat-item-4">
                                <a
                                    href="../../category/politics/index.html"
                                    title="View all posts filed under Politics"
                                    >Politics</a
                                >
                            </li>
                            <li class="cat-item cat-item-3">
                                <a
                                    href="../../category/programming/index.html"
                                    title="View all posts filed under Programming"
                                    >Programming</a
                                >
                            </li>
                            <li class="cat-item cat-item-7">
                                <a
                                    href="../../category/python/index.html"
                                    title="View all posts filed under Python"
                                    >Python</a
                                >
                            </li>
                            <li class="cat-item cat-item-10">
                                <a
                                    href="../../category/ruby/index.html"
                                    title="View all posts filed under Ruby"
                                    >Ruby</a
                                >
                            </li>
                            <li class="cat-item cat-item-19">
                                <a
                                    href="../../category/security/index.html"
                                    title="View all posts filed under Security"
                                    >Security</a
                                >
                            </li>
                            <li class="cat-item cat-item-16">
                                <a
                                    href="../../category/silverlining.1"
                                    title="View all posts filed under Silver Lining"
                                    >Silver Lining</a
                                >
                            </li>
                            <li class="cat-item cat-item-20">
                                <a
                                    href="../../category/programming/testing/index.html"
                                    title="View all posts filed under Testing"
                                    >Testing</a
                                >
                            </li>
                            <li class="cat-item cat-item-9">
                                <a
                                    href="../../category/web/index.html"
                                    title="View all posts filed under Web"
                                    >Web</a
                                >
                            </li>
                            <li class="cat-item cat-item-13">
                                <a
                                    href="../../category/zopeplone/index.html"
                                    title="View all posts filed under Zope/Plone"
                                    >Zope/Plone</a
                                >
                            </li>
                        </ul>
                    </li>
                    <li id="search-2" class="widget widget_search">
                        <form
                            id="searchform"
                            method="get"
                            action="../../index.html"
                        >
                            <div>
                                <input
                                    id="s"
                                    name="s"
                                    type="text"
                                    value=""
                                    tabindex="1"
                                    size="10"
                                />
                                <input
                                    id="searchsubmit"
                                    name="searchsubmit"
                                    type="submit"
                                    value="Find"
                                    tabindex="2"
                                />
                            </div>
                        </form>
                    </li>
                    <li
                        id="recent-posts-2"
                        class="widget widget_recent_entries"
                    >
                        <h2 class="widgettitle">Recent Posts</h2>
                        <ul>
                            <li>
                                <a
                                    href="../../index.html?p=291"
                                    title="Why doctest.js is better than Python&#8217;s doctest"
                                    >Why doctest.js is better than
                                    Python&#8217;s doctest</a
                                >
                            </li>
                            <li>
                                <a
                                    href="../../index.html?p=283"
                                    title="Python Application Package"
                                    >Python Application Package</a
                                >
                            </li>
                            <li>
                                <a
                                    href="../../index.html?p=277"
                                    title="Git-as-sync, not source-control-as-deployment"
                                    >Git-as-sync, not
                                    source-control-as-deployment</a
                                >
                            </li>
                            <li>
                                <a
                                    href="../../index.html?p=253"
                                    title="My Unsolicited Advice For PyPy"
                                    >My Unsolicited Advice For PyPy</a
                                >
                            </li>
                            <li>
                                <a
                                    href="../../index.html?p=250"
                                    title="A Python Web Application Package and Format (we should make one)"
                                    >A Python Web Application Package and Format
                                    (we should make one)</a
                                >
                            </li>
                        </ul>
                    </li>
                    <li
                        id="recent-comments-2"
                        class="widget widget_recent_comments"
                    >
                        <h2 class="widgettitle">Recent Comments</h2>
                        <ul id="recentcomments">
                            <li class="recentcomments">
                                <a
                                    href="http://www.mirsa.com.tr"
                                    rel="external nofollow"
                                    class="url"
                                    >havalandırma</a
                                >
                                on
                                <a
                                    href="../../2012/10/02/why-doctest-js-is-better-than-pythons-doctest/comment-page-1/index.html#comment-228633"
                                    >Why doctest.js is better than
                                    Python&#8217;s doctest</a
                                >
                            </li>
                            <li class="recentcomments">
                                <a
                                    href="http://redealmeidense.com.br/portalx/modules/"
                                    rel="external nofollow"
                                    class="url"
                                    >this website</a
                                >
                                on
                                <a
                                    href="../../2012/10/02/why-doctest-js-is-better-than-pythons-doctest/comment-page-1/index.html#comment-196267"
                                    >Why doctest.js is better than
                                    Python&#8217;s doctest</a
                                >
                            </li>
                            <li class="recentcomments">
                                Eric Pierce on
                                <a
                                    href="../../2012/10/02/why-doctest-js-is-better-than-pythons-doctest/comment-page-1/index.html#comment-195322"
                                    >Why doctest.js is better than
                                    Python&#8217;s doctest</a
                                >
                            </li>
                            <li class="recentcomments">
                                Paul Brian on
                                <a
                                    href="../../2012/10/02/why-doctest-js-is-better-than-pythons-doctest/comment-page-1/index.html#comment-195321"
                                    >Why doctest.js is better than
                                    Python&#8217;s doctest</a
                                >
                            </li>
                            <li class="recentcomments">
                                <a
                                    href="http://benjiyork.com"
                                    rel="external nofollow"
                                    class="url"
                                    >Benji York</a
                                >
                                on
                                <a
                                    href="../../2012/10/02/why-doctest-js-is-better-than-pythons-doctest/comment-page-1/index.html#comment-195320"
                                    >Why doctest.js is better than
                                    Python&#8217;s doctest</a
                                >
                            </li>
                        </ul>
                    </li>
                </ul>
            </div>

            <div id="footer">
                <p>
                    &copy; 2013 Ian Bicking<!--
Does this commenting make me evil?
			|
			Thanks, <a href="http://wordpress.org/" title="WordPress">WordPress</a>
			|
			<a href="http://www.plaintxt.org/themes/barthelme/" title="Barthelme for WordPress" rel="follow">Barthelme</a> theme by <a href="http://scottwallick.com/" title="scottwallick.com" rel="follow">Scott</a>
			| <!-- The following is a link to the theme author's sponsor. Please consider its smallness and that Scott was nice enough to make this theme publically available. -->
                    Sponsor:
                    <a
                        href="http://www.active-sandals.com/womreefsan.html"
                        title="Support: Reef Sandals"
                        >Reef Sandals</a
                    >
                    | Valid
                    <a
                        href="http://validator.w3.org/check?uri=http://blog.ianbicking.org&amp;outline=1&amp;verbose=1"
                        title="Valid XHTML 1.0 Strict"
                        rel="nofollow"
                        >XHTML</a
                    >
                    &amp;
                    <a
                        href="http://jigsaw.w3.org/css-validator/validator?uri=https://ianbicking.org/wp-content/themes/Barthelme-ianb/style.css&amp;profile=css2&amp;warning=no"
                        title="Valid CSS"
                        rel="nofollow"
                        >CSS</a
                    >
                    | --> RSS:
                    <a
                        href="../../feed/rss/index.html"
                        title="Ian Bicking: a blog RSS 2.0 (XML) Feed"
                        rel="alternate"
                        type="application/rss+xml"
                        >Posts</a
                    >
                    &amp;
                    <a
                        href="../../comments/feed/index.html"
                        title="Ian Bicking: a blog Comments RSS 2.0 (XML) Feed"
                        rel="alternate"
                        type="application/rss+xml"
                        >Comments</a
                    >
                </p>
            </div>
        </div>
        <!-- END WRAPPER -->

        <!-- Somehow 37 queries occured in 1.089 seconds. Magic! -->
        <!-- The "Barthelme" theme copyright (c) 2006 Scott Allan Wallick - http://www.plaintxt.org/themes/ -->

        <!-- Google Analytics -->
        <script
            src="http://www.google-analytics.com/urchin.js"
            type="text/javascript"
        ></script>
        <script type="text/javascript">
            _uacct = "UA-2442258-1";
            urchinTracker();
        </script>
    </body>
</html>
