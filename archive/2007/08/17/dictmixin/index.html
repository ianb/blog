<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<!-- MOBIFY - DO NOT ALTER - PASTE IMMEDIATELY AFTER OPENING HEAD TAG -->
<script type="text/javascript">/*<![CDATA[*/(function(a){function b(a,b){if(+a)return~a||(d.cookie=h+"=; path=/");j=d.createElement(e),k=d.getElementsByTagName(e)[0],j.src=a,b&&(j.onload=j.onerror=b),k.parentNode.insertBefore(j,k)}function c(){n.api||b(l.shift()||-1,c)}if(this.Mobify)return;var d=document,e="script",f="mobify",g="."+f+".com/",h=f+"-path",i=g+"un"+f+".js",j,k,l=[!1,1],m,n=this.Mobify={points:[+(new Date)],tagVersion:[6,0]},o=/(; |#|&|^)mobify-path=([^&;]*)/g.exec(location.hash+"; "+d.cookie);o?(m=o[2])&&!+(m=sessionStorage[h]||m)&&(l=[!0,"//preview"+g+escape(m)]):(l=a()||l,l[0]&&l.push("//cdn"+i,"//files01"+i)),l.shift()?(d.write('<plaintext style="display:none;">'),setTimeout(c)):b(l[0])})(function(){if(/ip(hone|od)|android.*(mobile)|blackberry.*applewebkit/i.test(navigator.userAgent)){return[1,"//cdn.mobify.com/sites/ians-blog/production/mobify.js"]}})/*]]>*/</script>
<!-- END MOBIFY -->
	<title>Ian Bicking: a blog   ::  DictMixin</title>
	<meta http-equiv="content-type" content="text/html; charset=UTF-8" />
	<meta name="generator" content="WordPress 3.4.2" /><!-- LEAVE FOR STATS -->
	<meta name="description" content="" />
	<link rel="stylesheet" title="plaintxtSimpler" href="../../../../wp-content/themes/Barthelme-ianb/style.css" type="text/css" media="all" />
	<link rel="start" href="../../../../index.html" title="Ian Bicking: a blog" />
	<link rel="alternate" type="application/atom+xml" title="Ian Bicking: a blog Atom Feed" href="../../../../feed/atom/index.html" />
	<link rel="alternate" type="application/rss+xml" title="Ian Bicking: a blog RSS 2.0 Feed" href="../../../../feed/rss/index.html" />
	<link rel="alternate" type="application/rss+xml" title="Ian Bicking: a blog Comments RSS 2.0 Feed" href="../../../../comments/feed/index.html" />
	<link rel="alternate" type="application/rdf+xml" title="Ian Bicking: a blog RSS 1.0" href="../../../../feed/rdf/index.html" />
	<link rel="alternate" type="text/xml" title="Ian Bicking: a blog RSS 0.92 Feed" href="../../../../feed/rss/index.html" />
	<link rel="pingback" href="../../../../xmlrpc.php" />
	<link rel="openid.server" href="http://www.myopenid.com/server" />
	<link rel="openid.delegate" href="http://ianb.myopenid.com" />
        <link rel="me" type="text/html" href="http://www.google.com/profiles/ianbicking"/>
		<link rel='archives' title='October 2012' href='../../../../2012/10/index.html' />
	<link rel='archives' title='February 2012' href='../../../../2012/02/index.html' />
	<link rel='archives' title='April 2011' href='../../../../2011/04/index.html' />
	<link rel='archives' title='March 2011' href='../../../../2011/03/index.html' />
	<link rel='archives' title='September 2010' href='../../../../2010/09/index.html' />
	<link rel='archives' title='August 2010' href='../../../../2010/08/index.html' />
	<link rel='archives' title='May 2010' href='../../../../2010/05/index.html' />
	<link rel='archives' title='April 2010' href='../../../../2010/04/index.html' />
	<link rel='archives' title='March 2010' href='../../../../2010/03/index.html' />
	<link rel='archives' title='February 2010' href='../../../../2010/02/index.html' />
	<link rel='archives' title='January 2010' href='../../../../2010/01/index.html' />
	<link rel='archives' title='September 2009' href='../../../../2009/09/index.html' />
	<link rel='archives' title='May 2009' href='../../../../2009/05/index.html' />
	<link rel='archives' title='April 2009' href='../../../../2009/04/index.html' />
	<link rel='archives' title='January 2009' href='../../../../2009/01/index.html' />
	<link rel='archives' title='December 2008' href='../../../../2008/12/index.html' />
	<link rel='archives' title='November 2008' href='../../../../2008/11/index.html' />
	<link rel='archives' title='October 2008' href='../../../../2008/10/index.html' />
	<link rel='archives' title='September 2008' href='../../../../2008/09/index.html' />
	<link rel='archives' title='August 2008' href='../../../../2008/08/index.html' />
	<link rel='archives' title='July 2008' href='../../../../2008/07/index.html' />
	<link rel='archives' title='June 2008' href='../../../../2008/06/index.html' />
	<link rel='archives' title='May 2008' href='../../../../2008/05/index.html' />
	<link rel='archives' title='April 2008' href='../../../../2008/04/index.html' />
	<link rel='archives' title='March 2008' href='../../../../2008/03/index.html' />
	<link rel='archives' title='February 2008' href='../../../../2008/02/index.html' />
	<link rel='archives' title='January 2008' href='../../../../2008/01/index.html' />
	<link rel='archives' title='November 2007' href='../../../11/index.html' />
	<link rel='archives' title='October 2007' href='../../../10/index.html' />
	<link rel='archives' title='September 2007' href='../../../09/index.html' />
	<link rel='archives' title='August 2007' href='../../index.html' />
	<link rel='archives' title='July 2007' href='../../../07/index.html' />
	<link rel="alternate" type="application/rss+xml" title="Ian Bicking: a blog &raquo; DictMixin Comments Feed" href="http://blog.ianbicking.org/2007/08/17/dictmixin/feed/" />
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="../../../../xmlrpc.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="../../../../wp-includes/wlwmanifest.xml" /> 
<link rel='prev' title='Reflection and Description Of Meaning' href='../../14/reflection-and-description-of-meaning/index.html' />
<link rel='next' title='WebOb' href='../../18/webob/index.html' />
<meta name="generator" content="WordPress 3.4.2" />
<link rel='canonical' href='index.html' />
<link rel='shortlink' href='http://blog.ianbicking.org/?p=24' />
<link rel="stylesheet" href="../../../../wp-content/plugins/source-code-syntax-highlighting-plugin-for-wordpress/geshi.css"  type="text/css" />	<style type="text/css">.recentcomments a{display:inline !important;padding:0 !important;margin:0 !important;}</style>
        <style type="text/css" media="all">
/*<![CDATA[*/
body { font-size: 100%; }
body { font-family: tahoma, geneva, sans-serif; }
div.post-header, h2.post-title, p.post-date-single, h2.post-title-single, div.post-entry h1, div.post-entry h2, div.post-entry h3, div.post-entry h4, div.post-entry h5, div.post-entry h6, div.post-entry blockquote, div.post-footer, h3#comment-count, h4#comment-header, div#comments ol li p.comment-metadata, h4#respond { font-family: verdana, geneva, sans-serif; }
div.post-entry p { text-align: left; }
div#wrapper { width: 100%; }

/*]]>*/
</style>
</head>
<body>

<div id="wrapper">

	<div id="header" onclick="location.href='http://blog.ianbicking.org/';" style="cursor:pointer;">
		<h1 id="title"><a href="../../../../index.html" title="Ian Bicking: a blog">Ian Bicking: a blog</a></h1>
		<p id="description"></p>
	</div>
<!-- WP Theme Credits -->
<div style="display: none;">We can answer on question <a href="http://www.olnevhost.net/vps-hosting.html">what is VPS</a>? and
what is <a href="http://www.olnevhost.net/dedicated-servers.html"><strong>cheap dedicated servers</strong></a>?</div>
<!-- END HEADER -->
<div id="container">
	<div id="content" class="widecolumn">


		<div id="post-24" class="post single-post">
			<p class="post-date-single">{ 2007 08 17 }</p>
			<h2 class="post-title-single">DictMixin</h2>
			<div class="post-entry">
				<div class="document">
<p>Quite some time ago I gave a little presentation on <a class="reference external" href="http://python.org/doc/current/lib/module-UserDict.html">DictMixin</a> at <a class="reference external" href="http://chipy.org">ChiPy</a>.  If you haven&#8217;t used DictMixin before, it&#8217;s a class that implements all the derivative methods of dictionaries so you only have to implement the most minimal set: <tt class="docutils literal"><span class="pre">__getitem__</span></tt>, <tt class="docutils literal"><span class="pre">__setitem__</span></tt>, <tt class="docutils literal"><span class="pre">__delitem__</span></tt>, and <tt class="docutils literal"><span class="pre">keys</span></tt>.  It&#8217;s a lot better than subclassing <tt class="docutils literal"><span class="pre">dict</span></tt> directly, as you have to implement a lot more, and <tt class="docutils literal"><span class="pre">dict</span></tt> implies a specific kind of storage.  With DictMixin you can get the information from anywhere.</p>
<p>I thought of a couple examples, and wrote some <a class="reference external" href="http://python.org/doc/current/lib/module-doctest.html">doctests</a> for them; I thought satisfying the doctests would itself be the presentation. I&#8217;m not sure how it worked; it was a fairly experienced crowd, but the switch from code to test can be disorienting.</p>
<p>One of the examples I used was a filesystem access layer. Representing a filesystem as a dictionary is nothing new, but the simplicity of the representation worked well.  Here&#8217;s how it works:</p>
<ul class="simple">
<li>An <tt class="docutils literal"><span class="pre">FSDict</span></tt> represents one directory.</li>
<li>The keys are the filenames in the directory.</li>
<li>The values are the contents of the files (strings).</li>
<li>When there is a subdirectory, it is another FSDict instance.</li>
<li>When you assign a dictionary-like object to a key, it creates a   FSDict from that object.</li>
</ul>
<p>Dictionaries have lots of methods, like <tt class="docutils literal"><span class="pre">items()</span></tt>, <tt class="docutils literal"><span class="pre">update()</span></tt>, etc.  But using DictMixin you just implement the four methods.  First, the setup:</p>
<div class="dean_ch" style="white-space: wrap;"><br />
<span class="kw1">class</span> FSDict<span class="br0">&#40;</span>DictMixin<span class="br0">&#41;</span>:<br />
&nbsp; &nbsp; <span class="kw1">def</span> <span class="kw4">__init__</span><span class="br0">&#40;</span><span class="kw2">self</span>, path<span class="br0">&#41;</span>:<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw2">self</span>.<span class="me1">path</span> = path<br />
&nbsp;</div>
<p><em>Creation</em> of a dictionary is not part of the dictionary interface. This seems a little strange at first, but the <tt class="docutils literal"><span class="pre">dict</span></tt> <em>class</em> interface isn&#8217;t the same as the dictionary <em>instance</em> interface.  So <tt class="docutils literal"><span class="pre">FSDict.__init__</span></tt> doesn&#8217;t bear any particular relation to <tt class="docutils literal"><span class="pre">dict.__init__</span></tt>.</p>
<p>Now the other methods&#8230; in each case, strings and dictionaries (files and directories) are treated differently.</p>
<div class="dean_ch" style="white-space: wrap;"><br />
<span class="kw1">def</span> <span class="kw4">__getitem__</span><span class="br0">&#40;</span><span class="kw2">self</span>, item<span class="br0">&#41;</span>:<br />
&nbsp; &nbsp; fn = <span class="kw3">os</span>.<span class="me1">path</span>.<span class="me1">join</span><span class="br0">&#40;</span><span class="kw2">self</span>.<span class="me1">path</span>, item<span class="br0">&#41;</span><br />
&nbsp; &nbsp; <span class="kw1">if</span> <span class="kw1">not</span> <span class="kw3">os</span>.<span class="me1">path</span>.<span class="me1">exists</span><span class="br0">&#40;</span>fn<span class="br0">&#41;</span>:<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">raise</span> <span class="kw2">KeyError</span><span class="br0">&#40;</span><span class="st0">&quot;File %s does not exist&quot;</span> % fn<span class="br0">&#41;</span><br />
&nbsp; &nbsp; <span class="kw1">if</span> <span class="kw3">os</span>.<span class="me1">path</span>.<span class="me1">isdir</span><span class="br0">&#40;</span>fn<span class="br0">&#41;</span>:<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">return</span> <span class="kw2">self</span>.__class__<span class="br0">&#40;</span>fn<span class="br0">&#41;</span><br />
&nbsp; &nbsp; f = <span class="kw2">open</span><span class="br0">&#40;</span>fn, <span class="st0">'rb'</span><span class="br0">&#41;</span><br />
&nbsp; &nbsp; c = f.<span class="me1">read</span><span class="br0">&#40;</span><span class="br0">&#41;</span><br />
&nbsp; &nbsp; f.<span class="me1">close</span><span class="br0">&#40;</span><span class="br0">&#41;</span><br />
&nbsp; &nbsp; <span class="kw1">return</span> c<br />
&nbsp;</div>
<p>Note the use of <tt class="docutils literal"><span class="pre">self.__class__(fn)</span></tt> instead of <tt class="docutils literal"><span class="pre">FSDict(fn)</span></tt>. This makes the class subclassable if you retain the <tt class="docutils literal"><span class="pre">FSDict.__init__</span></tt> signature.  This way subclasses will create new instances using the subclass.  Note also that <tt class="docutils literal"><span class="pre">KeyError</span></tt> is part of the dictionary interface (an important part!), so we can&#8217;t raise <tt class="docutils literal"><span class="pre">IOError</span></tt>.</p>
<p>Now, assignment&#8230;</p>
<div class="dean_ch" style="white-space: wrap;"><br />
<span class="kw1">def</span> <span class="kw4">__setitem__</span><span class="br0">&#40;</span><span class="kw2">self</span>, item, value<span class="br0">&#41;</span>:<br />
&nbsp; &nbsp; <span class="kw1">if</span> item <span class="kw1">in</span> <span class="kw2">self</span>:<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">del</span> <span class="kw2">self</span><span class="br0">&#91;</span>item<span class="br0">&#93;</span><br />
&nbsp; &nbsp; fn = <span class="kw3">os</span>.<span class="me1">path</span>.<span class="me1">join</span><span class="br0">&#40;</span><span class="kw2">self</span>.<span class="me1">path</span>, item<span class="br0">&#41;</span><br />
&nbsp; &nbsp; <span class="kw1">if</span> <span class="kw2">isinstance</span><span class="br0">&#40;</span>value, <span class="kw2">str</span><span class="br0">&#41;</span>:<br />
&nbsp; &nbsp; &nbsp; &nbsp; f = <span class="kw2">open</span><span class="br0">&#40;</span>fn, <span class="st0">'wb'</span><span class="br0">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; f.<span class="me1">write</span><span class="br0">&#40;</span>value<span class="br0">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; f.<span class="me1">close</span><span class="br0">&#40;</span><span class="br0">&#41;</span><br />
&nbsp; &nbsp; <span class="kw1">else</span>:<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span class="co1"># Assume it is a dictionary</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw3">os</span>.<span class="me1">mkdir</span><span class="br0">&#40;</span>fn<span class="br0">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; f = <span class="kw2">self</span><span class="br0">&#91;</span>item<span class="br0">&#93;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; f.<span class="me1">update</span><span class="br0">&#40;</span>value<span class="br0">&#41;</span><br />
&nbsp;</div>
<p>Note that with subdirectories (represented as nested dictionaries) we let <tt class="docutils literal"><span class="pre">DictMixin.update</span></tt> do all the hard work, and just create an empty directory to be filled.</p>
<p>Deletion&#8230;</p>
<div class="dean_ch" style="white-space: wrap;"><br />
<span class="kw1">def</span> <span class="kw4">__delitem__</span><span class="br0">&#40;</span><span class="kw2">self</span>, item<span class="br0">&#41;</span>:<br />
&nbsp; &nbsp; fn = <span class="kw3">os</span>.<span class="me1">path</span>.<span class="me1">join</span><span class="br0">&#40;</span><span class="kw2">self</span>.<span class="me1">path</span>, item<span class="br0">&#41;</span><br />
&nbsp; &nbsp; <span class="kw1">if</span> <span class="kw1">not</span> <span class="kw3">os</span>.<span class="me1">path</span>.<span class="me1">exists</span><span class="br0">&#40;</span>fn<span class="br0">&#41;</span>:<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">raise</span> <span class="kw2">KeyError</span><span class="br0">&#40;</span><span class="st0">&quot;File %s does not exist&quot;</span> % fn<span class="br0">&#41;</span><br />
&nbsp; &nbsp; <span class="kw1">if</span> <span class="kw3">os</span>.<span class="me1">path</span>.<span class="me1">isdir</span><span class="br0">&#40;</span>fn<span class="br0">&#41;</span>:<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span class="co1">## one way...</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw2">self</span><span class="br0">&#91;</span>item<span class="br0">&#93;</span>.<span class="me1">clear</span><span class="br0">&#40;</span><span class="br0">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw3">os</span>.<span class="me1">rmdir</span><span class="br0">&#40;</span>fn<span class="br0">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span class="co1">## another way...</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span class="co1">#shutil.rmtree(fn)</span><br />
&nbsp; &nbsp; <span class="kw1">else</span>:<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw3">os</span>.<span class="me1">unlink</span><span class="br0">&#40;</span>fn<span class="br0">&#41;</span><br />
&nbsp;</div>
<p>Enumeration&#8230;</p>
<div class="dean_ch" style="white-space: wrap;"><br />
<span class="kw1">def</span> keys<span class="br0">&#40;</span><span class="kw2">self</span><span class="br0">&#41;</span>:<br />
&nbsp; &nbsp; <span class="kw1">return</span> <span class="kw3">os</span>.<span class="me1">listdir</span><span class="br0">&#40;</span><span class="kw2">self</span>.<span class="me1">path</span><span class="br0">&#41;</span><br />
&nbsp;</div>
<p>So, to recursively copy <tt class="docutils literal"><span class="pre">'/foo/bar'</span></tt> to <tt class="docutils literal"><span class="pre">'/dest/path/bar'</span></tt> you do:</p>
<div class="dean_ch" style="white-space: wrap;"><br />
FSDict<span class="br0">&#40;</span><span class="st0">'/dest/path'</span><span class="br0">&#41;</span><span class="br0">&#91;</span><span class="st0">'bar'</span><span class="br0">&#93;</span> = FSDict<span class="br0">&#40;</span><span class="st0">'/foo'</span><span class="br0">&#41;</span><span class="br0">&#91;</span><span class="st0">'bar'</span><span class="br0">&#93;</span><br />
&nbsp;</div>
<p>It doesn&#8217;t really matter if <tt class="docutils literal"><span class="pre">'/foo/bar'</span></tt> is a directory or file. There&#8217;s a number of other clever things that come out of this.  I think it&#8217;s an example of the power of <a class="reference external" href="http://en.wikipedia.org/wiki/Closure_%28mathematics%29">a closed set</a> &#8212; dictionaries are expressable from these four operations, and all the other methods can be derived from there.  If you find this interesting, you might want to read the <a class="reference external" href="http://svn.python.org/view/python/trunk/Lib/UserDict.py?view=markup">source for DictMixin</a>; it&#8217;s only about 95 lines.</p>
<p>My article <a class="reference external" href="../../../../templating-via-dict-wrappers.html">templating via dict wrappers</a> has some other similar dict tricks.</p>
</div>
<p>No related posts.</p>											</div><!-- END POST-ENTRY  -->
			<!-- <rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
			xmlns:dc="http://purl.org/dc/elements/1.1/"
			xmlns:trackback="http://madskills.com/public/xml/rss/module/trackback/">
		<rdf:Description rdf:about="http://blog.ianbicking.org/2007/08/17/dictmixin/"
    dc:identifier="http://blog.ianbicking.org/2007/08/17/dictmixin/"
    dc:title="DictMixin"
    trackback:ping="http://blog.ianbicking.org/2007/08/17/dictmixin/trackback/" />
</rdf:RDF> -->
			<div class="post-footer">
				<p>Posted by Ian Bicking on Friday, August 17th, 2007, at 12:02 am, and filed under <a href="../../../../category/programming/index.html" title="View all posts in Programming" rel="category tag">Programming</a>, <a href="../../../../category/python/index.html" title="View all posts in Python" rel="category tag">Python</a>.</p>
				<p>
				Comments have a <a href='http://blog.ianbicking.org/2007/08/17/dictmixin/feed/'>feed</a>.</p>
			</div><!-- END POST-FOOTER -->
		</div><!-- END POST -->

<div id="comments">




<h4 id="comments">3 Comments</h4>
 <ul class="commentlist">
		<li class="comment even thread-even depth-1" id="comment-189">
				<div id="div-comment-189" class="comment-body">
				<div class="comment-author vcard">
		<img alt='' src='http://1.gravatar.com/avatar/baf83fa62a7481a08c40353795e11f44?s=32&amp;d=http%3A%2F%2Fblog.ianbicking.org%2Fwp-includes%2Fimages%2Fblank.gif&amp;r=PG' class='avatar avatar-32 photo' height='32' width='32' />		<cite class="fn"><a href='http://blog.ntecs.de' rel='external nofollow' class='url'>Michael Neumann</a></cite> <span class="says">says:</span>		</div>

		<div class="comment-meta commentmetadata"><a href="http://blog.ianbicking.org/2007/08/17/dictmixin/comment-page-1/#comment-189">
			August 17, 2007 at 2:32 am</a>		</div>

		<p>I wrote a Ruby version of your FSDict class. It&#8217;s here: <a href="http://blog.ntecs.de/articles/2007/08/17/ian-bickings-fsdict-in-ruby" rel="nofollow">http://blog.ntecs.de/articles/2007/08/17/ian-bickings-fsdict-in-ruby</a></p>

		<div class="reply">
				</div>
				</div>
		</li>
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-190">
				<div id="div-comment-190" class="comment-body">
				<div class="comment-author vcard">
		<img alt='' src='http://1.gravatar.com/avatar/769084f2da2ebbc1e483af3f0e72adaa?s=32&amp;d=http%3A%2F%2Fblog.ianbicking.org%2Fwp-includes%2Fimages%2Fblank.gif&amp;r=PG' class='avatar avatar-32 photo' height='32' width='32' />		<cite class="fn">Jim</cite> <span class="says">says:</span>		</div>

		<div class="comment-meta commentmetadata"><a href="http://blog.ianbicking.org/2007/08/17/dictmixin/comment-page-1/#comment-190">
			August 17, 2007 at 5:45 am</a>		</div>

		<p>DictMixin is handy.  But it&#8217;s an old-style class, and I ran into difficulty when using it to store dictionary contents in a database with Storm because of that.  This led me to the #storm IRC channel, where I was told simply that what I was doing wasn&#8217;t a proper dictionary and therefore I should use an over-complicated delegation system instead.  Ugh.</p>

<p>I can&#8217;t see the point of that.  Yes, a class using DictMixin can do some clever stuff behind the scenes that you wouldn&#8217;t necessarily expect from a normal dictionary.  But that doesn&#8217;t mean that it isn&#8217;t actually a dictionary, does it?  It still stores key/value pairs, right?</p>

<p>I think adapting simple interfaces like the Dict interface to complex behaviour is one of the things that makes Python so useful.  I don&#8217;t see the problem with &#8220;magic&#8221; like this, in fact I think it&#8217;s a great thing.  What do you say to people who want to double your class-count for the sake of it?  Telling them to go back to Java sounds too snotty, but their attitude isn&#8217;t great either.</p>

		<div class="reply">
				</div>
				</div>
		</li>
		<li class="comment byuser comment-author-ianb bypostauthor even thread-even depth-1" id="comment-193">
				<div id="div-comment-193" class="comment-body">
				<div class="comment-author vcard">
		<img alt='' src='http://0.gravatar.com/avatar/cc8334869c9d2a9e603017f2da805eb3?s=32&amp;d=http%3A%2F%2Fblog.ianbicking.org%2Fwp-includes%2Fimages%2Fblank.gif&amp;r=PG' class='avatar avatar-32 photo' height='32' width='32' />		<cite class="fn"><a href='../../../../index.html' rel='external nofollow' class='url'>Ian Bicking</a></cite> <span class="says">says:</span>		</div>

		<div class="comment-meta commentmetadata"><a href="http://blog.ianbicking.org/2007/08/17/dictmixin/comment-page-1/#comment-193">
			August 17, 2007 at 12:40 pm</a>		</div>

		<p>I&#8217;m not exactly sure what you were doing.  <code>obj.__dict__</code> must be a real dictionary, I don&#8217;t even think a dictionary subclass is okay.  But that&#8217;s right at the heart of Python&#8217;s objects, so it&#8217;s not too surprising &#8212; lots of low-level code pokes right into an instance&#8217;s dictionary structure directly, I imagine.  I&#8217;m <em>guessing</em> something along those lines is what happened to you with Storm?  There&#8217;s also questions like &#8220;can this object change behind my back?&#8221; &#8212; which you can feel more confident about with a real dictionary.  As an example, WSGI doesn&#8217;t allow dictionary-like objects for requests, only exactly <code>dict</code>.  It&#8217;s like a contract in that case.</p>

<p>You can do <code>class Foo(object, DictMixin):</code> if you want a new-style dict-like class; that works fine.</p>

		<div class="reply">
				</div>
				</div>
		</li>
</ul>

<div class="navigation">
<div class="alignleft"></div>
<div class="alignright"></div>
</div>




</div>

		<div class="navigation">
			<div class="nav-left">&laquo; <a href="../../14/reflection-and-description-of-meaning/index.html" rel="prev">Reflection and Description Of Meaning</a></div>
			<div class="nav-right"><a href="../../18/webob/index.html" rel="next">WebOb</a> &raquo;</div>
		</div><!-- END NAVIGATION -->


	</div><!-- END CONTENT -->
</div><!-- END CONTAINER  -->

<div id="sidebar">
	<ul>
		<li id="home-link">
			<h2><a href="../../../../index.html" title="Ian Bicking: a blog">Home</a></h2>
		</li>
<li id="text-315934862" class="widget widget_text"><h2 class="widgettitle">About</h2>
			<div class="textwidget">Ian is a developer with Mozilla, <a href="http://ianbicking.appspot.com/projects">Python open source developer</a>, actually uses <a href="https://plus.google.com/u/0/104537541227697934010/posts">Google+</a> more than <a href="http://twitter.com/ianbicking">twitter</a> and lives in Minneapolis.<br>
<span class="gittip-0001" gittip-username="ianbicking"></span>
<script id="gittip-0001"
  src="https://www.gittip.com/assets/widgets/0001.js"></script>
</div>
		</li>
<li id="text-315934863" class="widget widget_text">			<div class="textwidget"><!-- <script type="text/javascript">mbgc='f5f5f5';ww='160';mbc='cecece';bbc='3F79D5';bmobc='3b71c6';bbgc='4889F0';bmoc='3F79D5';bfc='FFFFFF';bmofc='ffffff';tlc='cecece';tc='6a6a6a';nc='6a6a6a';bc='6a6a6a';l='y';fs='16';fsb='13';bw='100';ff='4';lu='6a6a6a';pc='4889F0';wh='340';b='s'; pid='104537541227697934010';</script><script type="text/javascript" src="http://widgetsplus.com/google_plus_widget.js"></script> --></div>
		</li>
<li id="archives-2" class="widget widget_archive"><h2 class="widgettitle">Archives</h2>
		<ul>
			<li><a href='../../../../2012/10/index.html' title='October 2012'>October 2012</a></li>
	<li><a href='../../../../2012/02/index.html' title='February 2012'>February 2012</a></li>
	<li><a href='../../../../2011/04/index.html' title='April 2011'>April 2011</a></li>
	<li><a href='../../../../2011/03/index.html' title='March 2011'>March 2011</a></li>
	<li><a href='../../../../2010/09/index.html' title='September 2010'>September 2010</a></li>
	<li><a href='../../../../2010/08/index.html' title='August 2010'>August 2010</a></li>
	<li><a href='../../../../2010/05/index.html' title='May 2010'>May 2010</a></li>
	<li><a href='../../../../2010/04/index.html' title='April 2010'>April 2010</a></li>
	<li><a href='../../../../2010/03/index.html' title='March 2010'>March 2010</a></li>
	<li><a href='../../../../2010/02/index.html' title='February 2010'>February 2010</a></li>
	<li><a href='../../../../2010/01/index.html' title='January 2010'>January 2010</a></li>
	<li><a href='../../../../2009/09/index.html' title='September 2009'>September 2009</a></li>
	<li><a href='../../../../2009/05/index.html' title='May 2009'>May 2009</a></li>
	<li><a href='../../../../2009/04/index.html' title='April 2009'>April 2009</a></li>
	<li><a href='../../../../2009/01/index.html' title='January 2009'>January 2009</a></li>
	<li><a href='../../../../2008/12/index.html' title='December 2008'>December 2008</a></li>
	<li><a href='../../../../2008/11/index.html' title='November 2008'>November 2008</a></li>
	<li><a href='../../../../2008/10/index.html' title='October 2008'>October 2008</a></li>
	<li><a href='../../../../2008/09/index.html' title='September 2008'>September 2008</a></li>
	<li><a href='../../../../2008/08/index.html' title='August 2008'>August 2008</a></li>
	<li><a href='../../../../2008/07/index.html' title='July 2008'>July 2008</a></li>
	<li><a href='../../../../2008/06/index.html' title='June 2008'>June 2008</a></li>
	<li><a href='../../../../2008/05/index.html' title='May 2008'>May 2008</a></li>
	<li><a href='../../../../2008/04/index.html' title='April 2008'>April 2008</a></li>
	<li><a href='../../../../2008/03/index.html' title='March 2008'>March 2008</a></li>
	<li><a href='../../../../2008/02/index.html' title='February 2008'>February 2008</a></li>
	<li><a href='../../../../2008/01/index.html' title='January 2008'>January 2008</a></li>
	<li><a href='../../../11/index.html' title='November 2007'>November 2007</a></li>
	<li><a href='../../../10/index.html' title='October 2007'>October 2007</a></li>
	<li><a href='../../../09/index.html' title='September 2007'>September 2007</a></li>
	<li><a href='../../index.html' title='August 2007'>August 2007</a></li>
	<li><a href='../../../07/index.html' title='July 2007'>July 2007</a></li>
		</ul>
</li>
<li id="text-315934861" class="widget widget_text">			<div class="textwidget"><a href="../../../../archive/index.html">The Older Archives</a></div>
		</li>
<li id="categories-1" class="widget widget_categories"><h2 class="widgettitle">Categories</h2>
		<ul>
	<li class="cat-item cat-item-12"><a href="../../../../category/erlang/index.html" title="View all posts filed under Erlang">Erlang</a>
</li>
	<li class="cat-item cat-item-11"><a href="../../../../category/html/index.html" title="View all posts filed under HTML">HTML</a>
</li>
	<li class="cat-item cat-item-8"><a href="../../../../category/javascript/index.html" title="View all posts filed under Javascript">Javascript</a>
</li>
	<li class="cat-item cat-item-15"><a href="../../../../category/licensing/index.html" title="View all posts filed under Licensing">Licensing</a>
</li>
	<li class="cat-item cat-item-18"><a href="../../../../category/mozilla/index.html" title="View all posts filed under Mozilla">Mozilla</a>
</li>
	<li class="cat-item cat-item-5"><a href="../../../../category/notech/index.html" title="View all posts filed under Non-technical">Non-technical</a>
</li>
	<li class="cat-item cat-item-6"><a href="../../../../category/olpc/index.html" title="View all posts filed under OLPC">OLPC</a>
</li>
	<li class="cat-item cat-item-14"><a href="../../../../category/packaging/index.html" title="View all posts filed under Packaging">Packaging</a>
</li>
	<li class="cat-item cat-item-4"><a href="../../../../category/politics/index.html" title="View all posts filed under Politics">Politics</a>
</li>
	<li class="cat-item cat-item-3"><a href="../../../../category/programming/index.html" title="View all posts filed under Programming">Programming</a>
</li>
	<li class="cat-item cat-item-7"><a href="../../../../category/python/index.html" title="View all posts filed under Python">Python</a>
</li>
	<li class="cat-item cat-item-10"><a href="../../../../category/ruby/index.html" title="View all posts filed under Ruby">Ruby</a>
</li>
	<li class="cat-item cat-item-19"><a href="../../../../category/security/index.html" title="View all posts filed under Security">Security</a>
</li>
	<li class="cat-item cat-item-16"><a href="../../../../category/silverlining.1" title="View all posts filed under Silver Lining">Silver Lining</a>
</li>
	<li class="cat-item cat-item-20"><a href="../../../../category/programming/testing/index.html" title="View all posts filed under Testing">Testing</a>
</li>
	<li class="cat-item cat-item-9"><a href="../../../../category/web/index.html" title="View all posts filed under Web">Web</a>
</li>
	<li class="cat-item cat-item-13"><a href="../../../../category/zopeplone/index.html" title="View all posts filed under Zope/Plone">Zope/Plone</a>
</li>
		</ul>
</li>
<li id="search-2" class="widget widget_search"><form id="searchform" method="get" action="../../../../index.html">
	<div>
		<input id="s" name="s" type="text" value="" tabindex="1" size="10" />
		<input id="searchsubmit" name="searchsubmit" type="submit" value="Find" tabindex="2" />
	</div>
</form> </li>
		<li id="recent-posts-2" class="widget widget_recent_entries">		<h2 class="widgettitle">Recent Posts</h2>
		<ul>
				<li><a href="../../../../index.html?p=291" title="Why doctest.js is better than Python&#8217;s doctest">Why doctest.js is better than Python&#8217;s doctest</a></li>
				<li><a href="../../../../index.html?p=283" title="Python Application Package">Python Application Package</a></li>
				<li><a href="../../../../index.html?p=277" title="Git-as-sync, not source-control-as-deployment">Git-as-sync, not source-control-as-deployment</a></li>
				<li><a href="../../../../index.html?p=253" title="My Unsolicited Advice For PyPy">My Unsolicited Advice For PyPy</a></li>
				<li><a href="../../../../index.html?p=250" title="A Python Web Application Package and Format (we should make one)">A Python Web Application Package and Format (we should make one)</a></li>
				</ul>
		</li>
<li id="recent-comments-2" class="widget widget_recent_comments"><h2 class="widgettitle">Recent Comments</h2>
<ul id="recentcomments"><li class="recentcomments"><a href='http://www.mirsa.com.tr' rel='external nofollow' class='url'>havalandırma</a> on <a href="../../../../2012/10/02/why-doctest-js-is-better-than-pythons-doctest/comment-page-1/index.html#comment-228633">Why doctest.js is better than Python&#8217;s doctest</a></li><li class="recentcomments"><a href='http://redealmeidense.com.br/portalx/modules/' rel='external nofollow' class='url'>this website</a> on <a href="../../../../2012/10/02/why-doctest-js-is-better-than-pythons-doctest/comment-page-1/index.html#comment-196267">Why doctest.js is better than Python&#8217;s doctest</a></li><li class="recentcomments">Eric Pierce on <a href="../../../../2012/10/02/why-doctest-js-is-better-than-pythons-doctest/comment-page-1/index.html#comment-195322">Why doctest.js is better than Python&#8217;s doctest</a></li><li class="recentcomments">Paul Brian on <a href="../../../../2012/10/02/why-doctest-js-is-better-than-pythons-doctest/comment-page-1/index.html#comment-195321">Why doctest.js is better than Python&#8217;s doctest</a></li><li class="recentcomments"><a href='http://benjiyork.com' rel='external nofollow' class='url'>Benji York</a> on <a href="../../../../2012/10/02/why-doctest-js-is-better-than-pythons-doctest/comment-page-1/index.html#comment-195320">Why doctest.js is better than Python&#8217;s doctest</a></li></ul></li>
	</ul>
</div>

	<div id="footer">
		<p>
			&copy; 2013 Ian Bicking<!--
Does this commenting make me evil?
			|
			Thanks, <a href="http://wordpress.org/" title="WordPress">WordPress</a>
			|
			<a href="http://www.plaintxt.org/themes/barthelme/" title="Barthelme for WordPress" rel="follow">Barthelme</a> theme by <a href="http://scottwallick.com/" title="scottwallick.com" rel="follow">Scott</a>
			| <!-- The following is a link to the theme author's sponsor. Please consider its smallness and that Scott was nice enough to make this theme publically available. -->
			Sponsor: <a href="http://www.active-sandals.com/womreefsan.html" title="Support: Reef Sandals">Reef Sandals</a>
			|
			Valid <a href="http://validator.w3.org/check?uri=http://blog.ianbicking.org&amp;outline=1&amp;verbose=1" title="Valid XHTML 1.0 Strict" rel="nofollow">XHTML</a> &amp; <a href="http://jigsaw.w3.org/css-validator/validator?uri=http://blog.ianbicking.org/wp-content/themes/Barthelme-ianb/style.css&amp;profile=css2&amp;warning=no" title="Valid CSS" rel="nofollow">CSS</a>
			|
			-->
			RSS: <a href="../../../../feed/rss/index.html" title="Ian Bicking: a blog RSS 2.0 (XML) Feed" rel="alternate" type="application/rss+xml">Posts</a> &amp; <a href="../../../../comments/feed/index.html" title="Ian Bicking: a blog Comments RSS 2.0 (XML) Feed" rel="alternate" type="application/rss+xml">Comments</a>
		</p>
	</div>

</div><!-- END WRAPPER -->

	<!-- Somehow 39 queries occured in 2.089 seconds. Magic! -->
	<!-- The "Barthelme" theme copyright (c) 2006 Scott Allan Wallick - http://www.plaintxt.org/themes/ -->
	<script type='text/javascript' src='../../../../wp-includes/js/comment-reply.js?ver=3.4.2'></script>

<!-- Google Analytics -->
<script src="http://www.google-analytics.com/urchin.js" type="text/javascript">
</script>
<script type="text/javascript">
_uacct = "UA-2442258-1";
urchinTracker();
</script>

</body>
</html>