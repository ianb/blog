<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
    <head>
        <title>Re: Falcon</title>
        <link rel="stylesheet" href="WK/default.css" type="text/css" />
        <link
            rel="alternate"
            type="application/rss+xml"
            title="New Posts"
            href="https://ianbicking.org/feeds/new_pages.xml"
        />
    </head>
    <body color="black" bgcolor="white">
        <h1 id="header">
            <a href="index.html">Ian Bicking: the old part of his blog</a>
        </h1>

        <div style="float: right">
            <script type="text/javascript">
                google_ad_client = "pub-2913402032659646";
                google_ad_width = 120;
                google_ad_height = 600;
                google_ad_format = "120x600_as";
                google_ad_type = "text";
                google_ad_channel = "";
                google_color_border = "336699";
                google_color_bg = "FFFFFF";
                google_color_link = "0000FF";
                google_color_text = "000000";
                google_color_url = "008000";
                //-->
            </script>
        </div>
        <h1>Re: Falcon</h1>

        <div class="document">
            <p>
                Just saw an announcement about
                <a class="reference" href="http://www.falconpl.org/">Falcon</a>,
                a new programming language (<a
                    class="reference"
                    href="http://tacojuice.org/plnews/nb.cgi/view/PLNews/2005/02/16/2"
                    >via</a
                >). Reading the
                <a
                    class="reference"
                    href="http://www.falconpl.org/?page_id=survival"
                    >documentation</a
                >, it seems quite reminiscent of Python, or maybe it's just that
                I'm not getting a wide enough perspective. Anyway, following
                similar posts on
                <a class="reference" href="and-boo-makes-three.html">Boo</a> and
                <a class="reference" href="initial-thoughts-on-prothon.html"
                    >Prothon</a
                >, here's the differences with Python that I can see:
            </p>
            <ul>
                <li>
                    <p class="first">
                        The VM is written in C++. This seems to be an important
                        point to the author. I wonder if it is hard to embed in
                        a C application as a result (but that much easier in a
                        C++ application?)
                    </p>
                </li>
                <li>
                    <p class="first">
                        Doesn't use whitespace for blocks (uses
                        <tt class="docutils literal"
                            ><span class="pre">end</span></tt
                        >). Does use newlines to separate statements.
                    </p>
                </li>
                <li>
                    <p class="first">
                        One line control structure if you use a colon. E.g.:
                    </p>
                    <pre class="literal-block">
if a
    do stuff
end
/* equivalent to: */
if a: do stuff
</pre
                    >
                </li>
                <li>
                    <p class="first">
                        No
                        <tt class="docutils literal"
                            ><span class="pre">print</span></tt
                        >
                        statement (it's a function:
                        <tt class="docutils literal"
                            ><span class="pre">printl(args)</span></tt
                        >).
                    </p>
                </li>
                <li>
                    <p class="first">
                        <tt class="docutils literal"
                            ><span class="pre">/*</span>
                            <span class="pre">...</span>
                            <span class="pre">*/</span></tt
                        >
                        and
                        <tt class="docutils literal"
                            ><span class="pre">//</span></tt
                        >
                        comments.
                    </p>
                </li>
                <li>
                    <p class="first">
                        Conditional expression (aka ternary operator):
                        <tt class="docutils literal"
                            ><span class="pre">expr</span>
                            <span class="pre">?</span>
                            <span class="pre">true_value</span>
                            <span class="pre">:</span>
                            <span class="pre">false_value</span></tt
                        >.
                    </p>
                </li>
                <li>
                    <p class="first">
                        <tt class="docutils literal"
                            ><span class="pre">switch</span></tt
                        >
                        structure, like
                        <tt class="docutils literal"
                            ><span class="pre">switch;</span>
                            <span class="pre">case</span>
                            <span class="pre">a;</span>
                            <span class="pre">...</span></tt
                        >.
                    </p>
                </li>
                <li>
                    <p class="first">
                        Two
                        <tt class="docutils literal"
                            ><span class="pre">for</span></tt
                        >
                        formats. Python's
                        <tt class="docutils literal"
                            ><span class="pre">for</span>
                            <span class="pre">var</span>
                            <span class="pre">in</span>
                            <span class="pre">sequence</span></tt
                        >
                        and another BASIC-like
                        <tt class="docutils literal"
                            ><span class="pre">for</span>
                            <span class="pre">var</span>
                            <span class="pre">=</span>
                            <span class="pre">start</span>
                            <span class="pre">to</span>
                            <span class="pre">finish</span>
                            <span class="pre">[step</span>
                            <span class="pre">amount]</span></tt
                        >.
                    </p>
                </li>
                <li>
                    <p class="first">
                        No tuples.
                        <tt class="docutils literal"
                            ><span class="pre">[]</span></tt
                        >
                        is optional, kind of how
                        <tt class="docutils literal"
                            ><span class="pre">()</span></tt
                        >
                        is optional around tuples in Python. But
                        <tt class="docutils literal"
                            ><span class="pre">[item]</span></tt
                        >
                        is unambiguously a single-item list, where
                        <tt class="docutils literal"
                            ><span class="pre">(item)</span></tt
                        >
                        is one of Python's weirdnesses (you need
                        <tt class="docutils literal"
                            ><span class="pre">(item,)</span></tt
                        >).
                    </p>
                </li>
                <li>
                    <p class="first">
                        I don't think you can iterate over strings.
                        <a class="reference" href="python-nit-chapter-3.html"
                            >Good call</a
                        >.
                    </p>
                </li>
                <li>
                    <p class="first">
                        Dictionaries look like
                        <tt class="docutils literal"
                            ><span class="pre">[key1</span>
                            <span class="pre">=&gt;</span>
                            <span class="pre">value1,</span>
                            <span class="pre">key2</span>
                            <span class="pre">=&gt;</span>
                            <span class="pre">value2,</span>
                            <span class="pre">...]</span></tt
                        >. Kind of like PHP.
                    </p>
                </li>
                <li>
                    <p class="first">
                        Functions defined with
                        <tt class="docutils literal"
                            ><span class="pre">function</span></tt
                        >, not
                        <tt class="docutils literal"
                            ><span class="pre">def</span></tt
                        >. Bizarrely, after all these years programming Python,
                        if I spend an hour or two in Javascript and go back to
                        Python, I'll use
                        <tt class="docutils literal"
                            ><span class="pre">function</span></tt
                        >
                        instead of
                        <tt class="docutils literal"
                            ><span class="pre">def</span></tt
                        >.
                    </p>
                </li>
                <li>
                    <p class="first">
                        Functions can begin with a block of static variables
                        (<tt class="docutils literal"
                            ><span class="pre">static;</span>
                            <span class="pre">assignments...</span>
                            <span class="pre">;</span>
                            <span class="pre">end</span></tt
                        >).
                    </p>
                </li>
                <li>
                    <p class="first">
                        &quot;Stateful&quot; functions are a special case of
                        static variables I guess...? I really don't get this. I
                        feel like you could use generator functions to a similar
                        effect in Python, but it would be idiomatic, not
                        something codified in the language.
                    </p>
                </li>
                <li>
                    <p class="first">
                        Seems to be prototype-based. I don't know exactly why
                        this is popular; it always confuses me, and I feel like
                        classes make a better baseline with prototype
                        extensions. So you define objects with an
                        <tt class="docutils literal"
                            ><span class="pre">object</span></tt
                        >
                        keyword.
                    </p>
                </li>
                <li>
                    <p class="first">
                        You have to use
                        <tt class="docutils literal"
                            ><span class="pre">self.var</span></tt
                        >
                        just like in Python, but methods don't have a
                        <tt class="docutils literal"
                            ><span class="pre">self</span></tt
                        >
                        parameter. I strongly disagree with people who think
                        Python's
                        <tt class="docutils literal"
                            ><span class="pre">self.var</span></tt
                        >
                        is a wart, so kudos to Falcon. Like Python,
                        <tt class="docutils literal"
                            ><span class="pre">self</span></tt
                        >
                        actually seems to be a parameter, it's just hidden (and
                        <tt class="docutils literal"
                            ><span class="pre">null</span></tt
                        >
                        when a function isn't called as a method). So you can do
                        the same kind of reassignment of methods like in Python.
                    </p>
                </li>
                <li>
                    <p class="first">
                        Methods in
                        <tt class="docutils literal"
                            ><span class="pre">object</span></tt
                        >
                        blocks aren't introduced with any keyword at all, they
                        are just kind of declared (basically just like a normal
                        function declaration, but without the
                        <tt class="docutils literal"
                            ><span class="pre">function</span></tt
                        >). You can also have assignments in the block, like in
                        Python.
                    </p>
                </li>
                <li>
                    <p class="first">
                        Objects can &quot;inherit&quot; from classes by using
                        <tt class="docutils literal"
                            ><span class="pre">object</span>
                            <span class="pre">&lt;name&gt;</span>
                            <span class="pre">from</span>
                            <span class="pre">class1,</span>
                            <span class="pre">class2,</span>
                            <span class="pre">...</span></tt
                        >. I say &quot;inherit&quot; because we don't seem to be
                        using traditional classes.
                    </p>
                </li>
                <li>
                    <p class="first">
                        Has a
                        <tt class="docutils literal"
                            ><span class="pre">property</span></tt
                        >
                        operator, so that
                        <tt class="docutils literal"
                            ><span class="pre">obj</span>
                            <span class="pre">provides</span>
                            <span class="pre">method</span></tt
                        >
                        is equivalent to
                        <tt class="docutils literal"
                            ><span class="pre">hasattr(obj,</span>
                            <span class="pre">&quot;method&quot;)</span></tt
                        >. Encourages <em>look before you leap</em>, but also
                        makes duck type checking seem more natural and less
                        hackish.
                    </p>
                </li>
                <li>
                    <p class="first">
                        A
                        <tt class="docutils literal"
                            ><span class="pre">has</span></tt
                        >
                        operator, that is basically a bitmask. So you can do
                        <tt class="docutils literal"
                            ><span class="pre">obj</span>
                            <span class="pre">has</span>
                            <span class="pre">2</span></tt
                        >
                        to do something like
                        <tt class="docutils literal"
                            ><span class="pre">obj.attributes</span>
                            <span class="pre">&amp;</span>
                            <span class="pre">2</span></tt
                        >. Making it somewhat less hackish, you can enumerate
                        these attributes. Presumably you cannot use expressions
                        on the right side of
                        <tt class="docutils literal"
                            ><span class="pre">has</span></tt
                        >, because the attribute names are locally scoped to the
                        object. There is a fixed 32 bit limit on the attributes.
                        You use
                        <tt class="docutils literal"
                            ><span class="pre">give</span>
                            <span class="pre">obj</span>
                            <span class="pre">attr_name</span></tt
                        >
                        and
                        <tt class="docutils literal"
                            ><span class="pre">give</span>
                            <span class="pre">obj</span>
                            <span class="pre">!</span>
                            <span class="pre">attr_name</span></tt
                        >
                        to set and unset these attributes. Weird.
                    </p>
                </li>
                <li>
                    <p class="first">
                        Ah... now we get to classes. Weird to start with objects
                        and not classes. Anyway, this makes me feel better.
                        Classes look like:
                    </p>
                    <pre class="literal-block">
class ClassName(params, ...) from SuperClasses, ...
    use params here to initialize object

    function method(): ...
end
</pre
                    >
                    <p>
                        It's weird to me that the equivalent of Python's
                        <tt class="docutils literal"
                            ><span class="pre">__init__</span></tt
                        >
                        is right in the body, and there's no formal transition
                        to the method list. Classes are called to instantiate
                        them, just like in Python.
                    </p>
                </li>
                <li>
                    <p class="first">
                        Uses
                        <tt class="docutils literal"
                            ><span class="pre">try;</span>
                            <span class="pre">statements;</span>
                            <span class="pre">catch</span>
                            <span class="pre">[var];</span>
                            <span class="pre">end</span></tt
                        >
                        for exceptions. The exceptions look wack. Uses integer
                        codes to distinguish exceptions from each other. No way
                        to catch specific exceptions. Not extensible the way
                        Python exceptions are (Python exceptions are full object
                        that can be specialized). Why wouldn't you make a
                        special form to limit what errors you catch?
                    </p>
                </li>
                <li>
                    <p class="first">
                        Variables are explicitly exported,
                        <tt class="docutils literal"
                            ><span class="pre">export</span>
                            <span class="pre">symbol1,</span>
                            <span class="pre">...</span></tt
                        >
                    </p>
                </li>
                <li>
                    <p class="first">
                        Modules are loaded by path name, like
                        <tt class="docutils literal"
                            ><span class="pre">load</span>
                            <span class="pre">library/module_name</span></tt
                        >. It's <em>not</em> strings, so the loads can be (more
                        or less) statically determined (like Python imports) --
                        this is good. Using path syntax gives you a clear
                        distinction between absolute and relative paths, and the
                        meaning thereof. This is good too. Seems to fold
                        together multiple directories (with a path); this isn't
                        so good. I at least like C's distinction of
                        <tt class="docutils literal"
                            ><span class="pre">#include</span>
                            <span class="pre">&lt;stdio&gt;</span></tt
                        >
                        and
                        <tt class="docutils literal"
                            ><span class="pre">#include</span>
                            <span class="pre">&quot;mylibrary&quot;</span></tt
                        >. It seems to not use namespaces, and just include all
                        the symbols -- very bad!
                    </p>
                </li>
                <li>
                    <p class="first">
                        Has &quot;variable aliasing&quot;, so that one variable
                        tracks the changes in another variable. Looks like
                        <tt class="docutils literal"
                            ><span class="pre">var_alias</span>
                            <span class="pre">=</span>
                            <span class="pre">$var</span></tt
                        >. Weird. Also in a function call, $ passes the variable
                        by alias, so that:
                    </p>
                    <pre class="literal-block">
function modify(param): param = &quot;new&quot;
var = &quot;old&quot;
modify($var)
var == &quot;new&quot;
</pre
                    >
                    <p>
                        Ick. This just enables
                        <a
                            class="reference"
                            href="http://c2.com/cgi/wiki?CodeSmell"
                            >bad smelling</a
                        >
                        code.
                    </p>
                </li>
                <li><p class="first">Has constants. That's nice.</p></li>
                <li>
                    <p class="first">
                        Uses
                        <tt class="docutils literal"
                            ><span class="pre">include</span>
                            <span class="pre">&quot;filename&quot;</span></tt
                        >
                        to <em>textually</em> include another file. Ick!
                    </p>
                </li>
                <li>
                    <p class="first">
                        If you use
                        <tt class="docutils literal"
                            ><span class="pre">sender</span></tt
                        >
                        in a method (or function?) you get the object that
                        called you. It's like
                        <a
                            class="reference"
                            href="http://c2.com/cgi/wiki?DynamicScoping"
                            >dynamic scope</a
                        >
                        for the call stack. Ick!
                    </p>
                </li>
                <li>
                    <p class="first">
                        Allows blocks (maybe?) in expressions, at least for
                        <tt class="docutils literal"
                            ><span class="pre">lambda</span></tt
                        >:
                    </p>
                    <pre class="literal-block">
func = lambda (a, b); return a * b ; end
</pre
                    >
                    <p>
                        The syntax feels weird. People keep talking about this
                        in the python list, fantasizing (and it'll never be more
                        than a fantasy) that extended lambdas will happen
                        sometime. The weirdness of the syntax is why I think
                        it's a fantasy. And
                        <tt class="docutils literal"
                            ><span class="pre">lambda</span></tt
                        >
                        is a dumb word --
                        <a
                            class="reference"
                            href="http://en.wikipedia.org/wiki/Alonzo_Church"
                            >Church's</a
                        >
                        <a
                            class="reference"
                            href="http://en.wikipedia.org/wiki/Lambda_calculus"
                            >use of the lambda character</a
                        >
                        doesn't make it an intuitive term!
                    </p>
                </li>
                <li>
                    <p class="first">
                        Has coroutines, which are basically cooperative (as
                        opposed to preemptive) threading.
                    </p>
                </li>
            </ul>
            <p>
                I can't say what Python has that Falcon doesn't (since I don't
                know Falcon), but it's probably quite a lot. Many parts seem
                somewhat sloppy -- like
                <tt class="docutils literal"><span class="pre">load</span></tt>
                -- and make me think of it more like Tcl or Lua than Python. The
                author uses the term &quot;scripting language&quot; a lot. I
                honestly can't figure out what it offers; it doesn't compare
                itself or justify itself with respect to other languages.
                Considering its similarity to Python (since there's many more
                points where they are identical, compared to these points where
                they differ) it would be nice to see a
                why-Falcon-instead-of-Python document or something. Actually, I
                don't know Lua, but if I did I suspect I'd see strong
                similarities there as well.
            </p>
            <p>
                If this were a language based on Parrot (if it was ready), or
                .NET, or the JVM, it could be a plausible language to use. I
                don't really get it as a standalone language, though -- the
                investment cost is too high for very little return.
            </p>
            <p>
                There's a thread of discussion
                <a
                    class="reference"
                    href="http://www.talkaboutprogramming.com/group/comp.lang.misc/messages/45412.html"
                    >here</a
                >, though it seems to focus on lambdas, because functional
                programming obsessives care about lambdas and equivalencies even
                when most programmers are busy thinking about programming (okay,
                maybe it's just that I'm tired of
                <a class="reference" href="http://lambda-the-ultimate.org/"
                    >Lambda The Ultimate</a
                >
                discussions).
            </p>
        </div>
        <div class="dates" align="right">
            Created 17 Feb '05<br />
            Modified 18 Feb '05
        </div>
        <hr noshade />
        <h3 id="comments">Comments:</h3>
        <blockquote>
            <div class="document">
                Looks very very similar to Lua (www.lua.org).
            </div>
            <div align="right">
                <a
                    href="https://ianbicking.org/re-falcon-comment-1.html"
                    rel="nofollow"
                    >#</a
                >
                Jonas Galvez
            </div>
            <hr noshade />

            <div class="document">
                <p>
                    I think being implemented in C++, this has one of the same
                    problems Prothon had. There are no standard libraries or
                    existing 3rd party libraries that you can use. You can't
                    directly use Python modules, .NET libraries, or Java
                    libraries. You have to start all over. No GUI toolkit, for
                    example. Other languages like Jython, Groovy, IronPython and
                    Boo don't suffer from this problem.
                </p>
                <p>
                    You might also check out LiveLogix. It runs on top of the
                    CPython VM, so you can still use Python modules.
                </p>
            </div>
            <div align="right">
                <a
                    href="https://ianbicking.org/re-falcon-comment-2.html"
                    rel="nofollow"
                    >#</a
                >
                Carson
            </div>
            <hr noshade />

            <div class="document">
                <p>
                    Thanks for your reviewing; I am absolutely pleased you found
                    many things in Falcon &quot;kudos&quot;; for the rest, we'll
                    do something before beta ;-).
                </p>
                <p>Some note about Falcon:</p>
                <p>
                    Falcon is not meant to build BIG applications out of it.
                    I.e. this is a clear statement in RUBY (a language capable
                    to do small + large apps), and this is also
                    <em>somehow</em> claimed but never quite attained by Python.
                    The target of Falcon is to be fast enough to be a sensible
                    choice over C for some duty, embeddable and powerfull to do
                    small thing quite well. Also, yes, to be C++.
                </p>
                <p>
                    You know there's no problem in linking C in C++; the other
                    way around is often more hacky, and that's was the reason of
                    my choice. Also, I have proof of the fact that C++ compilers
                    provide better optimizations for quite a lot of things.
                    Finally... the api is more clear, and that's important to
                    me.
                </p>
                <p>
                    A couple of precisations: - About try/catch; actually, what
                    you are going to catch is 99% an Error class or subclass
                    item. The fact is that in 99% of the progrmas I noticed that
                    selecting which kind of error have been raised is just a
                    pain. So, if you really need that, you may easily use the
                    switch statement over the error variable to detect it's
                    error type. Remember that you don't have switch in python...
                    so, having a pre-branch has more sense.
                </p>
                <p>
                    However, this is not a (completely) fixed decision. I may
                    introduce a per-type or per-class catch filter later on, but
                    the catch-all catch statement will stay. Also, the Falcon VM
                    provides unstoppable exception, that may not be handled by
                    scripts; they are not present in Python (i.e. you can block
                    a syntax error if you use a catch-all statement), so a
                    catch-all statement as LESS sense in python...
                </p>
                <ul class="simple">
                    <li>
                        Functions: static blocks are not just assignmens, but
                        whole code slices done only once. Same for the class
                        static statement: they are executed only when the first
                        object of a class is created.
                    </li>
                    <li>
                        Why starting with objects: we are programmers, and we
                        know OOP, but I found in my teaching experience that
                        newbies are better introduced to OOP if you first talk
                        about objects, and then about classes. Also, I always
                        felt the lack of singleton objects in every language I
                        dealt; I used them in some contexts, and I felt quite
                        comfortable with them.
                    </li>
                    <li>
                        Attributes can be matched against expressions: they are
                        NOT object or class specific. Once defined, you may
                        assign an attribute to any object in your program. They
                        are meant for EXTREMELY fast passage of data between
                        embedding applications and internal scripts,
                        (apps/scripts can read and set attributes without
                        accessing the object structure and decoding the
                        retreived item) but being a &quot;trasversal&quot;
                        extra-oop thing, they may be useful also in a more
                        general context. They are currently limited to 32, but
                        before beta stage I will use 64bit integers; I am just
                        considering if using them ALONE or continue to use also
                        int32 if the number fits it.
                    </li>
                    <li>
                        Stateful functions are an elegant way to implement
                        stateful machines. This also allows to bind every
                        function (or method) with a &quot;state&quot; value,
                        that may be kept inside the function, instead of having
                        to record and use the return value of it.
                    </li>
                    <li>
                        Self and Sender objects are special registers of the VM,
                        so they are not held in the stack, and do not weight in
                        calls.
                    </li>
                    <li>
                        The load statement is meant to provide a
                        &quot;logical&quot; module loading capacity. The command
                        line, that is, a minimal embedding application, will
                        just load all that the script requires. More
                        sophisticate embedders (i.e. your app), may filter out
                        easily load requests and provide other things instead.
                        Also, the embedder may provide its own function, objects
                        and classes to the scripts, without having them to load
                        any &quot;application specific module&quot;. Falcon
                        wants to be your application configuration language...
                    </li>
                    <li>
                        In Falcon you can change the behavior of object and
                        classes on the fly. I.e., instead of having a method to
                        check if some condition exists and then act accordingly,
                        you can just change the method depending on the
                        condition.
                    </li>
                </ul>
                <p>
                    Falcon is alpha. It may change a lot before beta, but I am
                    currently quite satisfied with it now; I am just making
                    module serialization more clever and much smarter object
                    data access, but for the rest I am really happy with it. For
                    the ppl that was lamenting lack of GUI, I will add an
                    embedded AWT (abstract windowing toolking), something like
                    the Java one but more focused on GTK concepts (that is,
                    intelligent placement instead of fixed one, unless otherwise
                    specified). So we'll have an AWT and many DRIVERS that will
                    provide the AWT with real output.
                </p>
                <p>Bests, Gian.</p>
            </div>
            <div align="right">
                <a
                    href="https://ianbicking.org/re-falcon-comment-3.html"
                    rel="nofollow"
                    >#</a
                >
                <a href="http://www.niccolai.ws">Giancarlo Niccolai</a>
            </div>
            <hr noshade />

            <div class="document">
                Oh, I forgot. About namespaces, I don't think they are necessary
                in untyped languages, especially not namespaces a-la-python. A
                very similar thing may be easily implemented by exporting a
                singleton object with the same name of the module, if the need
                arises.
            </div>
            <div align="right">
                <a
                    href="https://ianbicking.org/re-falcon-comment-4.html"
                    rel="nofollow"
                    >#</a
                >
                <a href="http://www.niccolai.ws">Giancarlo Niccolai</a>
            </div>
            <hr noshade />
        </blockquote>
    </body>
</html>
