<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<!-- MOBIFY - DO NOT ALTER - PASTE IMMEDIATELY AFTER OPENING HEAD TAG -->
<script type="text/javascript">/*<![CDATA[*/(function(a){function b(a,b){if(+a)return~a||(d.cookie=h+"=; path=/");j=d.createElement(e),k=d.getElementsByTagName(e)[0],j.src=a,b&&(j.onload=j.onerror=b),k.parentNode.insertBefore(j,k)}function c(){n.api||b(l.shift()||-1,c)}if(this.Mobify)return;var d=document,e="script",f="mobify",g="."+f+".com/",h=f+"-path",i=g+"un"+f+".js",j,k,l=[!1,1],m,n=this.Mobify={points:[+(new Date)],tagVersion:[6,0]},o=/(; |#|&|^)mobify-path=([^&;]*)/g.exec(location.hash+"; "+d.cookie);o?(m=o[2])&&!+(m=sessionStorage[h]||m)&&(l=[!0,"//preview"+g+escape(m)]):(l=a()||l,l[0]&&l.push("//cdn"+i,"//files01"+i)),l.shift()?(d.write('<plaintext style="display:none;">'),setTimeout(c)):b(l[0])})(function(){if(/ip(hone|od)|android.*(mobile)|blackberry.*applewebkit/i.test(navigator.userAgent)){return[1,"//cdn.mobify.com/sites/ians-blog/production/mobify.js"]}})/*]]>*/</script>
<!-- END MOBIFY -->
	<title>Ian Bicking: a blog   ::  Why doctest.js is better than Python&#8217;s doctest</title>
	<meta http-equiv="content-type" content="text/html; charset=UTF-8" />
	<meta name="generator" content="WordPress 3.4.2" /><!-- LEAVE FOR STATS -->
	<meta name="description" content="" />
	<link rel="stylesheet" title="plaintxtSimpler" href="../../../../wp-content/themes/Barthelme-ianb/style.css" type="text/css" media="all" />
	<link rel="start" href="../../../../index.html" title="Ian Bicking: a blog" />
	<link rel="alternate" type="application/atom+xml" title="Ian Bicking: a blog Atom Feed" href="../../../../feed/atom/index.html" />
	<link rel="alternate" type="application/rss+xml" title="Ian Bicking: a blog RSS 2.0 Feed" href="../../../../feed/rss/index.html" />
	<link rel="alternate" type="application/rss+xml" title="Ian Bicking: a blog Comments RSS 2.0 Feed" href="../../../../comments/feed/index.html" />
	<link rel="alternate" type="application/rdf+xml" title="Ian Bicking: a blog RSS 1.0" href="../../../../feed/rdf/index.html" />
	<link rel="alternate" type="text/xml" title="Ian Bicking: a blog RSS 0.92 Feed" href="../../../../feed/rss/index.html" />
	<link rel="pingback" href="../../../../xmlrpc.php" />
	<link rel="openid.server" href="http://www.myopenid.com/server" />
	<link rel="openid.delegate" href="http://ianb.myopenid.com" />
        <link rel="me" type="text/html" href="http://www.google.com/profiles/ianbicking"/>
		<link rel='archives' title='October 2012' href='../../index.html' />
	<link rel='archives' title='February 2012' href='../../../02/index.html' />
	<link rel='archives' title='April 2011' href='../../../../2011/04/index.html' />
	<link rel='archives' title='March 2011' href='../../../../2011/03/index.html' />
	<link rel='archives' title='September 2010' href='../../../../2010/09/index.html' />
	<link rel='archives' title='August 2010' href='../../../../2010/08/index.html' />
	<link rel='archives' title='May 2010' href='../../../../2010/05/index.html' />
	<link rel='archives' title='April 2010' href='../../../../2010/04/index.html' />
	<link rel='archives' title='March 2010' href='../../../../2010/03/index.html' />
	<link rel='archives' title='February 2010' href='../../../../2010/02/index.html' />
	<link rel='archives' title='January 2010' href='../../../../2010/01/index.html' />
	<link rel='archives' title='September 2009' href='../../../../2009/09/index.html' />
	<link rel='archives' title='May 2009' href='../../../../2009/05/index.html' />
	<link rel='archives' title='April 2009' href='../../../../2009/04/index.html' />
	<link rel='archives' title='January 2009' href='../../../../2009/01/index.html' />
	<link rel='archives' title='December 2008' href='../../../../2008/12/index.html' />
	<link rel='archives' title='November 2008' href='../../../../2008/11/index.html' />
	<link rel='archives' title='October 2008' href='../../../../2008/10/index.html' />
	<link rel='archives' title='September 2008' href='../../../../2008/09/index.html' />
	<link rel='archives' title='August 2008' href='../../../../2008/08/index.html' />
	<link rel='archives' title='July 2008' href='../../../../2008/07/index.html' />
	<link rel='archives' title='June 2008' href='../../../../2008/06/index.html' />
	<link rel='archives' title='May 2008' href='../../../../2008/05/index.html' />
	<link rel='archives' title='April 2008' href='../../../../2008/04/index.html' />
	<link rel='archives' title='March 2008' href='../../../../2008/03/index.html' />
	<link rel='archives' title='February 2008' href='../../../../2008/02/index.html' />
	<link rel='archives' title='January 2008' href='../../../../2008/01/index.html' />
	<link rel='archives' title='November 2007' href='../../../../2007/11/index.html' />
	<link rel='archives' title='October 2007' href='../../../../2007/10/index.html' />
	<link rel='archives' title='September 2007' href='../../../../2007/09/index.html' />
	<link rel='archives' title='August 2007' href='../../../../2007/08/index.html' />
	<link rel='archives' title='July 2007' href='../../../../2007/07/index.html' />
	<link rel="alternate" type="application/rss+xml" title="Ian Bicking: a blog &raquo; Why doctest.js is better than Python&#8217;s doctest Comments Feed" href="feed/index.html" />
<script type='text/javascript' src='../../../../wp-includes/js/jquery/jquery.js?ver=1.7.2'></script>
<script type='text/javascript'>
/* <![CDATA[ */
var AJAXCommentPreview = {"loading":"Loading\u2026","error":"Preview error","emptyString":"","url":"http:\/\/blog.ianbicking.org\/wp-admin\/admin-ajax.php?action=ajax_comment_preview"};
/* ]]> */
</script>
<script type='text/javascript' src='../../../../wp-content/plugins/ajax-comment-preview/ajax-comment-preview.js?ver=2.4'></script>
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="../../../../xmlrpc.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="../../../../wp-includes/wlwmanifest.xml" /> 
<link rel='prev' title='Python Application Package' href='../../../../index.html?p=283' />
<meta name="generator" content="WordPress 3.4.2" />
<link rel='canonical' href='../../../../index.html?p=291' />
<link rel='shortlink' href='../../../../index.html?p=291' />
<link rel="stylesheet" href="../../../../wp-content/plugins/source-code-syntax-highlighting-plugin-for-wordpress/geshi.css"  type="text/css" />	<style type="text/css">.recentcomments a{display:inline !important;padding:0 !important;margin:0 !important;}</style>
        <style type="text/css" media="all">
/*<![CDATA[*/
body { font-size: 100%; }
body { font-family: tahoma, geneva, sans-serif; }
div.post-header, h2.post-title, p.post-date-single, h2.post-title-single, div.post-entry h1, div.post-entry h2, div.post-entry h3, div.post-entry h4, div.post-entry h5, div.post-entry h6, div.post-entry blockquote, div.post-footer, h3#comment-count, h4#comment-header, div#comments ol li p.comment-metadata, h4#respond { font-family: verdana, geneva, sans-serif; }
div.post-entry p { text-align: left; }
div#wrapper { width: 100%; }

/*]]>*/
</style>
</head>
<body>

<div id="wrapper">

	<div id="header" onclick="location.href='http://blog.ianbicking.org/';" style="cursor:pointer;">
		<h1 id="title"><a href="../../../../index.html" title="Ian Bicking: a blog">Ian Bicking: a blog</a></h1>
		<p id="description"></p>
	</div>
<!-- WP Theme Credits -->
<div style="display: none;">We can answer on question <a href="http://www.olnevhost.net/vps-hosting.html">what is VPS</a>? and
what is <a href="http://www.olnevhost.net/dedicated-servers.html"><strong>cheap dedicated servers</strong></a>?</div>
<!-- END HEADER -->
<div id="container">
	<div id="content" class="widecolumn">


		<div id="post-291" class="post single-post">
			<p class="post-date-single">{ 2012 10 02 }</p>
			<h2 class="post-title-single">Why doctest.js is better than Python&#8217;s doctest</h2>
			<div class="post-entry">
				<div class="document">
<p>I&#8217;ve been trying, not too successfully I&#8217;m afraid, to get more people to use <a class="reference external" href="http://doctestjs.org">doctest.js</a>.  There&#8217;s probably a few reasons people don&#8217;t.  They are all wrong!  Doctest.js is the best!</p>
<p>One issue in particular is that people (especially people in my Python-biased circles) are perhaps thrown off by Python&#8217;s doctest.  I think Python&#8217;s doctest is pretty nice, I enjoy testing with it, but there&#8217;s no question that it has a lot of problems.  I&#8217;ve even thought about trying to fix doctest, and even made a repository, but I only really got as far as <a class="reference external" href="https://github.com/ianb/doctest2/issues?direction=desc&amp;#038;sort=created&amp;#038;state=open">creating a list of issues I&#8217;d like to fix</a>. But, like so many before me, I never actually <em>made</em> those fixes. Doctest has, in its life, only really had a single period of improvement (in the time leading to Python 2.4).  That&#8217;s not a recipe for success.</p>
<p>Of course doctest.js takes inspiration from Python&#8217;s doctest, but I wrote it as a real test environment, not for a minimal use case.  In the process I fixed a bunch of issues with doctest, and in places Javascript has also provided helpful usability.</p>
<p>Some issues:</p>
<div class="section" id="doctest-js-output-is-predictable">
<h2>Doctest.js output is predictable</h2>
<p>The classic pitfall of Python&#8217;s doctest is printing a dictionary:</p>
<div class="dean_ch" style="white-space: wrap;"><br />
&gt;&gt;&gt; <span class="kw1">print</span> <span class="br0">&#123;</span><span class="st0">&quot;one&quot;</span>: <span class="nu0">1</span>, <span class="st0">&quot;two&quot;</span>: <span class="nu0">2</span><span class="br0">&#125;</span><br />
<span class="br0">&#123;</span><span class="st0">'two'</span>: <span class="nu0">2</span>, <span class="st0">'one'</span>: <span class="nu0">1</span><span class="br0">&#125;</span><br />
&nbsp;</div>
<p>The print order of a dictionary is arbitrary, based on a hash algorithm that can change, or mix things up as items are added or removed.  And to make it worse, the output <em>usually</em> stable, such that you can write tests that unexpectibly fragile.  But there&#8217;s no reason why <tt class="docutils literal"><span class="pre">dict.__repr__</span></tt> <em>must</em> use an arbitrary order.  Personally I take it as a bit of unfortunate laziness.</p>
<p>If doctest had used <tt class="docutils literal"><span class="pre">pprint</span></tt> for all of its printing it would have helped some.  But not enough, because this kind of code is fairly common:</p>
<div class="dean_ch" style="white-space: wrap;"><br />
<span class="kw1">def</span> <span class="kw4">__repr__</span><span class="br0">&#40;</span><span class="kw2">self</span><span class="br0">&#41;</span>:<br />
&nbsp; &nbsp; <span class="kw1">return</span> <span class="st0">'&lt;ThisClass attr=%r&gt;'</span> % <span class="kw2">self</span>.<span class="me1">attr</span><br />
&nbsp;</div>
<p>and that <tt class="docutils literal"><span class="pre">%r</span></tt> invokes a <tt class="docutils literal"><span class="pre">repr()</span></tt> that cannot be overridden.</p>
<p>In doctest.js I always try to make output predictable.  One reason this is fairly easy is that there&#8217;s nothing like <tt class="docutils literal"><span class="pre">repr()</span></tt> in Javascript, so doctest.js has its own implementation.  It&#8217;s like I started with pprint and no other notion existed.</p>
</div>
<div class="section" id="good-matching">
<h2>Good matching</h2>
<p>In addition to unpredictable output, there&#8217;s also just hard-to-match output.  Output might contain blank lines, for instance, and Python&#8217;s doctest requires a very ugly <tt class="docutils literal"><span class="pre">&lt;BLANKLINE&gt;</span></tt> token to handle that. Whitespace might not be normalized.  Maybe there&#8217;s boring output. Maybe there&#8217;s just a volatile item like a timestamp.</p>
<p>Doctest.js includes, by default, ellipsis: <tt class="docutils literal"><span class="pre">...</span></tt> matches any length of text.  But it also includes another wildcard, <tt class="docutils literal"><span class="pre">?</span></tt>, which matches just one number or word.  This avoids cases when the use of <tt class="docutils literal"><span class="pre">...</span></tt> swallows up too much when you just wanted to get a single word.</p>
<p>Also doctest.js doesn&#8217;t use <tt class="docutils literal"><span class="pre">...</span></tt> for other purposes.  In Python&#8217;s doctest <tt class="docutils literal"><span class="pre">...`</span></tt> is used for continuation lines, meaning you can&#8217;t just ignore output, like:</p>
<div class="dean_ch" style="white-space: wrap;"><br />
&gt;&gt;&gt; <span class="kw1">print</span> who_knows_what_this_returns<span class="br0">&#40;</span><span class="br0">&#41;</span><br />
...<br />
&nbsp;</div>
<p>Or even worse, you can&#8217;t ignore the beginning of an item:</p>
<div class="dean_ch" style="white-space: wrap;"><br />
&gt;&gt;&gt; <span class="kw1">print</span> some_request<br />
...<br />
<span class="me1">X</span>-Some-Header: foo<br />
...<br />
&nbsp;</div>
<p>The way I prefer to use doctest.js it doesn&#8217;t have <em>any</em> continuation line symbol (but if there is one, it&#8217;s <tt class="docutils literal"><span class="pre">&gt;</span></tt>).</p>
<p>Also doctest.js normalizes whitespace, normalizes <tt class="docutils literal"><span class="pre">&quot;</span></tt> and <tt class="docutils literal"><span class="pre">'</span></tt>, and just generally tries to be <em>reasonable</em>.</p>
</div>
<div class="section" id="doctest-js-tests-are-plain-javascript">
<h2>Doctest.js tests are plain Javascript</h2>
<p>Not many editors know how to syntax highlight and check doctests, with their <tt class="docutils literal"><span class="pre">&gt;&gt;&gt;</span></tt> in front of each line and so forth.  And the whole thing is tweaky, you need to use a continuation (<tt class="docutils literal"><span class="pre">...</span></tt>) on some lines, and start statements with <tt class="docutils literal"><span class="pre">&gt;&gt;&gt;</span></tt>.  It&#8217;s an awkward way to compose.</p>
<p>Doctest.js started out with the same notion, though with different symbols (<tt class="docutils literal"><span class="pre">$</span></tt> and <tt class="docutils literal"><span class="pre">&gt;</span></tt>).  But recently with the rise of a number of excellent parsers (I used <a class="reference external" href="http://esprima.org/">Esprima</a>) I&#8217;ve moved my own tests to another pattern:</p>
<div class="dean_ch" style="white-space: wrap;"><br />
<span class="kw1">print</span><span class="br0">&#40;</span>something<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><br />
// =&gt; expected output<br />
&nbsp;</div>
<p>This is already a fairly common way to write examples.  Like how you may have read pre-Python pseudocode and thought: <em>that looks like Python!</em>: doctest.js looks like example pseudocode.</p>
</div>
<div class="section" id="doctest-js-tests-are-self-describing">
<h2>Doctest.js tests are self-describing</h2>
<p>Python&#8217;s doctest has some options, some <em>important</em> options that effect the semantics of the test, that you can only turn on in the runner.  The most important option is ELLIPSIS.  Either your test was written to use ELLIPSIS or it wasn&#8217;t &#8211; that a test can&#8217;t self-describe its requirements means that test running is fragile.</p>
<p>I made <a class="reference external" href="http://pypi.python.org/pypi/dtopt">the hackiest package ever</a> to get around this in Python, but it&#8217;s hacky and lame.</p>
</div>
<div class="section" id="exception-handling-isn-t-special">
<h2>Exception handling isn&#8217;t special</h2>
<p>Python&#8217;s doctest treats exceptions differently from other output.  So if you print something before the exception, it is thrown away, never to be seen.  And you can&#8217;t use some of the same matching techniques.</p>
<p>Doctest.js just prints out exceptions, and it&#8217;s matched like anything else.</p>
<p>This particular case is one of several places where it feels like Python&#8217;s doctest is just being obstinate.  Doing it the right way isn&#8217;t harder.  Python&#8217;s doctest makes <em>debugging</em> exception cases really hard.</p>
</div>
<div class="section" id="doctest-js-has-a-concept-of-abort">
<h2>Doctest.js has a concept of &quot;abort&quot;</h2>
<p>I&#8217;m actually pretty okay with Python doctest&#8217;s notion that you just run all the tests, even when one fails.  Getting too many failures is a bit of a nuisance, but it&#8217;s not <em>that bad</em>.  But there&#8217;s no way to just give up, and there needs to be.  If you are relying on something to be importable, or some service to be available, there&#8217;s no point in going on with the tests.</p>
<p>Doctest.js lets you call <tt class="docutils literal"><span class="pre">Abort()</span></tt> and further tests are cancelled.</p>
</div>
<div class="section" id="distinguishing-between-debugging-output-and-deliberate-output">
<h2>Distinguishing between debugging output and deliberate output</h2>
<p>Maybe it&#8217;s my own fault for being a programming troglodite, but I use a lot of <tt class="docutils literal"><span class="pre">print</span></tt> for debugging.  This becomes a real problem with Python&#8217;s doctest, as it tracks all that printing and it causes tests to fail.</p>
<p>Javascript has something <em>specifically for</em> printing debugging output: <tt class="docutils literal"><span class="pre">console.log()</span></tt>.  Doctest.js doesn&#8217;t mess with that, it adds a new function <tt class="docutils literal"><span class="pre">print()</span></tt>.  Only stuff that is printed (not logged) is treated as expected output.  It&#8217;s like <tt class="docutils literal"><span class="pre">console.log()</span></tt> goes to stderr and <tt class="docutils literal"><span class="pre">print()</span></tt> goes to stdout.</p>
<p>Doctest.js also forces the developer to print everything they care about.  For better or worse Javascript has many more expressions than Python (including assignments), so looking at the result of an expression isn&#8217;t a good clue for whether you <em>care</em> about the result of an expression.  I&#8217;m not sure this is <em>better</em>, but it&#8217;s part of the difference.</p>
<p>Doctest.js also groups your printed statements according to the example you are in (an example being a block of code and an expected output).  This is much more helpful than watching a giant stream of output go to the console (the browser console or terminal).</p>
</div>
<div class="section" id="doctest-js-handles-async-code">
<h2>Doctest.js handles async code</h2>
<p>This admittedly isn&#8217;t that big a deal for Python, but for Javascript it is a real problem.  Not a problem for doctest.js in particular, but a problem for any Javascript test framework.  You want to test return values, but lots of functions don&#8217;t &quot;return&quot;, instead they call some callback or create some kind of promise object, and you have to test for side effects.</p>
<p>Doctest.js I think has a <a class="reference external" href="http://doctestjs.org/tutorial.html#async">really great answer for this</a>, which is not so much to say that Python&#8217;s doctest is so much worse, but in the context of Javascript doctest.js has something really useful and unique.  If callback-driven async code had ever been very popular in Python then this sort of feature would be nice there too.</p>
</div>
<div class="section" id="the-browser-is-a-great-environment">
<h2>The browser is a great environment</h2>
<p>A lot of where doctest.js is much better than Python&#8217;s doctest is simply that it has a much more powerful environment for displaying results.  It can highlight failed or passing tests.  When there&#8217;s a wildcard in expected output, it can show the actual output without adding any particular extra distraction.  It can group console messages with the tests they go with.  It can show <em>both</em> a simple failure message, and a detailed line-by-line comparison.  All these details make it easy to identify what went wrong and fix it.  The browser gives a rich and navigable interface.</p>
<p>I&#8217;d <em>like</em> to get doctest.js working well on Node.js (right now it works, but is not appealing), but I just can&#8217;t bring myself to give up the browser.  I have to figure out a good hybrid.</p>
</div>
<div class="section" id="python-s-doctest-lacks-a-champion">
<h2>Python&#8217;s doctest lacks a champion</h2>
<p>This is ultimately the reason Python&#8217;s doctest has all these problems: no one cares about it, no one feels responsible for it, and no one feels empowered to make improvements to it.  And to make things worse there is a cadre of people that will respond to suggestions with their own criticisms that doctest should never be used beyond its original niche, that it&#8217;s constraints are features.</p>
</div>
<div class="section" id="doctest-is-still-great">
<h2>Doctest is still great</h2>
<p>I&#8217;m ragging on Python&#8217;s doctest only because I love it.  I wish it was better, and I made doctest.js in a way I wish Python&#8217;s doctest was made.  Doctest, and more generally example/expectation oriented code, is a great way to explain things, to make tests readable, to make test-driven development feasible, to create an environment that errs on the side of over-testing instead of under-testing, and to make failures and resolutions symmetric.  It&#8217;s still <a class="reference external" href="../../../../behavior-driven-programming.html">vastly superior to BDD</a>, avoiding all BDD&#8217;s aping of readability while still embracing the sense of test-as-narrative.</p>
<p>But, more to the point: <a class="reference external" href="http://doctestjs.org">use doctest.js</a>, <a class="reference external" href="http://doctestjs.org/tutorial.html">read the tutorial</a>, or <a class="reference external" href="http://doctestjs.org/try.html">try it in the browser</a>.  I swear, it&#8217;s <em>really nice to use</em>.</p>
</div>
</div>
<p>Automatically generated list of related posts:</p><ol>
<li><a href='../../../../2007/08/23/doctest-for-ruby/index.html' rel='bookmark' title='Doctest for Ruby'>Doctest for Ruby</a> <small>Finally, someone wrote a version of doctest for Ruby. Recently...</small></li>
<li><a href='../../../../2008/07/31/a-doctest-wishlist/index.html' rel='bookmark' title='A Doctest Wishlist'>A Doctest Wishlist</a> <small>Lately I&#8217;ve been doing most of my testing with doctest,...</small></li>
<li><a href='../../../../index.html?p=239' rel='bookmark' title='Doctest.js &amp; Callbacks'>Doctest.js &#038; Callbacks</a> <small>Many years ago I wrote a fairly straight-forward port of...</small></li>
<li><a href='../../../../2007/08/02/atom-models/index.html' rel='bookmark' title='Atom Models'>Atom Models</a> <small>I&#8217;ve been doing a bit more with Atom lately. First,...</small></li>
<li><a href='../../../../2010/03/03/toppcloud-renamed-to-silver-lining/index.html' rel='bookmark' title='toppcloud renamed to Silver Lining'>toppcloud renamed to Silver Lining</a> <small>After some pondering at PyCon, I decided on a new...</small></li>
</ol>											</div><!-- END POST-ENTRY  -->
			<!-- <rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
			xmlns:dc="http://purl.org/dc/elements/1.1/"
			xmlns:trackback="http://madskills.com/public/xml/rss/module/trackback/">
		<rdf:Description rdf:about="http://blog.ianbicking.org/2012/10/02/why-doctest-js-is-better-than-pythons-doctest/"
    dc:identifier="http://blog.ianbicking.org/2012/10/02/why-doctest-js-is-better-than-pythons-doctest/"
    dc:title="Why doctest.js is better than Python&#8217;s doctest"
    trackback:ping="http://blog.ianbicking.org/2012/10/02/why-doctest-js-is-better-than-pythons-doctest/trackback/" />
</rdf:RDF> -->
			<div class="post-footer">
				<p>Posted by Ian on Tuesday, October 2nd, 2012, at 9:26 pm, and filed under <a href="../../../../category/javascript/index.html" title="View all posts in Javascript" rel="category tag">Javascript</a>, <a href="../../../../category/mozilla/index.html" title="View all posts in Mozilla" rel="category tag">Mozilla</a>, <a href="../../../../category/programming/index.html" title="View all posts in Programming" rel="category tag">Programming</a>, <a href="../../../../category/python/index.html" title="View all posts in Python" rel="category tag">Python</a>.</p>
				<p>You can <a href="../../../../index.html?p=291#respond">post a comment</a>.
				Comments have a <a href='feed/index.html'>feed</a>.</p>
			</div><!-- END POST-FOOTER -->
		</div><!-- END POST -->

<div id="comments">




<h4 id="comments">19 Comments</h4>
 <ul class="commentlist">
		<li class="comment even thread-even depth-1" id="comment-195287">
				<div id="div-comment-195287" class="comment-body">
				<div class="comment-author vcard">
		<img alt='' src='http://1.gravatar.com/avatar/5faa8f7f53d3ac658c4dfa4bd04a2ee3?s=32&amp;d=http%3A%2F%2Fblog.ianbicking.org%2Fwp-includes%2Fimages%2Fblank.gif&amp;r=PG' class='avatar avatar-32 photo' height='32' width='32' />		<cite class="fn"><a href='http://gedmin.as' rel='external nofollow' class='url'>Marius Gedminas</a></cite> <span class="says">says:</span>		</div>

		<div class="comment-meta commentmetadata"><a href="comment-page-1/index.html#comment-195287">
			October 3, 2012 at 12:58 am</a>		</div>

		<p>I think I ought to bring <a href="http://pypi.python.org/pypi/manuel" rel="nofollow">Manuel</a> to your attention, since it fixes at least some of your issues with Python&#8217;s doctest (like supporting Sphinx markup).</p>

		<div class="reply">
				</div>
				</div>
		</li>
		<li class="comment odd alt thread-odd thread-alt depth-1 parent" id="comment-195288">
				<div id="div-comment-195288" class="comment-body">
				<div class="comment-author vcard">
		<img alt='' src='http://1.gravatar.com/avatar/f3ba3ecffd20251d73749afbfa636786?s=32&amp;d=http%3A%2F%2Fblog.ianbicking.org%2Fwp-includes%2Fimages%2Fblank.gif&amp;r=PG' class='avatar avatar-32 photo' height='32' width='32' />		<cite class="fn">Nick Coghlan</cite> <span class="says">says:</span>		</div>

		<div class="comment-meta commentmetadata"><a href="comment-page-1/index.html#comment-195288">
			October 3, 2012 at 1:17 am</a>		</div>

		<p>A few thoughts&#8230;</p>

<p>I&#8217;m not sure I understand the &#8220;not self-describing&#8221; complaint. What part of &#8220;# doctest: +ELLIPSIS&#8221; (etc) doesn&#8217;t allow a test to specify the required features? (although there&#8217;s an unfortunate bug in the current docs generation where these are being stripped from the examples in the section that is supposed to explain them: <a href="http://bugs.python.org/issue12947" rel="nofollow">http://bugs.python.org/issue12947</a>)</p>

<p>The dict/set ordering issue will also become significantly harder to get wrong inadvertently now that most hashes will be randomised (and collections.OrderedDict provides a nicer way to display sorted dictionaries rather than relying on lists of 2-tuples).</p>

<p>Doesn&#8217;t writing your debugging messages to sys.stderr have the same effect as using console.log()?</p>

<p>doctest has &#8220;# doctest: +NORMALIZE&#95;WHITESPACE&#8221; to ignore whitespace details and &#8220;REPORT&#95;ONLY&#95;FIRST&#95;FAILURE&#8221; to trim subsequent failures from the output.</p>

<p>I do like the idea of an alternate &#8220;# =&gt; output&#8221; notation for embedded doctest results in a copy-pasteable format. A &#8220;???&#8221; wild card (that can also be used for blank line matching) would also be interesting.</p>

<p>However, if the folks that prefer doctest to unittest for their testing needs, and find the current state of doctest to be inadequate, aren&#8217;t prepared to contribute to it, how is it supposed to be improved? unittest languished for years too, until Michael Foord took it over. Now it&#8217;s to the point where all my 2.6 tests depend on unittest2, because the 2.7+ unittest is so much better than the 2.6 provided one. A doctest2 could easily serve the same purpose (and yes, in the past, I&#8217;ve been guilty of not wanting to let doctest out of the niche I considered it suited to. I&#8217;ve learned better).</p>

		<div class="reply">
				</div>
				</div>
		<ul class='children'>
		<li class="comment byuser comment-author-admin bypostauthor even depth-2" id="comment-195289">
				<div id="div-comment-195289" class="comment-body">
				<div class="comment-author vcard">
		<img alt='' src='http://0.gravatar.com/avatar/cc8334869c9d2a9e603017f2da805eb3?s=32&amp;d=http%3A%2F%2Fblog.ianbicking.org%2Fwp-includes%2Fimages%2Fblank.gif&amp;r=PG' class='avatar avatar-32 photo' height='32' width='32' />		<cite class="fn">Ian</cite> <span class="says">says:</span>		</div>

		<div class="comment-meta commentmetadata"><a href="comment-page-1/index.html#comment-195289">
			October 3, 2012 at 1:55 am</a>		</div>

		<blockquote>
  <p>I’m not sure I understand the “not self-describing” complaint. What part of “# doctest: +ELLIPSIS” (etc) doesn’t allow a test to specify the required features?</p>
</blockquote>

<p>Simply that you have to do it on each test, and it&#8217;s both tedious and distracting.  I use <code>...</code> on probably half my tests.  <code>print func() # doctest: +ELLIPSIS</code> literally doubles the length of the line, and is not unrepresentative (and personally I find it hard to even get that comment quite right).</p>

<blockquote>
  <p>The dict/set ordering issue will also become significantly harder to get wrong inadvertently now that most hashes will be randomised (and collections.OrderedDict provides a nicer way to display sorted dictionaries rather than relying on lists of 2-tuples).</p>
</blockquote>

<p>Harder to get wrong, but no easier to get right.  I suppose <code>collections.OrderedDict(sorted(my_dict.iteritems()))</code> would give a consistent repr.  Not exactly appealing!  And if anyone uses <code>%r</code> you are left with no resolution.  If you allowed global replacement of <code>repr()</code> then that would make tests easier to write.  <code>sys.displayhook()</code> is half of the solution, but isn&#8217;t nearly universal enough.</p>

<blockquote>
  <p>Doesn’t writing your debugging messages to sys.stderr have the same effect as using console.log()?</p>
</blockquote>

<p>No.  I seem to remember it actually being swallowed in some cases, and I&#8217;ve had to write to <code>sys.__stderr__</code>.  Also the print statements I used elsewhere don&#8217;t normally print to stderr, so I&#8217;d have to adjust my &#8220;normal&#8221; debugging to be &#8220;doctest&#8221; debugging.  Lastly they aren&#8217;t grouped in any sensible way; normally stdout and stderr are mixed, and mixed in a fairly useful way – with doctest they are disassociated completely.</p>

<blockquote>
  <p>doctest has “# doctest: +NORMALIZE&#95;WHITESPACE” to ignore whitespace details and “REPORT&#95;ONLY&#95;FIRST&#95;FAILURE” to trim subsequent failures from the output.</p>
</blockquote>

<p>Somehow I&#8217;d missed <code>NORMALIZE_WHITESPACE</code>.  <code>REPORT_ONLY_FIRST_FAILURE</code> is useful for some cases, but not when you want to quickly fail due to failed prerequisites.  The browser&#8217;s more navigable interface replaces <code>REPORT_ONLY_FIRST_FAILURE</code>, while <code>Abort()</code> handles prerequisite failures.</p>

<blockquote>
  <p>However, if the folks that prefer doctest to unittest for their testing needs, and find the current state of doctest to be inadequate, aren’t prepared to contribute to it, how is it supposed to be improved? unittest languished for years too, until Michael Foord took it over. Now it’s to the point where all my 2.6 tests depend on unittest2, because the 2.7+ unittest is so much better than the 2.6 provided one. A doctest2 could easily serve the same purpose (and yes, in the past, I’ve been guilty of not wanting to let doctest out of the niche I considered it suited to. I’ve learned better).</p>
</blockquote>

<p>It would be great if doctest was improved.  Some people have considered it, who knows, maybe someone will take this as inspiration to actually do it.  There are a few places where Javascript has some advantages, often more through convention than the language itself; but there are more than enough cases where doctest could be fixed just for Python itself.  And with just a <em>little</em> help from Python core it could be way better (especially the ability to replace <code>repr()</code>).</p>

<p>But in order for someone to be inspired to improve doctest they also have to see that it can be more than what it is.  Maybe this will outline some ways it could be more.  But I&#8217;m no longer the person to do that.  (At this point I&#8217;m even doing functional testing of my Python code using doctest.js.)</p>

		<div class="reply">
				</div>
				</div>
		</li>
</ul>
</li>
		<li class="comment odd alt thread-even depth-1 parent" id="comment-195290">
				<div id="div-comment-195290" class="comment-body">
				<div class="comment-author vcard">
		<img alt='' src='http://1.gravatar.com/avatar/71229c0167172520e0582dbf29cbd88f?s=32&amp;d=http%3A%2F%2Fblog.ianbicking.org%2Fwp-includes%2Fimages%2Fblank.gif&amp;r=PG' class='avatar avatar-32 photo' height='32' width='32' />		<cite class="fn">Wolfgang Schnerring</cite> <span class="says">says:</span>		</div>

		<div class="comment-meta commentmetadata"><a href="comment-page-1/index.html#comment-195290">
			October 3, 2012 at 2:54 am</a>		</div>

		<p>In my opinion, doctest is fit for only one, rather narrow use case: checking that code examples sprinkled into narrative documentation don&#8217;t contain errors or typos. Or, to put it the other way around, I think doctest (the paradigm, regardless how good its mechanical execution might be) is a rather bad tool for writing either tests or documentation.</p>

<p>Reasons against writing tests with doctest:</p>

<ol>
<li><p>Too big units / no isolation. The format tilts you towards writing stories, i.e. later things building upon stuff that has happened before. In tests, I want to specify lots of small, disjunct pieces of functionality, and the doctest format makes that difficult to impossible. (Even if I&#8217;d create a whole bunch of separate test files &#8212; which I&#8217;d consider tedious to manage &#8212; I&#8217;d still have no doctest-y way of sharing setup between them.)</p></li>
<li><p>Comparing representations is not as useful as comparing intentions. One, many domain objects might not have a suitable repr, then I either have to provide one specifically for the tests, or am reduced to &#8220;foo == bar // =&gt; true&#8221;, which somewhat defeats the purpose. Two, you&#8217;ll have to repeat the literals, which is both unnecessarily repetitive and loses the intention: For example, I have a timestamp &#8220;before&#8221; something occured, and one &#8220;after&#8221;. Either I have to spell out the comparison that &#8220;something.timestamp // =&gt; datetime(2012, 10, 3)&#8221;, which doesn&#8217;t tell me at a glance that this is the &#8220;before&#8221; timestamp, or I&#8217;m back to &#8220;something.timestamp == before // =&gt; true&#8221;.</p></li>
</ol>

<p>Reasons against writing (most) documentation with doctest: (These are weaker than those against testing, since they boil down to, writing documentation is all about concepts and natural language, no tool in the world will help you with that.)</p>

<ol>
<li><p>While doctest is good for examples, it doesn&#8217;t help you with the conceptual level, which is the most important level of documentation. You might even be tempted to not think about the conceptual level at all.</p></li>
<li><p>The things you want to show are in danger of getting lost in the noise of setting up the environment (or you have to extract the setup, which makes in invisible and thus unclear, which also is not ideal for documentation).</p></li>
</ol>

		<div class="reply">
				</div>
				</div>
		<ul class='children'>
		<li class="comment even depth-2" id="comment-195294">
				<div id="div-comment-195294" class="comment-body">
				<div class="comment-author vcard">
		<img alt='' src='http://1.gravatar.com/avatar/9bca25e5dfc91356e5e3356277fa2868?s=32&amp;d=http%3A%2F%2Fblog.ianbicking.org%2Fwp-includes%2Fimages%2Fblank.gif&amp;r=PG' class='avatar avatar-32 photo' height='32' width='32' />		<cite class="fn"><a href='http://benjiyork.com' rel='external nofollow' class='url'>Benji York</a></cite> <span class="says">says:</span>		</div>

		<div class="comment-meta commentmetadata"><a href="comment-page-1/index.html#comment-195294">
			October 3, 2012 at 7:26 am</a>		</div>

		<p>Wolfgang, you might be interested in Manuel&#8217;s isolation plugin and its ability to let you easily write your own comparisons for test results.</p>

<p>Regarding your documentation point 1, I agree in spirit.  Documentation should be about communicating first and foremost.  My hope is that people can use Manuel to implement their own tests of domain-specific concepts.</p>

<p>For example, if I were documenting a large network&#8217;s layout with the Sphinx Graphviz plugin (<a href="http://sphinx.pocoo.org/ext/graphviz.html" rel="nofollow">http://sphinx.pocoo.org/ext/graphviz.html</a>) I would want tests that could read those layouts and verify that they matched reality.</p>

<p>Regarding your documentation point 2, Manuel&#8217;s footnote functionality (<a href="http://packages.python.org/manuel/#footnotes" rel="nofollow">http://packages.python.org/manuel/#footnotes</a>) and the ability to hide parts of a document in reST comments (also available in stock doctests) help quite a bit.</p>

		<div class="reply">
				</div>
				</div>
		</li>
</ul>
</li>
		<li class="comment odd alt thread-odd thread-alt depth-1 parent" id="comment-195291">
				<div id="div-comment-195291" class="comment-body">
				<div class="comment-author vcard">
		<img alt='' src='http://1.gravatar.com/avatar/9bca25e5dfc91356e5e3356277fa2868?s=32&amp;d=http%3A%2F%2Fblog.ianbicking.org%2Fwp-includes%2Fimages%2Fblank.gif&amp;r=PG' class='avatar avatar-32 photo' height='32' width='32' />		<cite class="fn"><a href='http://benjiyork.com' rel='external nofollow' class='url'>Benji York</a></cite> <span class="says">says:</span>		</div>

		<div class="comment-meta commentmetadata"><a href="comment-page-1/index.html#comment-195291">
			October 3, 2012 at 7:15 am</a>		</div>

		<p>As Marius mentioned, Manuel is my attempt at taking doctest to the next level.  It does so by making doctest one of a suite of document-oriented testing devices that you can use simultaneously.</p>

<p>The intent is that since doctest is essentially frozen, Manuel lets you write doctest extensions or write non-doctest document test mechanisms.  For example the footnote extension lets you move incidental code (like setup code) out of the flow of the main document and it works with doctest tests or any other Manuel plugin.</p>

<p>The Manuel docs are tested using Manuel and provide a good example of how it can be used:  (click on the &#8220;Show Source&#8221; link to see the markup).</p>

		<div class="reply">
				</div>
				</div>
		<ul class='children'>
		<li class="comment even depth-2" id="comment-195292">
				<div id="div-comment-195292" class="comment-body">
				<div class="comment-author vcard">
		<img alt='' src='http://1.gravatar.com/avatar/9bca25e5dfc91356e5e3356277fa2868?s=32&amp;d=http%3A%2F%2Fblog.ianbicking.org%2Fwp-includes%2Fimages%2Fblank.gif&amp;r=PG' class='avatar avatar-32 photo' height='32' width='32' />		<cite class="fn"><a href='http://benjiyork.com' rel='external nofollow' class='url'>Benji York</a></cite> <span class="says">says:</span>		</div>

		<div class="comment-meta commentmetadata"><a href="comment-page-1/index.html#comment-195292">
			October 3, 2012 at 7:16 am</a>		</div>

		<p>Apparently I suck at markdown.  Here is the Manuel docs link: <a href="http://packages.python.org/manuel/" rel="nofollow">http://packages.python.org/manuel/</a></p>

		<div class="reply">
				</div>
				</div>
		</li>
</ul>
</li>
		<li class="comment odd alt thread-even depth-1 parent" id="comment-195295">
				<div id="div-comment-195295" class="comment-body">
				<div class="comment-author vcard">
		<img alt='' src='http://1.gravatar.com/avatar/9bca25e5dfc91356e5e3356277fa2868?s=32&amp;d=http%3A%2F%2Fblog.ianbicking.org%2Fwp-includes%2Fimages%2Fblank.gif&amp;r=PG' class='avatar avatar-32 photo' height='32' width='32' />		<cite class="fn"><a href='http://benjiyork.com' rel='external nofollow' class='url'>Benji York</a></cite> <span class="says">says:</span>		</div>

		<div class="comment-meta commentmetadata"><a href="comment-page-1/index.html#comment-195295">
			October 3, 2012 at 7:52 am</a>		</div>

		<p>Ian, you might be interested in doctest&#8217;s normalization functionality.  It lets you pre-process the test output so as to replace extraneous bits (like the addresses in reprs) with placeholders.  zope.testing includes a regular expression normalizer that is really nice (and should probably be packaged separately): <a href="http://svn.zope.org/&#42;checkout&#42;/zope.testing/trunk/src/zope/testing/renormalizing.txt" rel="nofollow">http://svn.zope.org/<em>checkout</em>/zope.testing/trunk/src/zope/testing/renormalizing.txt</a></p>

		<div class="reply">
				</div>
				</div>
		<ul class='children'>
		<li class="comment byuser comment-author-admin bypostauthor even depth-2 parent" id="comment-195296">
				<div id="div-comment-195296" class="comment-body">
				<div class="comment-author vcard">
		<img alt='' src='http://0.gravatar.com/avatar/cc8334869c9d2a9e603017f2da805eb3?s=32&amp;d=http%3A%2F%2Fblog.ianbicking.org%2Fwp-includes%2Fimages%2Fblank.gif&amp;r=PG' class='avatar avatar-32 photo' height='32' width='32' />		<cite class="fn">Ian</cite> <span class="says">says:</span>		</div>

		<div class="comment-meta commentmetadata"><a href="comment-page-1/index.html#comment-195296">
			October 3, 2012 at 9:33 am</a>		</div>

		<p>In the past I&#8217;ve done a lot of experiments with OutputChecker implementations, which seems to be how renormalization also works.  It has potential, but it never seemed to stick for me.  The inability for a doctest to install its own checker was a particular problem – it means the test isn&#8217;t very portable, and wiring up the checkers and whatnot is nontrivial, especially depending on your runner environment.  It should really work like:</p>

<pre><code>&gt;&gt;&gt; from mynormalizer import DoctestNormalizer
&gt;&gt;&gt; install_checker(DoctestNormalizer())
</code></pre>

<p>Same thing for doctest options.  Make it so in Manuel! ;)</p>

		<div class="reply">
				</div>
				</div>
		<ul class='children'>
		<li class="comment odd alt depth-3 parent" id="comment-195319">
				<div id="div-comment-195319" class="comment-body">
				<div class="comment-author vcard">
		<img alt='' src='http://1.gravatar.com/avatar/d20c9b94e08963eba85ff57aa177ac14?s=32&amp;d=http%3A%2F%2Fblog.ianbicking.org%2Fwp-includes%2Fimages%2Fblank.gif&amp;r=PG' class='avatar avatar-32 photo' height='32' width='32' />		<cite class="fn">Paul Brian</cite> <span class="says">says:</span>		</div>

		<div class="comment-meta commentmetadata"><a href="comment-page-1/index.html#comment-195319">
			October 11, 2012 at 9:28 am</a>		</div>

		<p>Like everyone else I have tried monkeypatching the OutputChecker on exactly this issue. Oddly doctest is just inconsisitent in how it passes things like OutputCheckers around and could be cleaned up.  I just punted on actually using my monkeypatches in real life.</p>

<p><a href="https://github.com/lifeisstillgood/mikado.oss.doctest&#95;additions" rel="nofollow">https://github.com/lifeisstillgood/mikado.oss.doctest_additions</a></p>

<p>If Manuel is open to it I would be interested in porting this</p>

		<div class="reply">
				</div>
				</div>
		<ul class='children'>
		<li class="comment even depth-4" id="comment-195320">
				<div id="div-comment-195320" class="comment-body">
				<div class="comment-author vcard">
		<img alt='' src='http://1.gravatar.com/avatar/9bca25e5dfc91356e5e3356277fa2868?s=32&amp;d=http%3A%2F%2Fblog.ianbicking.org%2Fwp-includes%2Fimages%2Fblank.gif&amp;r=PG' class='avatar avatar-32 photo' height='32' width='32' />		<cite class="fn"><a href='http://benjiyork.com' rel='external nofollow' class='url'>Benji York</a></cite> <span class="says">says:</span>		</div>

		<div class="comment-meta commentmetadata"><a href="comment-page-1/index.html#comment-195320">
			October 11, 2012 at 11:24 am</a>		</div>

		<p>Paul, if I am understanding the code correctly, you should be able to write a Manuel plugin that would do this.  Take a look at the plugins that come with Manuel for inspiration.  If you have any questions, feel free to contact me.  My email address is <a href="mailto:benji@benjiyork.com">benji@benjiyork.com</a>.</p>

		<div class="reply">
				</div>
				</div>
		</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
		<li class="comment odd alt thread-odd thread-alt depth-1 parent" id="comment-195298">
				<div id="div-comment-195298" class="comment-body">
				<div class="comment-author vcard">
		<img alt='' src='http://1.gravatar.com/avatar/787d7ca239e1bf116028ea1028b245b8?s=32&amp;d=http%3A%2F%2Fblog.ianbicking.org%2Fwp-includes%2Fimages%2Fblank.gif&amp;r=PG' class='avatar avatar-32 photo' height='32' width='32' />		<cite class="fn">Eric Pierce</cite> <span class="says">says:</span>		</div>

		<div class="comment-meta commentmetadata"><a href="comment-page-1/index.html#comment-195298">
			October 3, 2012 at 9:23 pm</a>		</div>

		<p>Your post inspired me. I love doctest, but I think it could be considerably more awesome. I went ahead and [forked your doctest2 repo](<a href="https://github.com/wapcaplet/doctest2" rel="nofollow">https://github.com/wapcaplet/doctest2</a>) to begin working on it. I&#8217;m willing to manage this effort if anyone else would like to get involved.</p>

		<div class="reply">
				</div>
				</div>
		<ul class='children'>
		<li class="comment byuser comment-author-admin bypostauthor even depth-2 parent" id="comment-195301">
				<div id="div-comment-195301" class="comment-body">
				<div class="comment-author vcard">
		<img alt='' src='http://0.gravatar.com/avatar/cc8334869c9d2a9e603017f2da805eb3?s=32&amp;d=http%3A%2F%2Fblog.ianbicking.org%2Fwp-includes%2Fimages%2Fblank.gif&amp;r=PG' class='avatar avatar-32 photo' height='32' width='32' />		<cite class="fn">Ian</cite> <span class="says">says:</span>		</div>

		<div class="comment-meta commentmetadata"><a href="comment-page-1/index.html#comment-195301">
			October 4, 2012 at 9:52 am</a>		</div>

		<p>It sounds to me like contributing to Manuel would be the best option.</p>

		<div class="reply">
				</div>
				</div>
		<ul class='children'>
		<li class="comment odd alt depth-3 parent" id="comment-195303">
				<div id="div-comment-195303" class="comment-body">
				<div class="comment-author vcard">
		<img alt='' src='http://1.gravatar.com/avatar/787d7ca239e1bf116028ea1028b245b8?s=32&amp;d=http%3A%2F%2Fblog.ianbicking.org%2Fwp-includes%2Fimages%2Fblank.gif&amp;r=PG' class='avatar avatar-32 photo' height='32' width='32' />		<cite class="fn">Eric Pierce</cite> <span class="says">says:</span>		</div>

		<div class="comment-meta commentmetadata"><a href="comment-page-1/index.html#comment-195303">
			October 4, 2012 at 4:04 pm</a>		</div>

		<p>Manuel does look nice, based on a brief perusal of the docs&#8211;I&#8217;ll have to give it a try. But I must say, one of the best things about doctest is that it&#8217;s in the standard library included with Python. Is there reason to believe that patches to the built-in doctest would not be accepted? (referring to Benji&#8217;s comment &#8220;since doctest is essentially frozen&#8230;&#8221;) I&#8217;ve never contributed to core Python development before, although I have been looking for an excuse to. If doctest needs a champion, then I would like to be that champion, or even just one of the champion&#8217;s faithful sidekicks. :-)</p>

		<div class="reply">
				</div>
				</div>
		<ul class='children'>
		<li class="comment byuser comment-author-admin bypostauthor even depth-4" id="comment-195304">
				<div id="div-comment-195304" class="comment-body">
				<div class="comment-author vcard">
		<img alt='' src='http://0.gravatar.com/avatar/cc8334869c9d2a9e603017f2da805eb3?s=32&amp;d=http%3A%2F%2Fblog.ianbicking.org%2Fwp-includes%2Fimages%2Fblank.gif&amp;r=PG' class='avatar avatar-32 photo' height='32' width='32' />		<cite class="fn">Ian</cite> <span class="says">says:</span>		</div>

		<div class="comment-meta commentmetadata"><a href="comment-page-1/index.html#comment-195304">
			October 4, 2012 at 4:38 pm</a>		</div>

		<p>I&#8217;m sure improvements to doctest can be made and accepted into core, though some of the more ambitious things may meet resistance, certainly anything that would break current tests.  I tend to just fork stuff, but that&#8217;s not always the right thing to do – you&#8217;ll certainly help a broader audience by working in the standard library.</p>

		<div class="reply">
				</div>
				</div>
		</li>
		<li class="comment odd alt depth-4 parent" id="comment-195321">
				<div id="div-comment-195321" class="comment-body">
				<div class="comment-author vcard">
		<img alt='' src='http://1.gravatar.com/avatar/d20c9b94e08963eba85ff57aa177ac14?s=32&amp;d=http%3A%2F%2Fblog.ianbicking.org%2Fwp-includes%2Fimages%2Fblank.gif&amp;r=PG' class='avatar avatar-32 photo' height='32' width='32' />		<cite class="fn">Paul Brian</cite> <span class="says">says:</span>		</div>

		<div class="comment-meta commentmetadata"><a href="comment-page-1/index.html#comment-195321">
			October 11, 2012 at 12:24 pm</a>		</div>

		<p>Can I suggest a two-pronged approach</p>

<p>I would really like to solve the OutputChecker issue, and have some monkeypatching code as a hacky solution already, so that might make a good first stage.</p>

<p>I would suggest we try and provide a doctest2 that is a managed patching of doctest, with no breaking of current tests (!) &#8211; that is &#8220;pip install doctest2&#8243; will effectively monkeypatch the doctest code with the changed code.</p>

<p>All the effort is in quietly and reversibly patching, rather than fixing the doctest code.</p>

<p>So &#8211; if the changes get approved and put in batteries, we simply slip that set of patches out of the doctest2, otherwise there is a upgrade path for those wanting doctest to be more awesome.</p>

		<div class="reply">
				</div>
				</div>
		<ul class='children'>
		<li class="comment even depth-5" id="comment-195322">
				<div id="div-comment-195322" class="comment-body">
				<div class="comment-author vcard">
		<img alt='' src='http://1.gravatar.com/avatar/787d7ca239e1bf116028ea1028b245b8?s=32&amp;d=http%3A%2F%2Fblog.ianbicking.org%2Fwp-includes%2Fimages%2Fblank.gif&amp;r=PG' class='avatar avatar-32 photo' height='32' width='32' />		<cite class="fn">Eric Pierce</cite> <span class="says">says:</span>		</div>

		<div class="comment-meta commentmetadata"><a href="comment-page-1/index.html#comment-195322">
			October 11, 2012 at 3:07 pm</a>		</div>

		<p>Paul: That sounds like a good approach. Rather than fill up Ian&#8217;s blog with further discussion, I suggest we take this over to github. I started a conversation in an issue where we can continue this topic: <a href="https://github.com/ianb/doctest2/issues/22" rel="nofollow">https://github.com/ianb/doctest2/issues/22</a></p>

		<div class="reply">
				</div>
				</div>
		</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
		<li class="comment odd alt thread-even depth-1" id="comment-196267">
				<div id="div-comment-196267" class="comment-body">
				<div class="comment-author vcard">
		<img alt='' src='http://1.gravatar.com/avatar/f5123c551decb6617e025231a1fe0863?s=32&amp;d=http%3A%2F%2Fblog.ianbicking.org%2Fwp-includes%2Fimages%2Fblank.gif&amp;r=PG' class='avatar avatar-32 photo' height='32' width='32' />		<cite class="fn"><a href='http://redealmeidense.com.br/portalx/modules/' rel='external nofollow' class='url'>this website</a></cite> <span class="says">says:</span>		</div>

		<div class="comment-meta commentmetadata"><a href="comment-page-1/index.html#comment-196267">
			October 19, 2012 at 11:47 am</a>		</div>

		<p>Hi, I think your website might be having browser compatibility 
issues. When I look at your blog in Ie, it looks fine but when 
opening in Internet Explorer, it has some overlapping.
I just wanted to give you a quick heads up! Other then that, very good blog!</p>

		<div class="reply">
				</div>
				</div>
		</li>
		<li class="comment even thread-odd thread-alt depth-1" id="comment-228633">
				<div id="div-comment-228633" class="comment-body">
				<div class="comment-author vcard">
		<img alt='' src='http://0.gravatar.com/avatar/ccfd955c874b90ce45e0c4a5916ef08c?s=32&amp;d=http%3A%2F%2Fblog.ianbicking.org%2Fwp-includes%2Fimages%2Fblank.gif&amp;r=PG' class='avatar avatar-32 photo' height='32' width='32' />		<cite class="fn"><a href='http://www.mirsa.com.tr' rel='external nofollow' class='url'>havalandırma</a></cite> <span class="says">says:</span>		</div>

		<div class="comment-meta commentmetadata"><a href="comment-page-1/index.html#comment-228633">
			January 10, 2013 at 7:02 am</a>		</div>

		<p>saves the life bore you to easily</p>

		<div class="reply">
				</div>
				</div>
		</li>
</ul>

<div class="navigation">
<div class="alignleft"></div>
<div class="alignright"></div>
</div>



<div id="respond">
<h4 id="respond">Leave a Reply</h4>

<div id="cancel-comment-reply">
  <small><a rel="nofollow" id="cancel-comment-reply-link" href="../../../../index.html?p=291#respond" style="display:none;">Click here to cancel reply.</a></small>
</div>


  <div class="formcontainer">	
    <form id="commentform" action="http://blog.ianbicking.org/wp-comments-post.php" method="post">
    <input type='hidden' name='comment_post_ID' value='291' id='comment_post_ID' />
<input type='hidden' name='comment_parent' id='comment_parent' value='0' />

<input name="acp-preview" type="button" id="acp-preview" tabindex="6" value="Preview" />

    <p>Your email is never published nor shared. Required fields are marked <span style='color:red;background:#fff;'>*</span></p>

    <div class="formleft"><label for="author">Name</label></div>
    <div class="formright"><input id="author" name="author" type="text" value="" tabindex="3" size="30" maxlength="20" /> <span style='color:red;background:#fff;'>*</span></div>

    <div class="formleft"><label for="email">Email</label></div>
    <div class="formright"><input id="email" name="email" type="text" value="" tabindex="4" size="30" maxlength="50" /> <span style='color:red;background:#fff;'>*</span></div>

    <div class="formleft"><label for="url">Website</label></div>
    <div class="formright"><input id="url" name="url" type="text" value="" tabindex="5" size="30" maxlength="50" /></div>


  <div class="formleft"><label for="comment">Message</label></div>
  <div class="formright">
    <textarea id="comment" name="comment" tabindex="6" cols="45" rows="10"></textarea>
  </div>

  <div class="formleft">&nbsp;</div>
  <div class="formright"><input id="submit" name="submit" type="submit" value="Post" tabindex="7" /><input type="hidden" name="comment_post_ID" value="291" />
    <small><a target="_blank" href="http://daringfireball.net/projects/markdown/syntax">Markdown formatting</a></small>
    <div id="ajax-comment-preview"></div><p style="display: none;"><input type="hidden" id="akismet_comment_nonce" name="akismet_comment_nonce" value="43359feb5c" /></p><p class="comment-timeout">Comments will be closed on March 11, 2013.</p>

	<p style="clear: both;" class="subscribe-to-comments">
	<input type="checkbox" name="subscribe" id="subscribe" value="subscribe" style="width: auto;" />
	<label for="subscribe">Receive new comments on this post via email</label>
	</p>


  </div>

  <p>
  Note: if your comment does not appear immediately, it may be in moderation.  This happens to all
  comments with more than 2 links.  If it didn't have links, or it doesn't get approved promptly,
  your comment has probably been marked as spam.  This blog gets several hundred spam submissions a day
  so if this is the case I'll never see your comment unless you bring it to my attention -- so if you think
  this is the case, email me.
  </p>

  </form></div>


</div>

</div>

		<div class="navigation">
			<div class="nav-left">&laquo; <a href="../../../../index.html?p=283" rel="prev">Python Application Package</a></div>
			<div class="nav-right"></div>
		</div><!-- END NAVIGATION -->


	</div><!-- END CONTENT -->
</div><!-- END CONTAINER  -->

<div id="sidebar">
	<ul>
		<li id="home-link">
			<h2><a href="../../../../index.html" title="Ian Bicking: a blog">Home</a></h2>
		</li>
<li id="text-315934862" class="widget widget_text"><h2 class="widgettitle">About</h2>
			<div class="textwidget">Ian is a developer with Mozilla, <a href="http://ianbicking.appspot.com/projects">Python open source developer</a>, actually uses <a href="https://plus.google.com/u/0/104537541227697934010/posts">Google+</a> more than <a href="http://twitter.com/ianbicking">twitter</a> and lives in Minneapolis.<br>
<span class="gittip-0001" gittip-username="ianbicking"></span>
<script id="gittip-0001"
  src="https://www.gittip.com/assets/widgets/0001.js"></script>
</div>
		</li>
<li id="text-315934863" class="widget widget_text">			<div class="textwidget"><!-- <script type="text/javascript">mbgc='f5f5f5';ww='160';mbc='cecece';bbc='3F79D5';bmobc='3b71c6';bbgc='4889F0';bmoc='3F79D5';bfc='FFFFFF';bmofc='ffffff';tlc='cecece';tc='6a6a6a';nc='6a6a6a';bc='6a6a6a';l='y';fs='16';fsb='13';bw='100';ff='4';lu='6a6a6a';pc='4889F0';wh='340';b='s'; pid='104537541227697934010';</script><script type="text/javascript" src="http://widgetsplus.com/google_plus_widget.js"></script> --></div>
		</li>
<li id="archives-2" class="widget widget_archive"><h2 class="widgettitle">Archives</h2>
		<ul>
			<li><a href='../../index.html' title='October 2012'>October 2012</a></li>
	<li><a href='../../../02/index.html' title='February 2012'>February 2012</a></li>
	<li><a href='../../../../2011/04/index.html' title='April 2011'>April 2011</a></li>
	<li><a href='../../../../2011/03/index.html' title='March 2011'>March 2011</a></li>
	<li><a href='../../../../2010/09/index.html' title='September 2010'>September 2010</a></li>
	<li><a href='../../../../2010/08/index.html' title='August 2010'>August 2010</a></li>
	<li><a href='../../../../2010/05/index.html' title='May 2010'>May 2010</a></li>
	<li><a href='../../../../2010/04/index.html' title='April 2010'>April 2010</a></li>
	<li><a href='../../../../2010/03/index.html' title='March 2010'>March 2010</a></li>
	<li><a href='../../../../2010/02/index.html' title='February 2010'>February 2010</a></li>
	<li><a href='../../../../2010/01/index.html' title='January 2010'>January 2010</a></li>
	<li><a href='../../../../2009/09/index.html' title='September 2009'>September 2009</a></li>
	<li><a href='../../../../2009/05/index.html' title='May 2009'>May 2009</a></li>
	<li><a href='../../../../2009/04/index.html' title='April 2009'>April 2009</a></li>
	<li><a href='../../../../2009/01/index.html' title='January 2009'>January 2009</a></li>
	<li><a href='../../../../2008/12/index.html' title='December 2008'>December 2008</a></li>
	<li><a href='../../../../2008/11/index.html' title='November 2008'>November 2008</a></li>
	<li><a href='../../../../2008/10/index.html' title='October 2008'>October 2008</a></li>
	<li><a href='../../../../2008/09/index.html' title='September 2008'>September 2008</a></li>
	<li><a href='../../../../2008/08/index.html' title='August 2008'>August 2008</a></li>
	<li><a href='../../../../2008/07/index.html' title='July 2008'>July 2008</a></li>
	<li><a href='../../../../2008/06/index.html' title='June 2008'>June 2008</a></li>
	<li><a href='../../../../2008/05/index.html' title='May 2008'>May 2008</a></li>
	<li><a href='../../../../2008/04/index.html' title='April 2008'>April 2008</a></li>
	<li><a href='../../../../2008/03/index.html' title='March 2008'>March 2008</a></li>
	<li><a href='../../../../2008/02/index.html' title='February 2008'>February 2008</a></li>
	<li><a href='../../../../2008/01/index.html' title='January 2008'>January 2008</a></li>
	<li><a href='../../../../2007/11/index.html' title='November 2007'>November 2007</a></li>
	<li><a href='../../../../2007/10/index.html' title='October 2007'>October 2007</a></li>
	<li><a href='../../../../2007/09/index.html' title='September 2007'>September 2007</a></li>
	<li><a href='../../../../2007/08/index.html' title='August 2007'>August 2007</a></li>
	<li><a href='../../../../2007/07/index.html' title='July 2007'>July 2007</a></li>
		</ul>
</li>
<li id="text-315934861" class="widget widget_text">			<div class="textwidget"><a href="../../../../archive/index.html">The Older Archives</a></div>
		</li>
<li id="categories-1" class="widget widget_categories"><h2 class="widgettitle">Categories</h2>
		<ul>
	<li class="cat-item cat-item-12"><a href="../../../../category/erlang/index.html" title="View all posts filed under Erlang">Erlang</a>
</li>
	<li class="cat-item cat-item-11"><a href="../../../../category/html/index.html" title="View all posts filed under HTML">HTML</a>
</li>
	<li class="cat-item cat-item-8"><a href="../../../../category/javascript/index.html" title="View all posts filed under Javascript">Javascript</a>
</li>
	<li class="cat-item cat-item-15"><a href="../../../../category/licensing/index.html" title="View all posts filed under Licensing">Licensing</a>
</li>
	<li class="cat-item cat-item-18"><a href="../../../../category/mozilla/index.html" title="View all posts filed under Mozilla">Mozilla</a>
</li>
	<li class="cat-item cat-item-5"><a href="../../../../category/notech/index.html" title="View all posts filed under Non-technical">Non-technical</a>
</li>
	<li class="cat-item cat-item-6"><a href="../../../../category/olpc/index.html" title="View all posts filed under OLPC">OLPC</a>
</li>
	<li class="cat-item cat-item-14"><a href="../../../../category/packaging/index.html" title="View all posts filed under Packaging">Packaging</a>
</li>
	<li class="cat-item cat-item-4"><a href="../../../../category/politics/index.html" title="View all posts filed under Politics">Politics</a>
</li>
	<li class="cat-item cat-item-3"><a href="../../../../category/programming/index.html" title="View all posts filed under Programming">Programming</a>
</li>
	<li class="cat-item cat-item-7"><a href="../../../../category/python/index.html" title="View all posts filed under Python">Python</a>
</li>
	<li class="cat-item cat-item-10"><a href="../../../../category/ruby/index.html" title="View all posts filed under Ruby">Ruby</a>
</li>
	<li class="cat-item cat-item-19"><a href="../../../../category/security/index.html" title="View all posts filed under Security">Security</a>
</li>
	<li class="cat-item cat-item-16"><a href="../../../../category/silverlining.1" title="View all posts filed under Silver Lining">Silver Lining</a>
</li>
	<li class="cat-item cat-item-20"><a href="../../../../category/programming/testing/index.html" title="View all posts filed under Testing">Testing</a>
</li>
	<li class="cat-item cat-item-9"><a href="../../../../category/web/index.html" title="View all posts filed under Web">Web</a>
</li>
	<li class="cat-item cat-item-13"><a href="../../../../category/zopeplone/index.html" title="View all posts filed under Zope/Plone">Zope/Plone</a>
</li>
		</ul>
</li>
<li id="search-2" class="widget widget_search"><form id="searchform" method="get" action="../../../../index.html">
	<div>
		<input id="s" name="s" type="text" value="" tabindex="1" size="10" />
		<input id="searchsubmit" name="searchsubmit" type="submit" value="Find" tabindex="2" />
	</div>
</form> </li>
		<li id="recent-posts-2" class="widget widget_recent_entries">		<h2 class="widgettitle">Recent Posts</h2>
		<ul>
				<li><a href="../../../../index.html?p=291" title="Why doctest.js is better than Python&#8217;s doctest">Why doctest.js is better than Python&#8217;s doctest</a></li>
				<li><a href="../../../../index.html?p=283" title="Python Application Package">Python Application Package</a></li>
				<li><a href="../../../../index.html?p=277" title="Git-as-sync, not source-control-as-deployment">Git-as-sync, not source-control-as-deployment</a></li>
				<li><a href="../../../../index.html?p=253" title="My Unsolicited Advice For PyPy">My Unsolicited Advice For PyPy</a></li>
				<li><a href="../../../../index.html?p=250" title="A Python Web Application Package and Format (we should make one)">A Python Web Application Package and Format (we should make one)</a></li>
				</ul>
		</li>
<li id="recent-comments-2" class="widget widget_recent_comments"><h2 class="widgettitle">Recent Comments</h2>
<ul id="recentcomments"><li class="recentcomments"><a href='http://www.mirsa.com.tr' rel='external nofollow' class='url'>havalandırma</a> on <a href="comment-page-1/index.html#comment-228633">Why doctest.js is better than Python&#8217;s doctest</a></li><li class="recentcomments"><a href='http://redealmeidense.com.br/portalx/modules/' rel='external nofollow' class='url'>this website</a> on <a href="comment-page-1/index.html#comment-196267">Why doctest.js is better than Python&#8217;s doctest</a></li><li class="recentcomments">Eric Pierce on <a href="comment-page-1/index.html#comment-195322">Why doctest.js is better than Python&#8217;s doctest</a></li><li class="recentcomments">Paul Brian on <a href="comment-page-1/index.html#comment-195321">Why doctest.js is better than Python&#8217;s doctest</a></li><li class="recentcomments"><a href='http://benjiyork.com' rel='external nofollow' class='url'>Benji York</a> on <a href="comment-page-1/index.html#comment-195320">Why doctest.js is better than Python&#8217;s doctest</a></li></ul></li>
	</ul>
</div>

	<div id="footer">
		<p>
			&copy; 2013 Ian<!--
Does this commenting make me evil?
			|
			Thanks, <a href="http://wordpress.org/" title="WordPress">WordPress</a>
			|
			<a href="http://www.plaintxt.org/themes/barthelme/" title="Barthelme for WordPress" rel="follow">Barthelme</a> theme by <a href="http://scottwallick.com/" title="scottwallick.com" rel="follow">Scott</a>
			| <!-- The following is a link to the theme author's sponsor. Please consider its smallness and that Scott was nice enough to make this theme publically available. -->
			Sponsor: <a href="http://www.active-sandals.com/womreefsan.html" title="Support: Reef Sandals">Reef Sandals</a>
			|
			Valid <a href="http://validator.w3.org/check?uri=http://blog.ianbicking.org&amp;outline=1&amp;verbose=1" title="Valid XHTML 1.0 Strict" rel="nofollow">XHTML</a> &amp; <a href="http://jigsaw.w3.org/css-validator/validator?uri=http://blog.ianbicking.org/wp-content/themes/Barthelme-ianb/style.css&amp;profile=css2&amp;warning=no" title="Valid CSS" rel="nofollow">CSS</a>
			|
			-->
			RSS: <a href="../../../../feed/rss/index.html" title="Ian Bicking: a blog RSS 2.0 (XML) Feed" rel="alternate" type="application/rss+xml">Posts</a> &amp; <a href="../../../../comments/feed/index.html" title="Ian Bicking: a blog Comments RSS 2.0 (XML) Feed" rel="alternate" type="application/rss+xml">Comments</a>
		</p>
	</div>

</div><!-- END WRAPPER -->

	<!-- Somehow 40 queries occured in 1.500 seconds. Magic! -->
	<!-- The "Barthelme" theme copyright (c) 2006 Scott Allan Wallick - http://www.plaintxt.org/themes/ -->
	<script type='text/javascript' src='../../../../wp-includes/js/comment-reply.js?ver=3.4.2'></script>

<!-- Google Analytics -->
<script src="http://www.google-analytics.com/urchin.js" type="text/javascript">
</script>
<script type="text/javascript">
_uacct = "UA-2442258-1";
urchinTracker();
</script>

</body>
</html>