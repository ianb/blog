<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <!-- MOBIFY - DO NOT ALTER - PASTE IMMEDIATELY AFTER OPENING HEAD TAG -->
        <script type="text/javascript">
            /*<![CDATA[*/ (function (a) {
                function b(a, b) {
                    if (+a) return ~a || (d.cookie = h + "=; path=/");
                    (j = d.createElement(e)),
                        (k = d.getElementsByTagName(e)[0]),
                        (j.src = a),
                        b && (j.onload = j.onerror = b),
                        k.parentNode.insertBefore(j, k);
                }
                function c() {
                    n.api || b(l.shift() || -1, c);
                }
                if (this.Mobify) return;
                var d = document,
                    e = "script",
                    f = "mobify",
                    g = "." + f + ".com/",
                    h = f + "-path",
                    i = g + "un" + f + ".js",
                    j,
                    k,
                    l = [!1, 1],
                    m,
                    n = (this.Mobify = {
                        points: [+new Date()],
                        tagVersion: [6, 0],
                    }),
                    o = /(; |#|&|^)mobify-path=([^&;]*)/g.exec(
                        location.hash + "; " + d.cookie
                    );
                o
                    ? (m = o[2]) &&
                      !+(m = sessionStorage[h] || m) &&
                      (l = [!0, "//preview" + g + escape(m)])
                    : ((l = a() || l),
                      l[0] && l.push("//cdn" + i, "//files01" + i)),
                    l.shift()
                        ? (d.write('<plaintext style="display:none;">'),
                          setTimeout(c))
                        : b(l[0]);
            })(function () {
                if (
                    /ip(hone|od)|android.*(mobile)|blackberry.*applewebkit/i.test(
                        navigator.userAgent
                    )
                ) {
                    return [
                        1,
                        "//cdn.mobify.com/sites/ians-blog/production/mobify.js",
                    ];
                }
            }); /*]]>*/
        </script>
        <!-- END MOBIFY -->
        <title>
            Ian Bicking: a blog :: My Experience Writing a Build System
        </title>
        <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
        <meta name="generator" content="WordPress 3.4.2" />
        <!-- LEAVE FOR STATS -->
        <meta name="description" content="" />
        <link
            rel="stylesheet"
            title="plaintxtSimpler"
            href="../../../../wp-content/themes/Barthelme-ianb/style.css"
            type="text/css"
            media="all"
        />
        <link
            rel="start"
            href="../../../../index.html"
            title="Ian Bicking: a blog"
        />
        <link
            rel="alternate"
            type="application/atom+xml"
            title="Ian Bicking: a blog Atom Feed"
            href="../../../../feed/atom/index.html"
        />
        <link
            rel="alternate"
            type="application/rss+xml"
            title="Ian Bicking: a blog RSS 2.0 Feed"
            href="../../../../feed/rss/index.html"
        />
        <link
            rel="alternate"
            type="application/rss+xml"
            title="Ian Bicking: a blog Comments RSS 2.0 Feed"
            href="../../../../comments/feed/index.html"
        />
        <link
            rel="alternate"
            type="application/rdf+xml"
            title="Ian Bicking: a blog RSS 1.0"
            href="../../../../feed/rdf/index.html"
        />
        <link
            rel="alternate"
            type="text/xml"
            title="Ian Bicking: a blog RSS 0.92 Feed"
            href="../../../../feed/rss/index.html"
        />

        <link
            rel="archives"
            title="October 2012"
            href="../../../../2012/10/index.html"
        />
        <link
            rel="archives"
            title="February 2012"
            href="../../../../2012/02/index.html"
        />
        <link
            rel="archives"
            title="April 2011"
            href="../../../../2011/04/index.html"
        />
        <link
            rel="archives"
            title="March 2011"
            href="../../../../2011/03/index.html"
        />
        <link
            rel="archives"
            title="September 2010"
            href="../../../../2010/09/index.html"
        />
        <link
            rel="archives"
            title="August 2010"
            href="../../../../2010/08/index.html"
        />
        <link
            rel="archives"
            title="May 2010"
            href="../../../../2010/05/index.html"
        />
        <link
            rel="archives"
            title="April 2010"
            href="../../../../2010/04/index.html"
        />
        <link
            rel="archives"
            title="March 2010"
            href="../../../../2010/03/index.html"
        />
        <link
            rel="archives"
            title="February 2010"
            href="../../../../2010/02/index.html"
        />
        <link
            rel="archives"
            title="January 2010"
            href="../../../../2010/01/index.html"
        />
        <link
            rel="archives"
            title="September 2009"
            href="../../../../2009/09/index.html"
        />
        <link
            rel="archives"
            title="May 2009"
            href="../../../../2009/05/index.html"
        />
        <link
            rel="archives"
            title="April 2009"
            href="../../../../2009/04/index.html"
        />
        <link
            rel="archives"
            title="January 2009"
            href="../../../../2009/01/index.html"
        />
        <link
            rel="archives"
            title="December 2008"
            href="../../../12/index.html"
        />
        <link
            rel="archives"
            title="November 2008"
            href="../../../11/index.html"
        />
        <link
            rel="archives"
            title="October 2008"
            href="../../../10/index.html"
        />
        <link
            rel="archives"
            title="September 2008"
            href="../../../09/index.html"
        />
        <link
            rel="archives"
            title="August 2008"
            href="../../../08/index.html"
        />
        <link rel="archives" title="July 2008" href="../../../07/index.html" />
        <link rel="archives" title="June 2008" href="../../index.html" />
        <link rel="archives" title="May 2008" href="../../../05/index.html" />
        <link rel="archives" title="April 2008" href="../../../04/index.html" />
        <link rel="archives" title="March 2008" href="../../../03/index.html" />
        <link
            rel="archives"
            title="February 2008"
            href="../../../02/index.html"
        />
        <link
            rel="archives"
            title="January 2008"
            href="../../../01/index.html"
        />
        <link
            rel="archives"
            title="November 2007"
            href="../../../../2007/11/index.html"
        />
        <link
            rel="archives"
            title="October 2007"
            href="../../../../2007/10/index.html"
        />
        <link
            rel="archives"
            title="September 2007"
            href="../../../../2007/09/index.html"
        />
        <link
            rel="archives"
            title="August 2007"
            href="../../../../2007/08/index.html"
        />
        <link
            rel="archives"
            title="July 2007"
            href="../../../../2007/07/index.html"
        />
        <link
            rel="alternate"
            type="application/rss+xml"
            title="Ian Bicking: a blog &raquo; My Experience Writing a Build System Comments Feed"
            href="https://ianbicking.org/2008/06/19/my-experience-writing-a-build-system/feed/"
        />
        <link
            rel="EditURI"
            type="application/rsd+xml"
            title="RSD"
            href="../../../../xmlrpc.php?rsd"
        />
        <link
            rel="wlwmanifest"
            type="application/wlwmanifest+xml"
            href="../../../../wp-includes/wlwmanifest.xml"
        />
        <link
            rel="prev"
            title="Thoughts About the Erlang Runtime"
            href="../../09/thoughts-about-the-erlang-runtime/index.html"
        />
        <link
            rel="next"
            title="Me In Berlin &amp; Amsterdam"
            href="../../../07/28/me-in-berlin-amsterdam/index.html"
        />
        <meta name="generator" content="WordPress 3.4.2" />
        <link rel="canonical" href="index.html" />
        <link rel="shortlink" href="https://ianbicking.org/?p=65" />
        <link
            rel="stylesheet"
            href="../../../../wp-content/plugins/source-code-syntax-highlighting-plugin-for-wordpress/geshi.css"
            type="text/css"
        />
        <style type="text/css">
            .recentcomments a {
                display: inline !important;
                padding: 0 !important;
                margin: 0 !important;
            }
        </style>
        <style type="text/css" media="all">
            /*<![CDATA[*/
            body {
                font-size: 100%;
            }
            body {
                font-family: tahoma, geneva, sans-serif;
            }
            div.post-header,
            h2.post-title,
            p.post-date-single,
            h2.post-title-single,
            div.post-entry h1,
            div.post-entry h2,
            div.post-entry h3,
            div.post-entry h4,
            div.post-entry h5,
            div.post-entry h6,
            div.post-entry blockquote,
            div.post-footer,
            h3#comment-count,
            h4#comment-header,
            div#comments ol li p.comment-metadata,
            h4#respond {
                font-family: verdana, geneva, sans-serif;
            }
            div.post-entry p {
                text-align: left;
            }
            div#wrapper {
                width: 100%;
            }

            /*]]>*/
        </style>
    </head>
    <body>
        <div id="wrapper">
            <div
                id="header"
                onclick="location.href='https://ianbicking.org/';"
                style="cursor: pointer"
            >
                <h1 id="title">
                    <a href="../../../../index.html" title="Ian Bicking: a blog"
                        >Ian Bicking: a blog</a
                    >
                </h1>
                <p id="description"></p>
            </div>
            <!-- WP Theme Credits -->
            <div style="display: none">
                We can answer on question
                <a href="http://www.olnevhost.net/vps-hosting.html"
                    >what is VPS</a
                >? and what is
                <a href="http://www.olnevhost.net/dedicated-servers.html"
                    ><strong>cheap dedicated servers</strong></a
                >?
            </div>
            <!-- END HEADER -->
            <div id="container">
                <div id="content" class="widecolumn">
                    <div id="post-65" class="post single-post">
                        <p class="post-date-single">{ 2008 06 19 }</p>
                        <h2 class="post-title-single">
                            My Experience Writing a Build System
                        </h2>
                        <div class="post-entry">
                            <div class="document">
                                <p>
                                    Lately there&#8217;s been some interest in
                                    build processes among various people &#8212;
                                    <a
                                        class="reference external"
                                        href="http://www.zedshaw.com/projects/vellum/"
                                        >Vellum</a
                                    >
                                    was announced a while back,
                                    <a
                                        class="reference external"
                                        href="http://groovie.org/2008/04/09/wheres-the-capistrano-knock-off-for-us-python-web-devs"
                                        >Ben has been looking for a tool</a
                                    >
                                    and looking at
                                    <a
                                        class="reference external"
                                        href="https://savannah.nongnu.org/projects/fab/"
                                        >Fabric</a
                                    >, and
                                    <a
                                        class="reference external"
                                        href="http://www.blueskyonmars.com/projects/paver/"
                                        >Kevin announced Paver</a
                                    >. At the same time
                                    <a
                                        class="reference external"
                                        href="http://pypi.python.org/pypi/zc.buildout"
                                        >zc.buildout</a
                                    >
                                    is starting to gain some users outside of
                                    the Zope world, and I noticed
                                    <a
                                        class="reference external"
                                        href="http://www.minitage.org/doc/rst/"
                                        >Minitage</a
                                    >
                                    as an abstraction on top of zc.buildout.
                                </p>
                                <p>
                                    A while ago I started working on a build
                                    project for
                                    <a
                                        class="reference external"
                                        href="http://topp.openplans.org"
                                        >Open Plans</a
                                    >
                                    called
                                    <a
                                        class="reference external"
                                        href="https://svn.openplans.org/svn/fassembler/trunk"
                                        >fassembler</a
                                    >. I think the result has been fairly
                                    successful and maintainable, and I thought
                                    I&#8217;d share some of my own reflections
                                    on that tool.
                                </p>
                                <div
                                    class="section"
                                    id="update-what-we-were-trying-to-accomplish"
                                >
                                    <h2>
                                        <strong>Update:</strong> what we were
                                        trying to accomplish
                                    </h2>
                                    <p>
                                        I didn&#8217;t make it clear in the post
                                        just what we were trying to do, and what
                                        this build system would accomplish.
                                    </p>
                                    <p>
                                        Our site (<a
                                            class="reference external"
                                            href="http://openplans.org"
                                            >openplans.org</a
                                        >) is made up of several separate
                                        servers with an HTML-rewriting proxy on
                                        the front end. We have a Zope server
                                        running a custom application, Apache
                                        running WordPress MU, and some servers
                                        running Pylons or other Python web
                                        applications for portions of our site.
                                        We needed a way to consistently
                                        reproduce this entire stack, all the
                                        pieces, plugged together so that the
                                        site would actually work. Two equally
                                        important places where we had to
                                        reproduce the stack are for developer
                                        rigs and the production site.
                                    </p>
                                    <p>
                                        Our code is primarily Python and we use
                                        a <em>lot</em> of libraries, developed
                                        both internally and externally. Setting
                                        up the site is primarily a matter of
                                        installing the right libraries and
                                        configuration and setting up any
                                        databases (both a
                                        <a
                                            class="reference external"
                                            href="http://www.zope.org/Products/StandaloneZODB"
                                            >ZODB</a
                                        >
                                        databases and several MySQL databases).
                                        We use a few libraries written in C, but
                                        <a
                                            class="reference external"
                                            href="http://python.org/doc/current/lib/module-distutils.html"
                                            >distutils</a
                                        >
                                        handles the compilation of those pretty
                                        transparently.
                                    </p>
                                    <p>
                                        For this case we really don&#8217;t care
                                        about build tools that focus on
                                        compilation. We don&#8217;t care about
                                        careful dependency tracking because we
                                        are compiling very little software.
                                    </p>
                                </div>
                                <div
                                    class="section"
                                    id="make-doesn-t-make-sense"
                                >
                                    <h2>make doesn&#8217;t make sense</h2>
                                    <p>
                                        <strong>Update 2</strong>: If you think
                                        the make model makes lots of sense, read
                                        the preceding section &#8212; it makes
                                        sense for a different problem set than
                                        what we&#8217;re doing.
                                    </p>
                                    <p>
                                        We initially had a system based on
                                        <a
                                            class="reference external"
                                            href="http://agendaless.com/Members/chrism/software/buildit"
                                            >BuildIt</a
                                        >, which is kind of like
                                        <a
                                            class="reference external"
                                            href="http://en.wikipedia.org/wiki/Make_(software)"
                                            >make</a
                                        >
                                        with Python as the control code. It
                                        wasn&#8217;t really a good basis for our
                                        build tool, and I think it added a lot
                                        of confusion, compounded by the fact
                                        that we weren&#8217;t quite sure what we
                                        wanted our build to do. Ultimately I
                                        think the make model of building
                                        doesn&#8217;t make sense.
                                    </p>
                                    <p>
                                        The make model is based on the idea that
                                        you <strong>really</strong> want to save
                                        work. So you detect changes and remake
                                        things only as necessary. For
                                        compilation this might make sense,
                                        because you edit code and recompile a
                                        lot and it&#8217;s tedious to wait. But
                                        we are building a website, and
                                        installing software, and none of that
                                        style of efficiency matters. make-style
                                        detection of work to be done
                                        doesn&#8217;t even save any time. But it
                                        does make the build more fragile (e.g.,
                                        if you define a dependency incorrectly)
                                        and much harder to understand, and you
                                        constantly find yourself wiping the
                                        build and starting from scratch because
                                        you don&#8217;t trust the system.
                                    </p>
                                    <p>
                                        The metaphor for the new build system
                                        was much simpler: do a list of things,
                                        top to bottom. There&#8217;s no effort
                                        into detecting changes in the build, or
                                        changes in the settings, or anything
                                        else.
                                    </p>
                                </div>
                                <div class="section" id="do-things-carefully">
                                    <h2>Do things carefully</h2>
                                    <p>
                                        In the build system almost all actions
                                        go through the
                                        <a
                                            class="reference external"
                                            href="https://svn.openplans.org/svn/fassembler/trunk/fassembler/filemaker.py"
                                            >filemaker</a
                                        >
                                        module. This is <em>kind of</em> a file
                                        abstraction library. But the goals are
                                        entirely different than convenience: the
                                        goal is transparency and safety. In
                                        contrast Paver uses
                                        <a
                                            class="reference external"
                                            href="http://www.jorendorff.com/articles/python/path/"
                                            >path.py</a
                                        >
                                        for convenience, but I&#8217;m not sure
                                        what the win would be if we used a model
                                        like that.
                                    </p>
                                    <p>
                                        <tt class="docutils literal"
                                            ><span class="pre"
                                                >filemaker</span
                                            ></tt
                                        >
                                        itself is heavily tied to the framework
                                        that it&#8217;s written for,
                                        specifically user interaction and
                                        logging. Most tasks just
                                        <em>do</em> things, and rely on
                                        filemaker to detect problems and ask the
                                        user questions. For example, every time
                                        a file is written, it checks if the file
                                        exists, and if it has the same content.
                                        If it exists with other content, it asks
                                        the user about what to do. It
                                        doesn&#8217;t overwrites files without
                                        asking (at least by default). I think
                                        this makes the tool more humane as the
                                        default behavior for a build is to be
                                        careful and transparent. The build
                                        author has to go out of their way to
                                        make things difficult.
                                    </p>
                                    <p>
                                        Many zc.buildout recipes will blithely
                                        overwrite all sorts of files which
                                        always made me very uncomfortable with
                                        the product. It&#8217;s the
                                        <em>recipes</em> in zc.buildout which do
                                        this, not the buildout framework itself,
                                        but because buildout made overwriting
                                        the easy thing to do, and didn&#8217;t
                                        start with humane conventions or tools,
                                        this behavior is the norm.
                                    </p>
                                    <p>
                                        What I think filemaker most accomplished
                                        was the ability to do file operations
                                        while also asserting the expected state
                                        of the system, and so makes build bugs
                                        noticeable earlier instead of getting a
                                        build process that finishes successfully
                                        but creates a buggy build, or having an
                                        exception show up far from where the
                                        error was originally introduced.
                                    </p>
                                    <p>
                                        Also, because it won&#8217;t overwrite
                                        your work in progress this has saved the
                                        build from engendering deep feelings of
                                        hatred in cases when it might overwrite
                                        your work in progress. It&#8217;s hard
                                        to detect this absence of hatred, but I
                                        know that I&#8217;ve felt it with other
                                        systems.
                                    </p>
                                </div>
                                <div
                                    class="section"
                                    id="update-a-corollary-ignore-no-errors"
                                >
                                    <h2>
                                        <strong>Update:</strong> a corollary:
                                        ignore no errors
                                    </h2>
                                    <p>
                                        One question you might wonder about: why
                                        not a shell script? We did prototype
                                        some things as shell scripts, but
                                        we&#8217;ve consistently moved to Python
                                        at some point, even things that seemed
                                        really trivial. The problem with shell
                                        scripts is they have horribly bad
                                        behavior with respect to errors.
                                        Ignoring errors is really really easy,
                                        noticing errors is really hard.
                                    </p>
                                    <p>
                                        This is absolutely unacceptable for
                                        builds. Builds must not ignore errors.
                                        The build may mostly work despite an
                                        error. It might be totally broken, but
                                        the error message is lost in all sorts
                                        of useless output. The error message
                                        probably makes no sense. The context is
                                        lost. No suggestion is given to the
                                        user.
                                    </p>
                                    <p>
                                        When builds work, that&#8217;s great.
                                        Build <em>do not</em> always work. They
                                        always fail sometimes, and some poor
                                        sucker (usually in some hot potato-like
                                        arrangement) has to figure out what went
                                        wrong. You have to plan for these
                                        problems.
                                    </p>
                                    <p>
                                        Everything in the build tries to be
                                        careful about errors. All places where
                                        it is not, it is a bug. The resolution
                                        isn&#8217;t to see something appear to
                                        work, but create a broken build, and say
                                        &quot;oh, you forgot to set X&quot;. The
                                        resolution is to make sure when you
                                        forget to set X it gives you an error
                                        that tells you to set X.
                                    </p>
                                    <p>
                                        This is one of the more important and
                                        more often ignored principles of a good
                                        build/deployment system. Maybe
                                        it&#8217;s gotten better, but when I
                                        first used zc.buildout (<em>very</em>
                                        early in its development) the poor
                                        handling of errors was by far the
                                        biggest problem and it left me with a
                                        bad taste in my mouth. easy_install and
                                        setuptools in general is also very
                                        flawed in this respect.
                                    </p>
                                </div>
                                <div
                                    class="section"
                                    id="log-interesting-things"
                                >
                                    <h2>Log interesting things</h2>
                                    <p>
                                        I tried to make a compromise between
                                        logging very verbosely, and being too
                                        quiet. As a user, I want to see
                                        everything <em>interesting</em> and
                                        leave out everything <em>boring</em>.
                                        Determining interesting and boring can
                                        be a bit difficult, but really just
                                        require some attention and tweaking.
                                    </p>
                                    <p>
                                        To make it possible to visually parse
                                        the output of the tool I found both
                                        indentation and color to be very useful.
                                        Indentation is used to represent
                                        subtasks, and color to make sections and
                                        warnings stand out.
                                    </p>
                                    <p>
                                        The default verbosity setting is not to
                                        be completely quiet. Silence is a Unix
                                        convention that just doesn&#8217;t work
                                        for build tools. Silence gets you
                                        interactions like this:
                                    </p>
                                    <div
                                        class="dean_ch"
                                        style="white-space: wrap"
                                    >
                                        <br />
                                        $ build-something target-directory/<br />
                                        <span class="br0">&#40;</span>much
                                        <span class="kw3">time</span>
                                        passes<span class="br0">&#41;</span
                                        ><br />
                                        Error: cannot write
                                        /home/ianb/builds/<span class="nu0"
                                            >20080426</span
                                        >/target-directory/products/AuxInput/auxinput/config/configuration.<span
                                            class="kw3"
                                            >xml</span
                                        ><br />
                                        &nbsp;
                                    </div>
                                    <p>
                                        Why did it want to write that file? Why
                                        can&#8217;t it write that file? Is the
                                        build buggy? Did I misconfigure it? Does
                                        the directory exist?
                                    </p>
                                    <p>
                                        The typical way of handling this is
                                        either to run the build again with
                                        logging setup or otherwise make it more
                                        verbose, or to get in the habit of
                                        always running it verbose.
                                    </p>
                                </div>
                                <div
                                    class="section"
                                    id="mixing-code-and-configuration"
                                >
                                    <h2>Mixing code and configuration</h2>
                                    <p>
                                        BuildIt, which we were using before, had
                                        the ability to put variables in
                                        settings, and you could read an option
                                        from another section with something like
                                        <tt class="docutils literal"
                                            ><span class="pre"
                                                >${section/option}</span
                                            ></tt
                                        >. It was limited to simple (but
                                        recursive) variable substitution, and
                                        had some clever but very confusing rules
                                        that created a kind of inheritance.
                                    </p>
                                    <p>
                                        I liked the ability to do substitution,
                                        but wasn&#8217;t happy with the
                                        compromise BuildIt made. I wasted a
                                        <em>lot</em> of time trying to figure
                                        out the context of substitutions. So, I
                                        saw two directions. One was to remove
                                        the cleverness and just do simple
                                        substitution. This is the choice
                                        zc.buildout made. The other was to go
                                        whole-hog. With a bit of trepidation I
                                        decided to to go for it, and I made the
                                        choice to treat all configuration
                                        settings as
                                        <a
                                            class="reference external"
                                            href="http://pythonpaste.org/tempita/"
                                            >Tempita</a
                                        >
                                        templates. All configuration is
                                        generally accessed via
                                        <tt class="docutils literal"
                                            ><span class="pre"
                                                >config.setting_name</span
                                            ></tt
                                        >, and that lazily interpolates the
                                        setting (it took me quite a while to
                                        figure out how to avoid infinite loops
                                        of substitution). Because evaluation is
                                        done lazily settings can depend on each
                                        other and be overridden and have lots of
                                        code in defaults (e.g., a default that
                                        is calculated based on the value of
                                        another setting), and it works out okay.
                                        Most settings just ended up having a
                                        smart default, and as a result very
                                        little tweaking of the configuration is
                                        necessary.
                                    </p>
                                    <p>
                                        Somewhat ironically the result was a
                                        kind of atrophying of the settings,
                                        because no one actually
                                        <em>set</em> them, instead we just
                                        tweaked the defaults to get it right.
                                        Now I&#8217;m not entirely sure what
                                        exactly the &quot;settings&quot; are
                                        setting, or who they should really
                                        belong to. To the build? To the tasks?
                                        While this is conceptually confusing, in
                                        practice it isn&#8217;t so bad. This
                                        mixing of code and configuration has
                                        been distinctly useful, and not
                                        <em>nearly</em> as problematic to debug
                                        as I worried it would be. In some ways
                                        it was a way of building
                                        <tt class="docutils literal"
                                            ><span class="pre">lambda</span></tt
                                        >
                                        into every string, and the lazy
                                        evaluation of those strings has been
                                        really important. But it&#8217;s not
                                        clear if they are really settings.
                                    </p>
                                    <p>
                                        Would normal string interpolation have
                                        been enough (e.g., with
                                        <a
                                            class="reference external"
                                            href="http://python.org/doc/current/lib/node40.html"
                                            >string.Template</a
                                        >)? I&#8217;m pretty sure it
                                        wouldn&#8217;t have been. The ability to
                                        do a little math or use functions that
                                        read things from the environment has
                                        been very important.
                                    </p>
                                </div>
                                <div
                                    class="section"
                                    id="managing-python-libraries"
                                >
                                    <h2>Managing Python libraries</h2>
                                    <p>
                                        fassembler uses
                                        <a
                                            class="reference external"
                                            href="http://pypi.python.org/pypi/virtualenv"
                                            >virtualenv</a
                                        >
                                        for building each piece of the stack.
                                        Generally it creates several
                                        environments and installs things into
                                        them &#8212; it doesn&#8217;t run inside
                                        the environments itself. This works
                                        fine.
                                    </p>
                                    <p>
                                        zc.buildout in comparison does some
                                        fancy stuff to scripts where specific
                                        eggs are enabled when you run a script.
                                        Each script has a list of
                                        <em>all</em> the eggs to enable. You
                                        can&#8217;t install things or manage
                                        anything manually, even to test &#8212;
                                        you always have to go through buildout,
                                        and it will regenerate the scripts for
                                        you. zc.buildout was implemented at the
                                        same time as workingenv (the predecessor
                                        to virtualenv), and I actually finished
                                        virtualenv with fassembler in mind, so I
                                        can&#8217;t blame zc.buildout for not
                                        using virtualenv. That said, I
                                        don&#8217;t think the zc.buildout system
                                        makes any sense. And it&#8217;s really
                                        complicated and has to access all sorts
                                        of not-really-public parts of
                                        easy_install to work.
                                    </p>
                                    <p>
                                        Isolation is only the start.
                                        easy_install makes sure each
                                        library&#8217;s claimed dependencies are
                                        satisfied. You might then think
                                        easy_install would do all the work to
                                        make the stack work. It is nowhere close
                                        to making the stack work.
                                        <tt class="docutils literal"
                                            ><span class="pre"
                                                >setup.py</span
                                            ></tt
                                        >
                                        files can/should contain the bare
                                        minimum that is known to be necessary to
                                        make a package work. But they
                                        can&#8217;t predict future
                                        incompatibilities, and they can&#8217;t
                                        predict interactions. And you
                                        don&#8217;t want all your packages
                                        changing versions arbitrarily. If you
                                        work with a lot of libraries you
                                        <em>need</em> those libraries to be
                                        pinned, and only update them when you
                                        <em>want</em> to update them, not just
                                        because an update has been released.
                                    </p>
                                    <p>
                                        So for each piece of the stack we have a
                                        set of &quot;requirements&quot;. This is
                                        a flat files that indicates all the
                                        packages to install. They can have
                                        explicit versions, far more restrictive
                                        than anything you should put in
                                        <tt class="docutils literal"
                                            ><span class="pre"
                                                >setup.py</span
                                            ></tt
                                        >. It also can check out from svn,
                                        including pinning to revisions. This
                                        installation plan can go in svn, you can
                                        do diffs on it, you can branch and copy
                                        and do whatever. Maybe at some point we
                                        could use it to keep cached copies of
                                        the libraries. For now it mostly uses
                                        <tt class="docutils literal"
                                            ><span class="pre"
                                                >easy_install</span
                                            ></tt
                                        >
                                        (and
                                        <tt class="docutils literal"
                                            ><span class="pre">python</span>
                                            <span class="pre">setup.py</span>
                                            <span class="pre">develop</span></tt
                                        >
                                        for checkouts).
                                    </p>
                                    <p>
                                        In parallel we have a command-line
                                        program for just installing packages
                                        using files like this, called
                                        <a
                                            class="reference external"
                                            href="https://svn.openplans.org/svn/PoachEggs/trunk"
                                            >PoachEggs</a
                                        >. I want to make this better, and have
                                        fassembler use it, but I mostly note it
                                        because it implements a feature that can
                                        &quot;freeze&quot; all your packages to
                                        a requirements file. You take a working
                                        build and freeze its requirements,
                                        giving explicit (<tt
                                            class="docutils literal"
                                            ><span class="pre">==</span></tt
                                        >) versions for packages, and pin all
                                        the svn checkouts to a revision, so that
                                        the frozen requirements file will
                                        install exactly the packages you know
                                        work.
                                    </p>
                                    <p>
                                        An alternative to this is what the
                                        <a
                                            class="reference external"
                                            href="http://repoze.org/"
                                            >Repoze</a
                                        >
                                        guys are doing, which is to create a
                                        custom index that only includes the
                                        versions of libraries that you want. You
                                        then tell easy_install to use this
                                        instead of
                                        <a
                                            class="reference external"
                                            href="http://pypi.python.org/pypi"
                                            >PyPI</a
                                        >. It works with zc.buildout (and
                                        anything that uses easy_install), but I
                                        can&#8217;t get excited about it
                                        compared to a simple text file. I also
                                        want svn checkouts instead of create
                                        tarballs of the checkout &#8212; I like
                                        an editable environment, because the
                                        build is just as much to support
                                        developers as to support deployment.
                                    </p>
                                </div>
                                <div class="section" id="the-structure">
                                    <h2>The structure</h2>
                                    <p>
                                        A big part of the development of
                                        fassembler was nailing down the
                                        structure of our site, and moving to use
                                        tools like
                                        <a
                                            class="reference external"
                                            href="http://supervisord.org/"
                                            >supervisor</a
                                        >
                                        to manage our processes. A lot of these
                                        expectations are built into the builds
                                        and fassembler itself. This is part of
                                        what makes the build Work &#8212; the
                                        pieces all conform to a common structure
                                        with some basic standards. But this
                                        isn&#8217;t the build tool itself,
                                        it&#8217;s just a set of conventions.
                                    </p>
                                    <p>
                                        I don&#8217;t know quite what to make of
                                        this. Extracting the conventions from
                                        the builds leads to a situation where
                                        you can more easily misconfigure things,
                                        and the installation process ends up
                                        being more documentation-based instead
                                        of code-based. We do <em>not</em> want
                                        to rely on documentation, because
                                        documentation is generally because of a
                                        flaw in the build process that needs
                                        explaining. It&#8217;s faster for
                                        everyone if the code is just right.
                                        Maybe these conventions could be put
                                        into code, separate from the build. The
                                        abstraction worries me, though &#8212;
                                        too much to keep track of?
                                    </p>
                                </div>
                                <div
                                    class="section"
                                    id="what-we-don-t-get-right"
                                >
                                    <h2>What we don&#8217;t get right</h2>
                                    <p>
                                        The biggest problem is that fassembler
                                        is our own system and no one else uses
                                        it. If someone wants to use just a piece
                                        of our stack they either have to build
                                        it manually or they have to use our
                                        system which is meant to build all our
                                        pieces together with our conventions.
                                        There&#8217;s some pressure to use
                                        zc.buildout to make pieces more
                                        accessible to other Zope users.
                                        We&#8217;ve also found things that build
                                        with zc.buildout that we&#8217;d like to
                                        use (e.g., setups for
                                        <a
                                            class="reference external"
                                            href="http://varnish.projects.linpro.no/"
                                            >varnish</a
                                        >).
                                    </p>
                                    <p>
                                        We haven&#8217;t figured out how to
                                        separate the code for building
                                        <em>our</em> stuff from the build
                                        software itself. There&#8217;s a
                                        bootstrapping problem: you need to get
                                        the build code to build a project, and
                                        so it can&#8217;t be part of the project
                                        you are building. zc.buildout uses
                                        configuration files (that aren&#8217;t
                                        code, so they lack the bootstrap
                                        problem) and it uses
                                        <a
                                            class="reference external"
                                            href="http://pypi.python.org/pypi/zc.buildout#id1"
                                            >recipes</a
                                        >
                                        (a kind of plugin) and has gone to quite
                                        a bit of effort to bootstrap everything.
                                        virtualenv also supports a kind of
                                        <a
                                            class="reference external"
                                            href="http://pypi.python.org/pypi/virtualenv#bootstrap-example"
                                            >bootstrap</a
                                        >
                                        which we use to do the initial setup of
                                        the environment, but it doesn&#8217;t
                                        support code organization in the style
                                        of zc.buildout.
                                    </p>
                                    <p>
                                        Builds are also fairly tedious to write.
                                        They aren&#8217;t horrible, but they
                                        feel much longer than they should be.
                                        Part of their length, though, is that
                                        over time we put in more code to guard
                                        against environment differences or build
                                        errors, and more code to detect the
                                        environment. But compared to
                                        zc.buildout&#8217;s configuration files,
                                        it doesn&#8217;t feel quite as nice, and
                                        if it&#8217;s not as nice sometimes
                                        people are lazy and do ad hoc setups.
                                    </p>
                                </div>
                                <div class="section" id="the-future">
                                    <h2>The future</h2>
                                    <p>
                                        We haven&#8217;t really decided, but as
                                        you might have noticed zc.buildout gets
                                        a lot of attention here. There&#8217;s
                                        quite a few things I don&#8217;t like
                                        about it, but a lot of these have to do
                                        with the recipes available. We
                                        don&#8217;t <em>have</em> to use the
                                        standard zc.buildout egg installation
                                        recipe. In fact that would be first on
                                        the chopping block, replaced with
                                        something much simpler that assumes you
                                        are running inside a virtualenv
                                        environment, and probably something that
                                        uses requirement files.
                                    </p>
                                    <p>
                                        Also, we could extract filemaker into a
                                        library and recipes could use that.
                                        Possibly logging could be handled the
                                        same way (the
                                        <a
                                            class="reference external"
                                            href="http://python.org/doc/current/lib/module-logging.html"
                                            >logging</a
                                        >
                                        module just isn&#8217;t designed for an
                                        interactive experience like a build
                                        tool). Then if we used other
                                        people&#8217;s recipes we might feel
                                        grumpy, since they&#8217;d use neither
                                        filemaker or our logging, but it would
                                        still work. And our recipes would be
                                        full of awesome. The one thing I
                                        don&#8217;t think we could do is
                                        introduce the template-based
                                        configuration. Or, if we did, it would
                                        be hard.
                                    </p>
                                    <p>
                                        That said, there is a very different
                                        direction we could go, one inspired more
                                        by
                                        <a
                                            class="reference external"
                                            href="http://code.google.com/appengine/"
                                            >App Engine</a
                                        >. In that model we build files under a
                                        directory, and that directory is the
                                        build. Wherever you build, you get the
                                        same files, period. All paths would be
                                        relative. All environmental detection
                                        would happen in code at runtime. Things
                                        that aren&#8217;t &quot;files&quot;
                                        exactly would simply be standard
                                        scripts. E.g., database setup would not
                                        be done by the build, but would be a
                                        script put in a standard location.
                                    </p>
                                    <p>
                                        This second file-based model of building
                                        is very much different than the
                                        principles behind zc.buildout.
                                        zc.buildout requires rebuilding when
                                        anything changes, and does so without
                                        apology. It requires rebuilding to move
                                        the directories, or to move to different
                                        machines. Using a file-based model
                                        requires a lot of push-back into the
                                        products themselves. Applications have
                                        to be patched to accept smart relative
                                        paths. They have to manage themselves a
                                        lot more, detect their environment,
                                        handle any conflicts or ambiguities,
                                        being graceful about stuff like
                                        databases, because the files have to be
                                        universal. In an extreme case I could
                                        imagine going so far as to only keep a
                                        template for a configuration file, and
                                        write the real configuration file to a
                                        temporary location before starting a
                                        server (if the server cannot be patched
                                        to accept runtime location information).
                                    </p>
                                    <p>
                                        So this is the choice ahead. I&#8217;m
                                        not sure <em>when</em> we&#8217;ll make
                                        this choice (if ever!) &#8212; build
                                        systems are dull and somewhat annoying,
                                        but they are no more dull and annoying
                                        than dealing with a poor build system.
                                        Actually, they are
                                        <em>definitely</em> less dull than
                                        working with a build system that
                                        isn&#8217;t good enough or powerful
                                        enough, or one that simply lacks the TLC
                                        necessary to keep builds working. So no
                                        choice is a choice too, and maybe a bad
                                        choice.
                                    </p>
                                </div>
                            </div>
                            <p>No related posts.</p>
                        </div>
                        <!-- END POST-ENTRY  -->
                        <!-- <rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
			xmlns:dc="http://purl.org/dc/elements/1.1/"
			xmlns:trackback="http://madskills.com/public/xml/rss/module/trackback/">
		<rdf:Description rdf:about="https://ianbicking.org/2008/06/19/my-experience-writing-a-build-system/"
    dc:identifier="https://ianbicking.org/2008/06/19/my-experience-writing-a-build-system/"
    dc:title="My Experience Writing a Build System"
    trackback:ping="https://ianbicking.org/2008/06/19/my-experience-writing-a-build-system/trackback/" />
</rdf:RDF> -->
                        <div class="post-footer">
                            <p>
                                Posted by Ian Bicking on Thursday, June 19th,
                                2008, at 10:41 pm, and filed under
                                <a
                                    href="../../../../category/programming/index.html"
                                    title="View all posts in Programming"
                                    rel="category tag"
                                    >Programming</a
                                >,
                                <a
                                    href="../../../../category/python/index.html"
                                    title="View all posts in Python"
                                    rel="category tag"
                                    >Python</a
                                >,
                                <a
                                    href="../../../../category/web/index.html"
                                    title="View all posts in Web"
                                    rel="category tag"
                                    >Web</a
                                >.
                            </p>
                            <p>
                                Comments have a
                                <a
                                    href="https://ianbicking.org/2008/06/19/my-experience-writing-a-build-system/feed/"
                                    >feed</a
                                >.
                            </p>
                        </div>
                        <!-- END POST-FOOTER -->
                    </div>
                    <!-- END POST -->

                    <div id="comments">
                        <h4 id="comments">16 Comments</h4>
                        <ul class="commentlist">
                            <li
                                class="comment even thread-even depth-1"
                                id="comment-18627"
                            >
                                <div
                                    id="div-comment-18627"
                                    class="comment-body"
                                >
                                    <div class="comment-author vcard">
                                        <img
                                            alt=""
                                            src="https://0.gravatar.com/avatar/4dcd83b8ded3a938578025a31bb69487?s=32&amp;d=http%3A%2F%2Fblog.ianbicking.org%2Fwp-includes%2Fimages%2Fblank.gif&amp;r=PG"
                                            class="avatar avatar-32 photo"
                                            height="32"
                                            width="32"
                                        />
                                        <cite class="fn"
                                            ><a
                                                href="http://bytesexual.org/"
                                                rel="external nofollow"
                                                class="url"
                                                >Noah Slater</a
                                            ></cite
                                        >
                                        <span class="says">says:</span>
                                    </div>

                                    <div class="comment-meta commentmetadata">
                                        <a
                                            href="https://ianbicking.org/2008/06/19/my-experience-writing-a-build-system/comment-page-1/#comment-18627"
                                        >
                                            June 20, 2008 at 4:52 am</a
                                        >
                                    </div>

                                    <p>
                                        &#8220;But it does make the build more
                                        fragile (e.g., if you define a
                                        dependency incorrectly) and much harder
                                        to understand, and you constantly find
                                        yourself wiping the build and starting
                                        from scratch because you dont trust the
                                        system.&#8221;
                                    </p>

                                    <p>
                                        Dependency tracking is a feature, not a
                                        source of fragility. If you&#8217;re
                                        wiping the build because you don&#8217;t
                                        trust the system, perhaps you should be
                                        looking in the direction of the
                                        programmer and not the tools she uses.
                                    </p>

                                    <div class="reply"></div>
                                </div>
                            </li>
                            <li
                                class="comment odd alt thread-odd thread-alt depth-1"
                                id="comment-18634"
                            >
                                <div
                                    id="div-comment-18634"
                                    class="comment-body"
                                >
                                    <div class="comment-author vcard">
                                        <img
                                            alt=""
                                            src="https://0.gravatar.com/avatar/e2cb0083d4d61cebb1325281f88f3843?s=32&amp;d=http%3A%2F%2Fblog.ianbicking.org%2Fwp-includes%2Fimages%2Fblank.gif&amp;r=PG"
                                            class="avatar avatar-32 photo"
                                            height="32"
                                            width="32"
                                        />
                                        <cite class="fn"
                                            ><a
                                                href="http://www.amk.ca"
                                                rel="external nofollow"
                                                class="url"
                                                >amk</a
                                            ></cite
                                        >
                                        <span class="says">says:</span>
                                    </div>

                                    <div class="comment-meta commentmetadata">
                                        <a
                                            href="https://ianbicking.org/2008/06/19/my-experience-writing-a-build-system/comment-page-1/#comment-18634"
                                        >
                                            June 20, 2008 at 6:38 am</a
                                        >
                                    </div>

                                    <p>
                                        Does dependency tracking matter that
                                        much for Python programs, where
                                        installation is mostly copying files and
                                        possibly a C extension or two? Any
                                        accumulated savings of time from
                                        avoiding redundant copying could be
                                        eaten up by the first two-hour debugging
                                        session that concludes &#8220;oh, I
                                        changed this thing but that thing over
                                        there didn&#8217;t get
                                        regenerated.&#8221; We&#8217;re not
                                        talking about GCC or Emacs, where a
                                        build can take a half hour.
                                    </p>

                                    <div class="reply"></div>
                                </div>
                            </li>
                            <li
                                class="comment even thread-even depth-1"
                                id="comment-18635"
                            >
                                <div
                                    id="div-comment-18635"
                                    class="comment-body"
                                >
                                    <div class="comment-author vcard">
                                        <img
                                            alt=""
                                            src="https://1.gravatar.com/avatar/7ea0cc75793eb2b1ada4abc953a41592?s=32&amp;d=http%3A%2F%2Fblog.ianbicking.org%2Fwp-includes%2Fimages%2Fblank.gif&amp;r=PG"
                                            class="avatar avatar-32 photo"
                                            height="32"
                                            width="32"
                                        />
                                        <cite class="fn"
                                            ><a
                                                href="http://adamv.com"
                                                rel="external nofollow"
                                                class="url"
                                                >Adam Vandenberg</a
                                            ></cite
                                        >
                                        <span class="says">says:</span>
                                    </div>

                                    <div class="comment-meta commentmetadata">
                                        <a
                                            href="https://ianbicking.org/2008/06/19/my-experience-writing-a-build-system/comment-page-1/#comment-18635"
                                        >
                                            June 20, 2008 at 6:41 am</a
                                        >
                                    </div>

                                    <p>
                                        Thanks for posting this. I&#8217;m
                                        working on build scripts for some Django
                                        projects (on Windows), and the parts on
                                        being humane got me thinking.
                                    </p>

                                    <div class="reply"></div>
                                </div>
                            </li>
                            <li
                                class="comment odd alt thread-odd thread-alt depth-1"
                                id="comment-18647"
                            >
                                <div
                                    id="div-comment-18647"
                                    class="comment-body"
                                >
                                    <div class="comment-author vcard">
                                        <img
                                            alt=""
                                            src="https://0.gravatar.com/avatar/02a243c4202b23e8ec78620f1ff48aa6?s=32&amp;d=http%3A%2F%2Fblog.ianbicking.org%2Fwp-includes%2Fimages%2Fblank.gif&amp;r=PG"
                                            class="avatar avatar-32 photo"
                                            height="32"
                                            width="32"
                                        />
                                        <cite class="fn">X X</cite>
                                        <span class="says">says:</span>
                                    </div>

                                    <div class="comment-meta commentmetadata">
                                        <a
                                            href="https://ianbicking.org/2008/06/19/my-experience-writing-a-build-system/comment-page-1/#comment-18647"
                                        >
                                            June 20, 2008 at 10:17 am</a
                                        >
                                    </div>

                                    <p>
                                        You&#8217;ll want to take a look at
                                        Vesta from DEC (later Compaq) for ideas
                                        on how to retain make&#8217;s efficiency
                                        while making dependencies impossible to
                                        miss. What you have done here is not
                                        clearly better than make. Vesta is.
                                    </p>

                                    <div class="reply"></div>
                                </div>
                            </li>
                            <li
                                class="comment even thread-even depth-1"
                                id="comment-18648"
                            >
                                <div
                                    id="div-comment-18648"
                                    class="comment-body"
                                >
                                    <div class="comment-author vcard">
                                        <img
                                            alt=""
                                            src="https://0.gravatar.com/avatar/c82b7991f8e83a990aab7cdc48dde9ce?s=32&amp;d=http%3A%2F%2Fblog.ianbicking.org%2Fwp-includes%2Fimages%2Fblank.gif&amp;r=PG"
                                            class="avatar avatar-32 photo"
                                            height="32"
                                            width="32"
                                        />
                                        <cite class="fn">slinkp</cite>
                                        <span class="says">says:</span>
                                    </div>

                                    <div class="comment-meta commentmetadata">
                                        <a
                                            href="https://ianbicking.org/2008/06/19/my-experience-writing-a-build-system/comment-page-1/#comment-18648"
                                        >
                                            June 20, 2008 at 10:18 am</a
                                        >
                                    </div>

                                    <p>
                                        I work with Ian at TOPP. I want to make
                                        explicit one of the most important
                                        things about fassembler. It&#8217;s not
                                        just a build tool, it&#8217;s a
                                        deployment tool. This is where the
                                        don&#8217;t-overwrite-without-prompting
                                        feature really shines, and some other
                                        things Ian didn&#8217;t mention like
                                        automatically checking your
                                        configuration files into subversion.
                                        This has greatly reduced the amount of
                                        pain involved in deploying our rather
                                        large openplans.org stack.
                                    </p>

                                    <p>
                                        The downsides: There are a lot of
                                        TOPP-specific conventions baked in, as
                                        Ian noted. We don&#8217;t expect that
                                        you&#8217;re going to download
                                        fassembler today and start using it for
                                        your own projects. Even if you use
                                        subversion, and even if what you want to
                                        build is the openplans stack,
                                        you&#8217;re really not going to want to
                                        check your configuration into
                                        TOPP&#8217;s svn repository, so the
                                        first thing you have to learn is the
                                        option to use another repository, which
                                        right away suggests that maybe this tool
                                        isn&#8217;t really aimed at you. Even
                                        within TOPP, the
                                        always-check-config-into-svn feature is
                                        a bit silly at times (dev sandbox
                                        builds, buildbot builds and the like).
                                    </p>

                                    <p>
                                        We also are a very nix-centric shop, so
                                        we have no Windows story at all.
                                    </p>

                                    <p>
                                        And I agree that builds do feel more
                                        tedious to write than I would like.
                                        We&#8217;ll keep working on that.
                                    </p>

                                    <p>
                                        Some of the other flaws are just
                                        inherent in the underlying
                                        infrastructure, like python packages
                                        being hosted all over the place. I
                                        don&#8217;t like that our build failure
                                        rate is a function of the number of
                                        external websites hosting packages we
                                        need. It&#8217;s actually
                                        1-(average_uptime**n). In practice
                                        it&#8217;s high enough to be quite
                                        annoying, especially since a given
                                        site&#8217;s downtime tends to be
                                        clumpy.
                                    </p>

                                    <p>
                                        Maybe a caching HTTP proxy would help
                                        somewhat, or something like
                                        zc.buildout&#8217;s local egg cache. In
                                        practice we end up manually dumping
                                        copies of eggs into our local apache and
                                        configuring the build to look there.
                                    </p>

                                    <div class="reply"></div>
                                </div>
                            </li>
                            <li
                                class="comment odd alt thread-odd thread-alt depth-1"
                                id="comment-18649"
                            >
                                <div
                                    id="div-comment-18649"
                                    class="comment-body"
                                >
                                    <div class="comment-author vcard">
                                        <img
                                            alt=""
                                            src="https://0.gravatar.com/avatar/e369192b8082d81fbc5a8771829c60c3?s=32&amp;d=http%3A%2F%2Fblog.ianbicking.org%2Fwp-includes%2Fimages%2Fblank.gif&amp;r=PG"
                                            class="avatar avatar-32 photo"
                                            height="32"
                                            width="32"
                                        />
                                        <cite class="fn">Mark</cite>
                                        <span class="says">says:</span>
                                    </div>

                                    <div class="comment-meta commentmetadata">
                                        <a
                                            href="https://ianbicking.org/2008/06/19/my-experience-writing-a-build-system/comment-page-1/#comment-18649"
                                        >
                                            June 20, 2008 at 10:21 am</a
                                        >
                                    </div>

                                    <p>
                                        &gt;So you detect changes and remake
                                        things only as necessary. For
                                        compilation this might make sense,
                                        because you edit code and recompile a
                                        lot and its tedious to wait.
                                    </p>

                                    <p>
                                        The pure dependency based is the reason
                                        why make is much better tool than say
                                        ant, nant, etc&#8230;
                                    </p>

                                    <p>
                                        It&#8217;s great when properly written
                                        makefile completes in
                                    </p>

                                    <div class="reply"></div>
                                </div>
                            </li>
                            <li
                                class="comment byuser comment-author-ianb bypostauthor even thread-even depth-1"
                                id="comment-18650"
                            >
                                <div
                                    id="div-comment-18650"
                                    class="comment-body"
                                >
                                    <div class="comment-author vcard">
                                        <img
                                            alt=""
                                            src="https://0.gravatar.com/avatar/cc8334869c9d2a9e603017f2da805eb3?s=32&amp;d=http%3A%2F%2Fblog.ianbicking.org%2Fwp-includes%2Fimages%2Fblank.gif&amp;r=PG"
                                            class="avatar avatar-32 photo"
                                            height="32"
                                            width="32"
                                        />
                                        <cite class="fn"
                                            ><a
                                                href="../../../../index.html"
                                                rel="external nofollow"
                                                class="url"
                                                >Ian Bicking</a
                                            ></cite
                                        >
                                        <span class="says">says:</span>
                                    </div>

                                    <div class="comment-meta commentmetadata">
                                        <a
                                            href="https://ianbicking.org/2008/06/19/my-experience-writing-a-build-system/comment-page-1/#comment-18650"
                                        >
                                            June 20, 2008 at 10:25 am</a
                                        >
                                    </div>

                                    <p>
                                        Yes, perhaps one of the reasons people
                                        are picking up on file dependencies is
                                        that I started right in without
                                        describing what we&#8217;re doing.
                                        There&#8217;s a lot of different
                                        &#8220;build tools&#8221; that do
                                        radically different things. Finding the
                                        overlap between Paver and Fabric would
                                        be hard.
                                    </p>

                                    <p>
                                        <em>This</em> build tool is for
                                        deploying our stack, for production,
                                        testing, and development. It
                                        doesn&#8217;t do anything special for
                                        remote deployments (unlike Capistrano).
                                        It isn&#8217;t focused on compiling
                                        because nearly everything we have runs
                                        from source (as a result we&#8217;d save
                                        <em>no</em> time figuring out file
                                        dependencies).
                                    </p>

                                    <div class="reply"></div>
                                </div>
                            </li>
                            <li
                                class="comment odd alt thread-odd thread-alt depth-1"
                                id="comment-18651"
                            >
                                <div
                                    id="div-comment-18651"
                                    class="comment-body"
                                >
                                    <div class="comment-author vcard">
                                        <img
                                            alt=""
                                            src="https://0.gravatar.com/avatar/c82b7991f8e83a990aab7cdc48dde9ce?s=32&amp;d=http%3A%2F%2Fblog.ianbicking.org%2Fwp-includes%2Fimages%2Fblank.gif&amp;r=PG"
                                            class="avatar avatar-32 photo"
                                            height="32"
                                            width="32"
                                        />
                                        <cite class="fn">slinkp</cite>
                                        <span class="says">says:</span>
                                    </div>

                                    <div class="comment-meta commentmetadata">
                                        <a
                                            href="https://ianbicking.org/2008/06/19/my-experience-writing-a-build-system/comment-page-1/#comment-18651"
                                        >
                                            June 20, 2008 at 10:29 am</a
                                        >
                                    </div>

                                    <p>
                                        Note to &#8220;X X&#8221;: You&#8217;re
                                        assuming efficiency is a big problem for
                                        our use cases. It&#8217;s been a total
                                        non-issue.
                                    </p>

                                    <p>
                                        EDIT: partly this is because, as Ian
                                        noted, most of our stuff isn&#8217;t
                                        compiled. For instance, a build from
                                        scratch of our most complex product
                                        (opencore) takes less than ten minutes
                                        on old hardware, the bulk of which is
                                        download time. Rebuilds take less than a
                                        minute; largely this is because we
                                        delegate to tools that already handle
                                        dependency checking (easy-install, make,
                                        etc).
                                    </p>

                                    <p>
                                        For the few things we install from big
                                        tarballs (like Zope), we just manually
                                        added a check for an up-to-date tarball.
                                        This takes a few lines of code, whereas
                                        in Make it&#8217;d &#8220;just
                                        work&#8221;. But there are relatively
                                        few cases where we care, so this
                                        hasn&#8217;t been much burden.
                                    </p>

                                    <div class="reply"></div>
                                </div>
                            </li>
                            <li
                                class="comment even thread-even depth-1"
                                id="comment-18654"
                            >
                                <div
                                    id="div-comment-18654"
                                    class="comment-body"
                                >
                                    <div class="comment-author vcard">
                                        <img
                                            alt=""
                                            src="https://0.gravatar.com/avatar/c82b7991f8e83a990aab7cdc48dde9ce?s=32&amp;d=http%3A%2F%2Fblog.ianbicking.org%2Fwp-includes%2Fimages%2Fblank.gif&amp;r=PG"
                                            class="avatar avatar-32 photo"
                                            height="32"
                                            width="32"
                                        />
                                        <cite class="fn">slinkp</cite>
                                        <span class="says">says:</span>
                                    </div>

                                    <div class="comment-meta commentmetadata">
                                        <a
                                            href="https://ianbicking.org/2008/06/19/my-experience-writing-a-build-system/comment-page-1/#comment-18654"
                                        >
                                            June 20, 2008 at 10:30 am</a
                                        >
                                    </div>

                                    <p>
                                        Ian, regarding your idea of pushing
                                        support for relative paths into upstream
                                        dependencies: That sounds like a nice
                                        beautiful simple world, but I just
                                        don&#8217;t see how that&#8217;s an
                                        achievable goal in practice. We might
                                        get patches accepted by some upstream
                                        projects, assuming we have the time and
                                        smarts to do so; that has some inherent
                                        value, but as long as there&#8217;s one
                                        holdout that we really need, we&#8217;re
                                        stuffed.
                                    </p>

                                    <div class="reply"></div>
                                </div>
                            </li>
                            <li
                                class="comment byuser comment-author-ianb bypostauthor odd alt thread-odd thread-alt depth-1"
                                id="comment-18655"
                            >
                                <div
                                    id="div-comment-18655"
                                    class="comment-body"
                                >
                                    <div class="comment-author vcard">
                                        <img
                                            alt=""
                                            src="https://0.gravatar.com/avatar/cc8334869c9d2a9e603017f2da805eb3?s=32&amp;d=http%3A%2F%2Fblog.ianbicking.org%2Fwp-includes%2Fimages%2Fblank.gif&amp;r=PG"
                                            class="avatar avatar-32 photo"
                                            height="32"
                                            width="32"
                                        />
                                        <cite class="fn"
                                            ><a
                                                href="../../../../index.html"
                                                rel="external nofollow"
                                                class="url"
                                                >Ian Bicking</a
                                            ></cite
                                        >
                                        <span class="says">says:</span>
                                    </div>

                                    <div class="comment-meta commentmetadata">
                                        <a
                                            href="https://ianbicking.org/2008/06/19/my-experience-writing-a-build-system/comment-page-1/#comment-18655"
                                        >
                                            June 20, 2008 at 10:31 am</a
                                        >
                                    </div>

                                    <p>
                                        Not to say that we wouldn&#8217;t want
                                        the build to run faster&#8230; but to
                                        make it run faster we&#8217;d do work
                                        the package installation which is where
                                        a lot of the time goes, i.e., changes to
                                        easy_install, caching download
                                        dependencies, maybe using PyPI XMLRPC,
                                        or things like that.
                                    </p>

                                    <div class="reply"></div>
                                </div>
                            </li>
                            <li
                                class="comment even thread-even depth-1"
                                id="comment-18656"
                            >
                                <div
                                    id="div-comment-18656"
                                    class="comment-body"
                                >
                                    <div class="comment-author vcard">
                                        <img
                                            alt=""
                                            src="https://0.gravatar.com/avatar/4e72a8f209ac10f40a367641b40d77c6?s=32&amp;d=http%3A%2F%2Fblog.ianbicking.org%2Fwp-includes%2Fimages%2Fblank.gif&amp;r=PG"
                                            class="avatar avatar-32 photo"
                                            height="32"
                                            width="32"
                                        />
                                        <cite class="fn"
                                            ><a
                                                href="http://ooyes.net/blog"
                                                rel="external nofollow"
                                                class="url"
                                                >website design</a
                                            ></cite
                                        >
                                        <span class="says">says:</span>
                                    </div>

                                    <div class="comment-meta commentmetadata">
                                        <a
                                            href="https://ianbicking.org/2008/06/19/my-experience-writing-a-build-system/comment-page-1/#comment-18656"
                                        >
                                            June 20, 2008 at 11:10 am</a
                                        >
                                    </div>

                                    <blockquote>
                                        <p>
                                            The metaphor for the new build
                                            system was much simpler: do a list
                                            of things, top to bottom. Theres no
                                            effort into detecting changes in the
                                            build, or changes in the settings,
                                            or anything else.
                                        </p>
                                    </blockquote>

                                    <p>
                                        While this approach is obviously working
                                        for them, I can&#8217;t help but think
                                        it could cause problems in the future.
                                        You&#8217;ve essentially linearized your
                                        dependency graph, and while the current
                                        linearization is presumably correct, any
                                        change to the way the system works could
                                        render it incorrect, silently or with a
                                        big bang. Explicitly encoding your
                                        dependencies can be hard, but in my
                                        experience it results in a much less
                                        fragile, much more easily understandable
                                        system. I&#8217;ve even used
                                        [graphviz](<a
                                            href="http://www.graphviz.org/"
                                            rel="nofollow"
                                            >http://www.graphviz.org/</a
                                        >) to visualize dependency graphs, which
                                        can make clumsy architecture easier to
                                        spot.
                                    </p>

                                    <div class="reply"></div>
                                </div>
                            </li>
                            <li
                                class="comment byuser comment-author-ianb bypostauthor odd alt thread-odd thread-alt depth-1"
                                id="comment-18659"
                            >
                                <div
                                    id="div-comment-18659"
                                    class="comment-body"
                                >
                                    <div class="comment-author vcard">
                                        <img
                                            alt=""
                                            src="https://0.gravatar.com/avatar/cc8334869c9d2a9e603017f2da805eb3?s=32&amp;d=http%3A%2F%2Fblog.ianbicking.org%2Fwp-includes%2Fimages%2Fblank.gif&amp;r=PG"
                                            class="avatar avatar-32 photo"
                                            height="32"
                                            width="32"
                                        />
                                        <cite class="fn"
                                            ><a
                                                href="../../../../index.html"
                                                rel="external nofollow"
                                                class="url"
                                                >Ian Bicking</a
                                            ></cite
                                        >
                                        <span class="says">says:</span>
                                    </div>

                                    <div class="comment-meta commentmetadata">
                                        <a
                                            href="https://ianbicking.org/2008/06/19/my-experience-writing-a-build-system/comment-page-1/#comment-18659"
                                        >
                                            June 20, 2008 at 11:24 am</a
                                        >
                                    </div>

                                    <p>
                                        We don&#8217;t have a dependency system
                                        because we run all steps on every build.
                                        Any skipped steps are done on a
                                        case-by-case basis with careful checks
                                        specific to the step we are skipping. I
                                        really can&#8217;t imagine anything a
                                        dependency system could accomplish. If
                                        <em>you</em> can imagine something, then
                                        you are probably thinking of a different
                                        kind of tool than ours, one that serves
                                        a different purpose and is used for
                                        different tasks.
                                    </p>

                                    <div class="reply"></div>
                                </div>
                            </li>
                            <li
                                class="comment even thread-even depth-1"
                                id="comment-18678"
                            >
                                <div
                                    id="div-comment-18678"
                                    class="comment-body"
                                >
                                    <div class="comment-author vcard">
                                        <img
                                            alt=""
                                            src="https://0.gravatar.com/avatar/6b34034117344a3cc020ac4b41a5f7aa?s=32&amp;d=http%3A%2F%2Fblog.ianbicking.org%2Fwp-includes%2Fimages%2Fblank.gif&amp;r=PG"
                                            class="avatar avatar-32 photo"
                                            height="32"
                                            width="32"
                                        />
                                        <cite class="fn"
                                            ><a
                                                href="http://trac.minitage.org"
                                                rel="external nofollow"
                                                class="url"
                                                >kiorky</a
                                            ></cite
                                        >
                                        <span class="says">says:</span>
                                    </div>

                                    <div class="comment-meta commentmetadata">
                                        <a
                                            href="https://ianbicking.org/2008/06/19/my-experience-writing-a-build-system/comment-page-1/#comment-18678"
                                        >
                                            June 21, 2008 at 3:16 am</a
                                        >
                                    </div>

                                    <p>
                                        I&#8217;m pretty glad you noticed
                                        minitage as i don&#8217;t have even
                                        released it officially yet.
                                    </p>

                                    <p>
                                        The zc.buildout rebuilding&#8217;s habit
                                        is one of the main things that make me
                                        made minitage. I&#8217;m happy with
                                        zc.buildout but rebuilding everything is
                                        simply not acceptable. So i just do it
                                        in an atomic way now. It builds one
                                        thing, at one place, that&#8217;s all.
                                        So we can afford to rebuild something
                                        entirely as just that will be rebuilt.
                                    </p>

                                    <p>
                                        Although minitage is working at the
                                        moment, it can be rough to be used by a
                                        classical user.
                                    </p>

                                    <p>Why?</p>

                                    <ul>
                                        <li>
                                            <p>
                                                Because the documentation is not
                                                really all up to date to the new
                                                version.
                                            </p>
                                        </li>
                                        <li>
                                            <p>
                                                Because it is made by a geek :p
                                            </p>
                                        </li>
                                        <li>
                                            <p>
                                                Because this is inspired by
                                                complicated tools
                                                (Gentoo&#8217;s portage, or
                                                other ports systems.)
                                            </p>
                                        </li>
                                    </ul>

                                    <p>What can that brings to you ?</p>

                                    <ul>
                                        <li>
                                            <p>
                                                Minitage lives on top of
                                                virtualenv, virtualenv will set
                                                its prefix.
                                            </p>
                                        </li>
                                        <li>
                                            <p>
                                                More than just installing python
                                                libraries, it installs also
                                                system software pieces like
                                                postgresql or even python. Its
                                                final goal is to deploy a
                                                project from start to end in a
                                                re-usable manner.
                                            </p>
                                        </li>
                                        <li>
                                            <p>
                                                Free from zc.recipe.egg. I
                                                didn&#8217;t like too the
                                                approach of that recipe. Offline
                                                mode / local indexes were very
                                                problematic with it. So i
                                                implemented a recipe for
                                                minitage that borrowed code from
                                                zc.recipe.egg at the difference
                                                that it ll search in the cache
                                                before looking online for
                                                dependencies. That means if you
                                                have putted the egg inside the
                                                cache prior from this buildout
                                                execution, there will be no
                                                Online access at all, no index
                                                check.
                                            </p>
                                        </li>
                                        <li>
                                            <p>
                                                SVN (and others scms, ftp or
                                                http urls) checkouts can be up
                                                to you too with that recipe. See
                                                this buildout template:
                                                <a
                                                    href="http://tinyurl.com/5c93lq"
                                                    rel="nofollow"
                                                    >http://tinyurl.com/5c93lq</a
                                                >
                                                You can have it with paster and
                                                minitage.paste
                                                (minitage.geodjango template) It
                                                uses custom GeoDjango egg that
                                                is not on pypi, and svn checkout
                                                to get the sources to build :)
                                            </p>
                                        </li>
                                        <li>
                                            <p>
                                                An enhanced CMMI build recipe
                                                wich integrates well with
                                                minitage for building
                                                &#8220;compiled&#8221;
                                                dependencies and interlink with
                                                other stuff installed into
                                                minitage.
                                            </p>
                                        </li>
                                    </ul>

                                    <p>
                                        More than an abstraction, minitage is in
                                        spirit a meta package manager. It does
                                        nothing by itself and relies on
                                        &#8216;install methods&#8217;. At this
                                        time, only buildout is available but it
                                        is as simply as to make recipes to
                                        implement install methods. Its only goal
                                        is to maintain dependencies to schedule
                                        the build process order and the install
                                        layout :
                                        <a
                                            href="http://www.minitage.org/doc/rst/spec.html#the-installation-layout"
                                            rel="nofollow"
                                            >http://www.minitage.org/doc/rst/spec.html#the-installation-layout</a
                                        >.
                                    </p>

                                    <p>
                                        For the log verbosity, minitage is
                                        pretty loud :p .
                                    </p>

                                    <p>
                                        NA: The documentation moved to
                                        <a
                                            href="http://www.minitage.org/doc/rst/"
                                            rel="nofollow"
                                            >http://www.minitage.org/doc/rst/</a
                                        >, you seemed to use a pretty old link.
                                    </p>

                                    <div class="reply"></div>
                                </div>
                            </li>
                            <li
                                class="comment odd alt thread-odd thread-alt depth-1"
                                id="comment-18777"
                            >
                                <div
                                    id="div-comment-18777"
                                    class="comment-body"
                                >
                                    <div class="comment-author vcard">
                                        <img
                                            alt=""
                                            src="https://1.gravatar.com/avatar/f4749cce627b584fb9e59966a5d2c924?s=32&amp;d=http%3A%2F%2Fblog.ianbicking.org%2Fwp-includes%2Fimages%2Fblank.gif&amp;r=PG"
                                            class="avatar avatar-32 photo"
                                            height="32"
                                            width="32"
                                        />
                                        <cite class="fn"
                                            ><a
                                                href="http://www.blueskyonmars.com"
                                                rel="external nofollow"
                                                class="url"
                                                >Kevin Dangoor</a
                                            ></cite
                                        >
                                        <span class="says">says:</span>
                                    </div>

                                    <div class="comment-meta commentmetadata">
                                        <a
                                            href="https://ianbicking.org/2008/06/19/my-experience-writing-a-build-system/comment-page-1/#comment-18777"
                                        >
                                            June 22, 2008 at 9:27 pm</a
                                        >
                                    </div>

                                    <p>Hi Ian,</p>

                                    <p>
                                        Thanks for writing up all of your
                                        thoughts about build tools (and for
                                        mentioning Paver). I should note that
                                        Paver uses a modified path.py that
                                        supports &#8220;dry-run&#8221;. It could
                                        easily be extended further to support
                                        prompting, which is something I just
                                        hadn&#8217;t thought of.
                                    </p>

                                    <p>
                                        I&#8217;ve been considering zc.buildout
                                        integration as my next step for Paver,
                                        but I&#8217;m going to think about
                                        minitage and the process you&#8217;ve
                                        created around virtualenv, because I
                                        have noticed some of the same annoyances
                                        with zc.buildout that you have. One
                                        thing that made buildout integration
                                        appealing to me is that there are so
                                        many recipes that people have written
                                        for a variety of things. However, I
                                        think that many of these recipes exist
                                        simply because that&#8217;s the only way
                                        to write code for a buildout, which is
                                        buildout&#8217;s most annoying trait,
                                        imho. (I believe someone has written a
                                        recipe that lets you put some code in
                                        your buildout config file, but
                                        eww&#8230;)
                                    </p>

                                    <p>
                                        By the way, so far I have not at all
                                        regretted my decision for Paver&#8217;s
                                        configuration and task definition to be
                                        entirely in Python. For Python
                                        programmers, there&#8217;s very little
                                        that is unclear about what will happen.
                                        (The trickiest things at present are
                                        those areas around distutils
                                        integration.)
                                    </p>

                                    <p>
                                        Paver supports lazy evaluation of
                                        configuration items via callables
                                        (lambdas, generally). This has worked
                                        fine for my needs thus far.
                                    </p>

                                    <p>
                                        On the whole, I&#8217;m quite happy to
                                        see all of this activity around build
                                        tools, because it has been a source of
                                        annoyance (obviously for many).
                                    </p>

                                    <p>Kevin</p>

                                    <div class="reply"></div>
                                </div>
                            </li>
                            <li
                                class="comment even thread-even depth-1"
                                id="comment-20560"
                            >
                                <div
                                    id="div-comment-20560"
                                    class="comment-body"
                                >
                                    <div class="comment-author vcard">
                                        <img
                                            alt=""
                                            src="https://0.gravatar.com/avatar/84172872e4f61a5db11bcd610eca5c08?s=32&amp;d=http%3A%2F%2Fblog.ianbicking.org%2Fwp-includes%2Fimages%2Fblank.gif&amp;r=PG"
                                            class="avatar avatar-32 photo"
                                            height="32"
                                            width="32"
                                        />
                                        <cite class="fn"
                                            ><a
                                                href="http://maxischenko.in.ua"
                                                rel="external nofollow"
                                                class="url"
                                                >Max Ischenko</a
                                            ></cite
                                        >
                                        <span class="says">says:</span>
                                    </div>

                                    <div class="comment-meta commentmetadata">
                                        <a
                                            href="https://ianbicking.org/2008/06/19/my-experience-writing-a-build-system/comment-page-1/#comment-20560"
                                        >
                                            July 8, 2008 at 1:24 am</a
                                        >
                                    </div>

                                    <p>Thanks for sharing this.</p>

                                    <p>
                                        I&#8217;ve had the same problem &#8211;
                                        building a tool to deploy
                                        [developers.org.ua](<a
                                            href="http://www.developers.org.ua"
                                            rel="nofollow"
                                            >http://www.developers.org.ua</a
                                        >) site (uses Pylons, Django, WordPress,
                                        Openads and lots of other smaller libs).
                                    </p>

                                    <p>
                                        Thus your reflections with
                                        fassember/zc.buildout were helpful to
                                        &#8220;diff against&#8221;.
                                    </p>

                                    <p>
                                        I use Tempita to write
                                        deployment-specific files, such as paste
                                        .ini or apache vhost files.
                                        Configuration data stored in YAML
                                        format; there is a common.yaml which
                                        holds shared config info plus a .yaml
                                        file per each deployment, which contain
                                        deployment-specific options like
                                        database creds.
                                    </p>

                                    <p>
                                        Each build/deployment is
                                        &#8220;self-contained&#8221;, that is,
                                        all files are put under a specific dir.
                                        The system env is configured (with
                                        symlinks or direct configuration) to use
                                        corresponding bits from the deployment.
                                        E.g. crond looks for its script under
                                        DROOT/environ/cron.* dirs.
                                    </p>

                                    <p>
                                        My main &#8220;issue&#8221; with it
                                        &#8211; since it&#8217;s built by me
                                        (in-house) it means I have to maintain
                                        it. ;) Therefore I&#8217;d like to
                                        migrate/use some existing tool if/when
                                        it is available. Some [capistrano for
                                        python](<a
                                            href="http://maxischenko.in.ua/blog/entries/118/capistrano-for-python/"
                                            rel="nofollow"
                                            >http://maxischenko.in.ua/blog/entries/118/capistrano-for-python/</a
                                        >) or whatever it would be.
                                    </p>

                                    <div class="reply"></div>
                                </div>
                            </li>
                            <li
                                class="comment odd alt thread-odd thread-alt depth-1"
                                id="comment-20990"
                            >
                                <div
                                    id="div-comment-20990"
                                    class="comment-body"
                                >
                                    <div class="comment-author vcard">
                                        <img
                                            alt=""
                                            src="https://0.gravatar.com/avatar/232a83c15636ceabbbeb4eb6784c14db?s=32&amp;d=http%3A%2F%2Fblog.ianbicking.org%2Fwp-includes%2Fimages%2Fblank.gif&amp;r=PG"
                                            class="avatar avatar-32 photo"
                                            height="32"
                                            width="32"
                                        />
                                        <cite class="fn"
                                            ><a
                                                href="http://www.80millionmoviesfree.com/"
                                                rel="external nofollow"
                                                class="url"
                                                >dehande</a
                                            ></cite
                                        >
                                        <span class="says">says:</span>
                                    </div>

                                    <div class="comment-meta commentmetadata">
                                        <a
                                            href="https://ianbicking.org/2008/06/19/my-experience-writing-a-build-system/comment-page-1/#comment-20990"
                                        >
                                            July 10, 2008 at 7:06 am</a
                                        >
                                    </div>

                                    <p>
                                        So you detect changes and remake things
                                        only as necessary. For compilation this
                                        might make sense, because you edit code
                                        and recompile a lot and its tedious to
                                        wait.
                                    </p>

                                    <p>
                                        The pure dependency based is the reason
                                        why make is much better tool than say
                                        ant, nant, etc
                                    </p>

                                    <p>
                                        Its great when properly written
                                        makefile completes in
                                    </p>

                                    <div class="reply"></div>
                                </div>
                            </li>
                        </ul>

                        <div class="navigation">
                            <div class="alignleft"></div>
                            <div class="alignright"></div>
                        </div>
                    </div>

                    <div class="navigation">
                        <div class="nav-left">
                            &laquo;
                            <a
                                href="../../09/thoughts-about-the-erlang-runtime/index.html"
                                rel="prev"
                                >Thoughts About the Erlang Runtime</a
                            >
                        </div>
                        <div class="nav-right">
                            <a
                                href="../../../07/28/me-in-berlin-amsterdam/index.html"
                                rel="next"
                                >Me In Berlin &#038; Amsterdam</a
                            >
                            &raquo;
                        </div>
                    </div>
                    <!-- END NAVIGATION -->
                </div>
                <!-- END CONTENT -->
            </div>
            <!-- END CONTAINER  -->

            <div id="sidebar">
                <ul>
                    <li id="home-link">
                        <h2>
                            <a
                                href="../../../../index.html"
                                title="Ian Bicking: a blog"
                                >Home</a
                            >
                        </h2>
                    </li>
                    <li id="text-315934862" class="widget widget_text">
                        <h2 class="widgettitle">About</h2>
                        <div class="textwidget">
                            Ian is a developer with Mozilla,
                            <a href="http://ianbicking.appspot.com/projects"
                                >Python open source developer</a
                            >, actually uses
                            <a
                                href="https://plus.google.com/u/0/104537541227697934010/posts"
                                >Google+</a
                            >
                            more than
                            <a href="http://twitter.com/ianbicking">twitter</a>
                            and lives in Minneapolis.<br />
                            <span
                                class="gittip-0001"
                                gittip-username="ianbicking"
                            ></span>
                            <script
                                id="gittip-0001"
                                src="https://www.gittip.com/assets/widgets/0001.js"
                            ></script>
                        </div>
                    </li>
                    <li id="text-315934863" class="widget widget_text">
                        <div class="textwidget">
                            <!-- <script type="text/javascript">mbgc='f5f5f5';ww='160';mbc='cecece';bbc='3F79D5';bmobc='3b71c6';bbgc='4889F0';bmoc='3F79D5';bfc='FFFFFF';bmofc='ffffff';tlc='cecece';tc='6a6a6a';nc='6a6a6a';bc='6a6a6a';l='y';fs='16';fsb='13';bw='100';ff='4';lu='6a6a6a';pc='4889F0';wh='340';b='s'; pid='104537541227697934010';</script><script type="text/javascript" src="http://widgetsplus.com/google_plus_widget.js"></script> -->
                        </div>
                    </li>
                    <li id="archives-2" class="widget widget_archive">
                        <h2 class="widgettitle">Archives</h2>
                        <ul>
                            <li>
                                <a
                                    href="../../../../2012/10/index.html"
                                    title="October 2012"
                                    >October 2012</a
                                >
                            </li>
                            <li>
                                <a
                                    href="../../../../2012/02/index.html"
                                    title="February 2012"
                                    >February 2012</a
                                >
                            </li>
                            <li>
                                <a
                                    href="../../../../2011/04/index.html"
                                    title="April 2011"
                                    >April 2011</a
                                >
                            </li>
                            <li>
                                <a
                                    href="../../../../2011/03/index.html"
                                    title="March 2011"
                                    >March 2011</a
                                >
                            </li>
                            <li>
                                <a
                                    href="../../../../2010/09/index.html"
                                    title="September 2010"
                                    >September 2010</a
                                >
                            </li>
                            <li>
                                <a
                                    href="../../../../2010/08/index.html"
                                    title="August 2010"
                                    >August 2010</a
                                >
                            </li>
                            <li>
                                <a
                                    href="../../../../2010/05/index.html"
                                    title="May 2010"
                                    >May 2010</a
                                >
                            </li>
                            <li>
                                <a
                                    href="../../../../2010/04/index.html"
                                    title="April 2010"
                                    >April 2010</a
                                >
                            </li>
                            <li>
                                <a
                                    href="../../../../2010/03/index.html"
                                    title="March 2010"
                                    >March 2010</a
                                >
                            </li>
                            <li>
                                <a
                                    href="../../../../2010/02/index.html"
                                    title="February 2010"
                                    >February 2010</a
                                >
                            </li>
                            <li>
                                <a
                                    href="../../../../2010/01/index.html"
                                    title="January 2010"
                                    >January 2010</a
                                >
                            </li>
                            <li>
                                <a
                                    href="../../../../2009/09/index.html"
                                    title="September 2009"
                                    >September 2009</a
                                >
                            </li>
                            <li>
                                <a
                                    href="../../../../2009/05/index.html"
                                    title="May 2009"
                                    >May 2009</a
                                >
                            </li>
                            <li>
                                <a
                                    href="../../../../2009/04/index.html"
                                    title="April 2009"
                                    >April 2009</a
                                >
                            </li>
                            <li>
                                <a
                                    href="../../../../2009/01/index.html"
                                    title="January 2009"
                                    >January 2009</a
                                >
                            </li>
                            <li>
                                <a
                                    href="../../../12/index.html"
                                    title="December 2008"
                                    >December 2008</a
                                >
                            </li>
                            <li>
                                <a
                                    href="../../../11/index.html"
                                    title="November 2008"
                                    >November 2008</a
                                >
                            </li>
                            <li>
                                <a
                                    href="../../../10/index.html"
                                    title="October 2008"
                                    >October 2008</a
                                >
                            </li>
                            <li>
                                <a
                                    href="../../../09/index.html"
                                    title="September 2008"
                                    >September 2008</a
                                >
                            </li>
                            <li>
                                <a
                                    href="../../../08/index.html"
                                    title="August 2008"
                                    >August 2008</a
                                >
                            </li>
                            <li>
                                <a
                                    href="../../../07/index.html"
                                    title="July 2008"
                                    >July 2008</a
                                >
                            </li>
                            <li>
                                <a href="../../index.html" title="June 2008"
                                    >June 2008</a
                                >
                            </li>
                            <li>
                                <a
                                    href="../../../05/index.html"
                                    title="May 2008"
                                    >May 2008</a
                                >
                            </li>
                            <li>
                                <a
                                    href="../../../04/index.html"
                                    title="April 2008"
                                    >April 2008</a
                                >
                            </li>
                            <li>
                                <a
                                    href="../../../03/index.html"
                                    title="March 2008"
                                    >March 2008</a
                                >
                            </li>
                            <li>
                                <a
                                    href="../../../02/index.html"
                                    title="February 2008"
                                    >February 2008</a
                                >
                            </li>
                            <li>
                                <a
                                    href="../../../01/index.html"
                                    title="January 2008"
                                    >January 2008</a
                                >
                            </li>
                            <li>
                                <a
                                    href="../../../../2007/11/index.html"
                                    title="November 2007"
                                    >November 2007</a
                                >
                            </li>
                            <li>
                                <a
                                    href="../../../../2007/10/index.html"
                                    title="October 2007"
                                    >October 2007</a
                                >
                            </li>
                            <li>
                                <a
                                    href="../../../../2007/09/index.html"
                                    title="September 2007"
                                    >September 2007</a
                                >
                            </li>
                            <li>
                                <a
                                    href="../../../../2007/08/index.html"
                                    title="August 2007"
                                    >August 2007</a
                                >
                            </li>
                            <li>
                                <a
                                    href="../../../../2007/07/index.html"
                                    title="July 2007"
                                    >July 2007</a
                                >
                            </li>
                        </ul>
                    </li>
                    <li id="text-315934861" class="widget widget_text">
                        <div class="textwidget">
                            <a href="../../../../archive/index.html"
                                >The Older Archives</a
                            >
                        </div>
                    </li>
                    <li id="categories-1" class="widget widget_categories">
                        <h2 class="widgettitle">Categories</h2>
                        <ul>
                            <li class="cat-item cat-item-12">
                                <a
                                    href="../../../../category/erlang/index.html"
                                    title="View all posts filed under Erlang"
                                    >Erlang</a
                                >
                            </li>
                            <li class="cat-item cat-item-11">
                                <a
                                    href="../../../../category/html/index.html"
                                    title="View all posts filed under HTML"
                                    >HTML</a
                                >
                            </li>
                            <li class="cat-item cat-item-8">
                                <a
                                    href="../../../../category/javascript/index.html"
                                    title="View all posts filed under Javascript"
                                    >Javascript</a
                                >
                            </li>
                            <li class="cat-item cat-item-15">
                                <a
                                    href="../../../../category/licensing/index.html"
                                    title="View all posts filed under Licensing"
                                    >Licensing</a
                                >
                            </li>
                            <li class="cat-item cat-item-18">
                                <a
                                    href="../../../../category/mozilla/index.html"
                                    title="View all posts filed under Mozilla"
                                    >Mozilla</a
                                >
                            </li>
                            <li class="cat-item cat-item-5">
                                <a
                                    href="../../../../category/notech/index.html"
                                    title="View all posts filed under Non-technical"
                                    >Non-technical</a
                                >
                            </li>
                            <li class="cat-item cat-item-6">
                                <a
                                    href="../../../../category/olpc/index.html"
                                    title="View all posts filed under OLPC"
                                    >OLPC</a
                                >
                            </li>
                            <li class="cat-item cat-item-14">
                                <a
                                    href="../../../../category/packaging/index.html"
                                    title="View all posts filed under Packaging"
                                    >Packaging</a
                                >
                            </li>
                            <li class="cat-item cat-item-4">
                                <a
                                    href="../../../../category/politics/index.html"
                                    title="View all posts filed under Politics"
                                    >Politics</a
                                >
                            </li>
                            <li class="cat-item cat-item-3">
                                <a
                                    href="../../../../category/programming/index.html"
                                    title="View all posts filed under Programming"
                                    >Programming</a
                                >
                            </li>
                            <li class="cat-item cat-item-7">
                                <a
                                    href="../../../../category/python/index.html"
                                    title="View all posts filed under Python"
                                    >Python</a
                                >
                            </li>
                            <li class="cat-item cat-item-10">
                                <a
                                    href="../../../../category/ruby/index.html"
                                    title="View all posts filed under Ruby"
                                    >Ruby</a
                                >
                            </li>
                            <li class="cat-item cat-item-19">
                                <a
                                    href="../../../../category/security/index.html"
                                    title="View all posts filed under Security"
                                    >Security</a
                                >
                            </li>
                            <li class="cat-item cat-item-16">
                                <a
                                    href="../../../../category/silverlining.1"
                                    title="View all posts filed under Silver Lining"
                                    >Silver Lining</a
                                >
                            </li>
                            <li class="cat-item cat-item-20">
                                <a
                                    href="../../../../category/programming/testing/index.html"
                                    title="View all posts filed under Testing"
                                    >Testing</a
                                >
                            </li>
                            <li class="cat-item cat-item-9">
                                <a
                                    href="../../../../category/web/index.html"
                                    title="View all posts filed under Web"
                                    >Web</a
                                >
                            </li>
                            <li class="cat-item cat-item-13">
                                <a
                                    href="../../../../category/zopeplone/index.html"
                                    title="View all posts filed under Zope/Plone"
                                    >Zope/Plone</a
                                >
                            </li>
                        </ul>
                    </li>
                    <li id="search-2" class="widget widget_search">
                        <form
                            id="searchform"
                            method="get"
                            action="../../../../index.html"
                        >
                            <div>
                                <input
                                    id="s"
                                    name="s"
                                    type="text"
                                    value=""
                                    tabindex="1"
                                    size="10"
                                />
                                <input
                                    id="searchsubmit"
                                    name="searchsubmit"
                                    type="submit"
                                    value="Find"
                                    tabindex="2"
                                />
                            </div>
                        </form>
                    </li>
                    <li
                        id="recent-posts-2"
                        class="widget widget_recent_entries"
                    >
                        <h2 class="widgettitle">Recent Posts</h2>
                        <ul>
                            <li>
                                <a
                                    href="../../../../index.html?p=291"
                                    title="Why doctest.js is better than Python&#8217;s doctest"
                                    >Why doctest.js is better than
                                    Python&#8217;s doctest</a
                                >
                            </li>
                            <li>
                                <a
                                    href="../../../../index.html?p=283"
                                    title="Python Application Package"
                                    >Python Application Package</a
                                >
                            </li>
                            <li>
                                <a
                                    href="../../../../index.html?p=277"
                                    title="Git-as-sync, not source-control-as-deployment"
                                    >Git-as-sync, not
                                    source-control-as-deployment</a
                                >
                            </li>
                            <li>
                                <a
                                    href="../../../../index.html?p=253"
                                    title="My Unsolicited Advice For PyPy"
                                    >My Unsolicited Advice For PyPy</a
                                >
                            </li>
                            <li>
                                <a
                                    href="../../../../index.html?p=250"
                                    title="A Python Web Application Package and Format (we should make one)"
                                    >A Python Web Application Package and Format
                                    (we should make one)</a
                                >
                            </li>
                        </ul>
                    </li>
                    <li
                        id="recent-comments-2"
                        class="widget widget_recent_comments"
                    >
                        <h2 class="widgettitle">Recent Comments</h2>
                        <ul id="recentcomments">
                            <li class="recentcomments">
                                <a
                                    href="http://www.mirsa.com.tr"
                                    rel="external nofollow"
                                    class="url"
                                    >havalandrma</a
                                >
                                on
                                <a
                                    href="../../../../2012/10/02/why-doctest-js-is-better-than-pythons-doctest/comment-page-1/index.html#comment-228633"
                                    >Why doctest.js is better than
                                    Python&#8217;s doctest</a
                                >
                            </li>
                            <li class="recentcomments">
                                <a
                                    href="http://redealmeidense.com.br/portalx/modules/"
                                    rel="external nofollow"
                                    class="url"
                                    >this website</a
                                >
                                on
                                <a
                                    href="../../../../2012/10/02/why-doctest-js-is-better-than-pythons-doctest/comment-page-1/index.html#comment-196267"
                                    >Why doctest.js is better than
                                    Python&#8217;s doctest</a
                                >
                            </li>
                            <li class="recentcomments">
                                Eric Pierce on
                                <a
                                    href="../../../../2012/10/02/why-doctest-js-is-better-than-pythons-doctest/comment-page-1/index.html#comment-195322"
                                    >Why doctest.js is better than
                                    Python&#8217;s doctest</a
                                >
                            </li>
                            <li class="recentcomments">
                                Paul Brian on
                                <a
                                    href="../../../../2012/10/02/why-doctest-js-is-better-than-pythons-doctest/comment-page-1/index.html#comment-195321"
                                    >Why doctest.js is better than
                                    Python&#8217;s doctest</a
                                >
                            </li>
                            <li class="recentcomments">
                                <a
                                    href="http://benjiyork.com"
                                    rel="external nofollow"
                                    class="url"
                                    >Benji York</a
                                >
                                on
                                <a
                                    href="../../../../2012/10/02/why-doctest-js-is-better-than-pythons-doctest/comment-page-1/index.html#comment-195320"
                                    >Why doctest.js is better than
                                    Python&#8217;s doctest</a
                                >
                            </li>
                        </ul>
                    </li>
                </ul>
            </div>

            <div id="footer">
                <p>
                    &copy; 2013 Ian Bicking<!--
Does this commenting make me evil?
			|
			Thanks, <a href="http://wordpress.org/" title="WordPress">WordPress</a>
			|
			<a href="http://www.plaintxt.org/themes/barthelme/" title="Barthelme for WordPress" rel="follow">Barthelme</a> theme by <a href="http://scottwallick.com/" title="scottwallick.com" rel="follow">Scott</a>
			| <!-- The following is a link to the theme author's sponsor. Please consider its smallness and that Scott was nice enough to make this theme publically available. -->
                    Sponsor:
                    <a
                        href="http://www.active-sandals.com/womreefsan.html"
                        title="Support: Reef Sandals"
                        >Reef Sandals</a
                    >
                    | Valid
                    <a
                        href="http://validator.w3.org/check?uri=http://blog.ianbicking.org&amp;outline=1&amp;verbose=1"
                        title="Valid XHTML 1.0 Strict"
                        rel="nofollow"
                        >XHTML</a
                    >
                    &amp;
                    <a
                        href="http://jigsaw.w3.org/css-validator/validator?uri=https://ianbicking.org/wp-content/themes/Barthelme-ianb/style.css&amp;profile=css2&amp;warning=no"
                        title="Valid CSS"
                        rel="nofollow"
                        >CSS</a
                    >
                    | --> RSS:
                    <a
                        href="../../../../feed/rss/index.html"
                        title="Ian Bicking: a blog RSS 2.0 (XML) Feed"
                        rel="alternate"
                        type="application/rss+xml"
                        >Posts</a
                    >
                    &amp;
                    <a
                        href="../../../../comments/feed/index.html"
                        title="Ian Bicking: a blog Comments RSS 2.0 (XML) Feed"
                        rel="alternate"
                        type="application/rss+xml"
                        >Comments</a
                    >
                </p>
            </div>
        </div>
        <!-- END WRAPPER -->

        <!-- Somehow 39 queries occured in 1.079 seconds. Magic! -->
        <!-- The "Barthelme" theme copyright (c) 2006 Scott Allan Wallick - http://www.plaintxt.org/themes/ -->
        <script
            type="text/javascript"
            src="../../../../wp-includes/js/comment-reply.js?ver=3.4.2"
        ></script>

        <!-- Google Analytics -->
    </body>
</html>
