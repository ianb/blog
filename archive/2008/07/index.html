<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <!-- MOBIFY - DO NOT ALTER - PASTE IMMEDIATELY AFTER OPENING HEAD TAG -->
        <script type="text/javascript">
            /*<![CDATA[*/ (function (a) {
                function b(a, b) {
                    if (+a) return ~a || (d.cookie = h + "=; path=/");
                    (j = d.createElement(e)),
                        (k = d.getElementsByTagName(e)[0]),
                        (j.src = a),
                        b && (j.onload = j.onerror = b),
                        k.parentNode.insertBefore(j, k);
                }
                function c() {
                    n.api || b(l.shift() || -1, c);
                }
                if (this.Mobify) return;
                var d = document,
                    e = "script",
                    f = "mobify",
                    g = "." + f + ".com/",
                    h = f + "-path",
                    i = g + "un" + f + ".js",
                    j,
                    k,
                    l = [!1, 1],
                    m,
                    n = (this.Mobify = {
                        points: [+new Date()],
                        tagVersion: [6, 0],
                    }),
                    o = /(; |#|&|^)mobify-path=([^&;]*)/g.exec(
                        location.hash + "; " + d.cookie
                    );
                o
                    ? (m = o[2]) &&
                      !+(m = sessionStorage[h] || m) &&
                      (l = [!0, "//preview" + g + escape(m)])
                    : ((l = a() || l),
                      l[0] && l.push("//cdn" + i, "//files01" + i)),
                    l.shift()
                        ? (d.write('<plaintext style="display:none;">'),
                          setTimeout(c))
                        : b(l[0]);
            })(function () {
                if (
                    /ip(hone|od)|android.*(mobile)|blackberry.*applewebkit/i.test(
                        navigator.userAgent
                    )
                ) {
                    return [
                        1,
                        "//cdn.mobify.com/sites/ians-blog/production/mobify.js",
                    ];
                }
            }); /*]]>*/
        </script>
        <!-- END MOBIFY -->
        <title>Ian Bicking: a blog :: 2008 :: July</title>
        <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
        <meta name="generator" content="WordPress 3.4.2" />
        <!-- LEAVE FOR STATS -->
        <meta name="description" content="" />
        <link
            rel="stylesheet"
            title="plaintxtSimpler"
            href="../../wp-content/themes/Barthelme-ianb/style.css"
            type="text/css"
            media="all"
        />
        <link rel="start" href="../../index.html" title="Ian Bicking: a blog" />
        <link
            rel="alternate"
            type="application/atom+xml"
            title="Ian Bicking: a blog Atom Feed"
            href="../../feed/atom/index.html"
        />
        <link
            rel="alternate"
            type="application/rss+xml"
            title="Ian Bicking: a blog RSS 2.0 Feed"
            href="../../feed/rss/index.html"
        />
        <link
            rel="alternate"
            type="application/rss+xml"
            title="Ian Bicking: a blog Comments RSS 2.0 Feed"
            href="../../comments/feed/index.html"
        />
        <link
            rel="alternate"
            type="application/rdf+xml"
            title="Ian Bicking: a blog RSS 1.0"
            href="../../feed/rdf/index.html"
        />
        <link
            rel="alternate"
            type="text/xml"
            title="Ian Bicking: a blog RSS 0.92 Feed"
            href="../../feed/rss/index.html"
        />

        <link
            rel="archives"
            title="October 2012"
            href="../../2012/10/index.html"
        />
        <link
            rel="archives"
            title="February 2012"
            href="../../2012/02/index.html"
        />
        <link
            rel="archives"
            title="April 2011"
            href="../../2011/04/index.html"
        />
        <link
            rel="archives"
            title="March 2011"
            href="../../2011/03/index.html"
        />
        <link
            rel="archives"
            title="September 2010"
            href="../../2010/09/index.html"
        />
        <link
            rel="archives"
            title="August 2010"
            href="../../2010/08/index.html"
        />
        <link rel="archives" title="May 2010" href="../../2010/05/index.html" />
        <link
            rel="archives"
            title="April 2010"
            href="../../2010/04/index.html"
        />
        <link
            rel="archives"
            title="March 2010"
            href="../../2010/03/index.html"
        />
        <link
            rel="archives"
            title="February 2010"
            href="../../2010/02/index.html"
        />
        <link
            rel="archives"
            title="January 2010"
            href="../../2010/01/index.html"
        />
        <link
            rel="archives"
            title="September 2009"
            href="../../2009/09/index.html"
        />
        <link rel="archives" title="May 2009" href="../../2009/05/index.html" />
        <link
            rel="archives"
            title="April 2009"
            href="../../2009/04/index.html"
        />
        <link
            rel="archives"
            title="January 2009"
            href="../../2009/01/index.html"
        />
        <link rel="archives" title="December 2008" href="../12/index.html" />
        <link rel="archives" title="November 2008" href="../11/index.html" />
        <link rel="archives" title="October 2008" href="../10/index.html" />
        <link rel="archives" title="September 2008" href="../09/index.html" />
        <link rel="archives" title="August 2008" href="../08/index.html" />
        <link rel="archives" title="July 2008" href="index.html" />
        <link rel="archives" title="June 2008" href="../06/index.html" />
        <link rel="archives" title="May 2008" href="../05/index.html" />
        <link rel="archives" title="April 2008" href="../04/index.html" />
        <link rel="archives" title="March 2008" href="../03/index.html" />
        <link rel="archives" title="February 2008" href="../02/index.html" />
        <link rel="archives" title="January 2008" href="../01/index.html" />
        <link
            rel="archives"
            title="November 2007"
            href="../../2007/11/index.html"
        />
        <link
            rel="archives"
            title="October 2007"
            href="../../2007/10/index.html"
        />
        <link
            rel="archives"
            title="September 2007"
            href="../../2007/09/index.html"
        />
        <link
            rel="archives"
            title="August 2007"
            href="../../2007/08/index.html"
        />
        <link
            rel="archives"
            title="July 2007"
            href="../../2007/07/index.html"
        />
        <link
            rel="EditURI"
            type="application/rsd+xml"
            title="RSD"
            href="../../xmlrpc.php?rsd"
        />
        <link
            rel="wlwmanifest"
            type="application/wlwmanifest+xml"
            href="../../wp-includes/wlwmanifest.xml"
        />
        <meta name="generator" content="WordPress 3.4.2" />
        <link
            rel="stylesheet"
            href="../../wp-content/plugins/source-code-syntax-highlighting-plugin-for-wordpress/geshi.css"
            type="text/css"
        />
        <style type="text/css">
            .recentcomments a {
                display: inline !important;
                padding: 0 !important;
                margin: 0 !important;
            }
        </style>
        <style type="text/css" media="all">
            /*<![CDATA[*/
            body {
                font-size: 100%;
            }
            body {
                font-family: tahoma, geneva, sans-serif;
            }
            div.post-header,
            h2.post-title,
            p.post-date-single,
            h2.post-title-single,
            div.post-entry h1,
            div.post-entry h2,
            div.post-entry h3,
            div.post-entry h4,
            div.post-entry h5,
            div.post-entry h6,
            div.post-entry blockquote,
            div.post-footer,
            h3#comment-count,
            h4#comment-header,
            div#comments ol li p.comment-metadata,
            h4#respond {
                font-family: verdana, geneva, sans-serif;
            }
            div.post-entry p {
                text-align: left;
            }
            div#wrapper {
                width: 100%;
            }

            /*]]>*/
        </style>
    </head>
    <body>
        <div id="wrapper">
            <div
                id="header"
                onclick="location.href='https://ianbicking.org/';"
                style="cursor: pointer"
            >
                <h1 id="title">
                    <a href="../../index.html" title="Ian Bicking: a blog"
                        >Ian Bicking: a blog</a
                    >
                </h1>
                <p id="description"></p>
            </div>
            <!-- WP Theme Credits -->
            <div style="display: none">
                We can answer on question
                <a href="http://www.olnevhost.net/vps-hosting.html"
                    >what is VPS</a
                >? and what is
                <a href="http://www.olnevhost.net/dedicated-servers.html"
                    ><strong>cheap dedicated servers</strong></a
                >?
            </div>
            <!-- END HEADER -->
            <div id="container">
                <div id="content" class="narrowcolumn">
                    <p class="post-date-single">{ Monthly Archives }</p>
                    <h2 class="post-title-single">July 2008</h2>

                    <div id="post-68" class="post">
                        <div class="post-container">
                            <div class="post-content">
                                <h2 class="post-title">
                                    <a
                                        href="31/a-doctest-wishlist/index.html"
                                        title="Permalink to A Doctest Wishlist"
                                        rel="bookmark"
                                        >A Doctest Wishlist</a
                                    >
                                </h2>
                                <div class="post-entry">
                                    <div class="document">
                                        <p>
                                            Lately I&#8217;ve been doing most of
                                            my testing with
                                            <a
                                                class="reference external"
                                                href="http://python.org/doc/current/lib/module-doctest.html"
                                                >doctest</a
                                            >, primarily using
                                            <a
                                                class="reference external"
                                                href="http://python.org/doc/current/lib/doctest-simple-testfile.html"
                                                >stand-alone text files</a
                                            >. I generally like it (otherwise I
                                            wouldn&#8217;t be using it), but it
                                            does make me frustrated with doctest
                                            sometimes. On my wishlist (roughly
                                            in order):
                                        </p>
                                        <ul>
                                            <li>
                                                <p class="first">
                                                    I wish output was always
                                                    displayed, even when
                                                    there&#8217;s an exception.
                                                    I see no reason for the
                                                    current behavior. Really
                                                    exceptions could be treated
                                                    like any other output (if
                                                    ELLIPSIS was on by default).
                                                </p>
                                            </li>
                                            <li>
                                                <p class="first">
                                                    I wish you could turn on
                                                    options like ELLIPSIS from
                                                    within a doctest, for all
                                                    expressions. (<tt
                                                        class="docutils literal"
                                                        ><span class="pre"
                                                            >#</span
                                                        >
                                                        <span class="pre"
                                                            >doctest:</span
                                                        >
                                                        <span class="pre"
                                                            >+ELLIPSIS</span
                                                        ></tt
                                                    >
                                                    on every line is beyond
                                                    ugly.)
                                                </p>
                                            </li>
                                            <li>
                                                <p class="first">
                                                    <tt class="docutils literal"
                                                        ><span class="pre"
                                                            >&lt;BLANKLINE&gt;</span
                                                        ></tt
                                                    >
                                                    is terribly ugly.
                                                </p>
                                            </li>
                                            <li>
                                                <p class="first">
                                                    There&#8217;s no way of
                                                    saying &quot;I don&#8217;t
                                                    care what this prints&quot;.
                                                    You can&#8217;t do:
                                                </p>
                                                <div
                                                    class="dean_ch"
                                                    style="white-space: wrap"
                                                >
                                                    <br />
                                                    &gt;&gt;&gt;
                                                    some_function<span
                                                        class="br0"
                                                        >&#40;</span
                                                    ><span class="br0"
                                                        >&#41;</span
                                                    ><br />
                                                    ...<br />
                                                    &nbsp;
                                                </div>
                                                <p>
                                                    because the
                                                    <tt class="docutils literal"
                                                        ><span class="pre"
                                                            >...</span
                                                        ></tt
                                                    >
                                                    is treated like a
                                                    continuation.
                                                </p>
                                            </li>
                                            <li>
                                                <p class="first">
                                                    Plugging in an alternate
                                                    output checker is kind of
                                                    tedious, and can&#8217;t be
                                                    done from within a doctest
                                                    (without horrible hacks).
                                                </p>
                                            </li>
                                            <li>
                                                <p class="first">
                                                    I&#8217;d like to be able to
                                                    easily jump into an
                                                    interactive state from
                                                    doctest. Maybe
                                                    <a
                                                        class="reference external"
                                                        href="http://python.org/doc/current/lib/module-pdb.html"
                                                        >pdb</a
                                                    >
                                                    can do this, but I&#8217;ve
                                                    never figured that out
                                                    exactly.
                                                </p>
                                            </li>
                                            <li>
                                                <p class="first">
                                                    Getting
                                                    <a
                                                        class="reference external"
                                                        href="http://code.google.com/p/python-nose/"
                                                        >nose</a
                                                    >
                                                    to run
                                                    <tt class="docutils literal"
                                                        ><span class="pre"
                                                            >.txt</span
                                                        ></tt
                                                    >
                                                    files as doctests is really
                                                    hard, involving a
                                                    combination of options I
                                                    always forget.
                                                </p>
                                            </li>
                                            <li>
                                                <p class="first">
                                                    There&#8217;s no way to
                                                    abort the doctest. Sometimes
                                                    I&#8217;d like to run some
                                                    environment checks early on,
                                                    and be able to stop the test
                                                    if they fail.
                                                </p>
                                            </li>
                                            <li>
                                                <p class="first">
                                                    I wish it was easier to
                                                    apply to non-Python code.
                                                    (I&#8217;ve adapted it via
                                                    subclassing
                                                    <a
                                                        class="reference external"
                                                        href="http://pylogo.org/"
                                                        >for Logo</a
                                                    >
                                                    but I wouldn&#8217;t do that
                                                    often.)
                                                </p>
                                            </li>
                                            <li>
                                                <p class="first">
                                                    I wish I could copy and
                                                    paste from doctests to
                                                    consoles. But I don&#8217;t
                                                    see any solution to this
                                                    problem.
                                                </p>
                                            </li>
                                            <li>
                                                <p class="first">
                                                    The
                                                    <a
                                                        class="reference external"
                                                        href="http://python.org/doc/current/lib/doctest-unittest-api.html"
                                                        >integration</a
                                                    >
                                                    with
                                                    <a
                                                        class="reference external"
                                                        href="http://python.org/doc/current/lib/module-unittest.html"
                                                        >unittest</a
                                                    >
                                                    is pretty hacky. Not that
                                                    I&#8217;ve used unittest in
                                                    years. But some other test
                                                    frameworks build off this
                                                    integration.
                                                </p>
                                            </li>
                                            <li>
                                                <p class="first">
                                                    <tt class="docutils literal"
                                                        ><span class="pre"
                                                            >python</span
                                                        >
                                                        <span class="pre"
                                                            >-m</span
                                                        >
                                                        <span class="pre"
                                                            >doctest</span
                                                        >
                                                        <span class="pre"
                                                            >sometest.txt</span
                                                        ></tt
                                                    >
                                                    doesn&#8217;t do what it
                                                    should do. Instead it runs
                                                    doctest&#8217;s self-tests.
                                                </p>
                                            </li>
                                        </ul>
                                    </div>
                                    <!-- <rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
			xmlns:dc="http://purl.org/dc/elements/1.1/"
			xmlns:trackback="http://madskills.com/public/xml/rss/module/trackback/">
		<rdf:Description rdf:about="https://ianbicking.org/2008/07/31/a-doctest-wishlist/"
    dc:identifier="https://ianbicking.org/2008/07/31/a-doctest-wishlist/"
    dc:title="A Doctest Wishlist"
    trackback:ping="https://ianbicking.org/2008/07/31/a-doctest-wishlist/trackback/" />
</rdf:RDF> -->
                                </div>
                                <!-- END POST-ENTRY -->
                            </div>
                            <!-- END POST-CONTENT  -->
                        </div>
                        <!-- END-CONTAINER -->
                        <div class="post-header">
                            <h3 class="post-date">2008 07 31</h3>
                            <p class="post-categories">
                                <a
                                    href="../../category/python/index.html"
                                    title="View all posts in Python"
                                    rel="category tag"
                                    >Python</a
                                >
                            </p>
                            <p class="post-comments">
                                <a
                                    href="31/a-doctest-wishlist/index.html#comments"
                                    title="Comment on A Doctest Wishlist"
                                    >Comments (12)</a
                                >
                            </p>
                            <p class="post-permalink">
                                <a
                                    href="31/a-doctest-wishlist/index.html"
                                    title="Permalink to A Doctest Wishlist"
                                    rel="permalink"
                                    >Permalink</a
                                >
                            </p>
                        </div>
                        <!-- END POST-FOOTER -->
                    </div>
                    <!-- END POST -->

                    <div id="post-67" class="post">
                        <div class="post-container">
                            <div class="post-content">
                                <h2 class="post-title">
                                    <a
                                        href="30/making-a-proxy-with-wsgi-and-lxml/index.html"
                                        title="Permalink to Making a proxy with WSGI and lxml"
                                        rel="bookmark"
                                        >Making a proxy with WSGI and lxml</a
                                    >
                                </h2>
                                <div class="post-entry">
                                    <div class="document">
                                        <p>
                                            You can use WSGI to make rewriting
                                            middleware;
                                            <a
                                                class="reference external"
                                                href="http://pythonpaste.org/webob/"
                                                >WebOb</a
                                            >
                                            specifically makes it easy to write.
                                            And that&#8217;s cool, but
                                            it&#8217;s more satisfying to use
                                            your middleware right away without
                                            having to think about writing
                                            applications that might live behind
                                            the middleware.
                                        </p>
                                        <p>
                                            There&#8217;s two libraries
                                            I&#8217;ll describe here to make
                                            that possible:
                                            <a
                                                class="reference external"
                                                href="http://pythonpaste.org/modules/proxy.html#paste.proxy.Proxy"
                                                >paste.proxy</a
                                            >
                                            to send WSGI requests out via HTTP,
                                            and
                                            <a
                                                class="reference external"
                                                href="http://codespeak.net/lxml/lxmlhtml.html"
                                                >lxml.html</a
                                            >
                                            which lets you rewrite the HTML to
                                            fix up the links.
                                        </p>
                                        <p>
                                            To start, we need some kind of
                                            middleware that at least is
                                            noticeable. How about something to
                                            make a word jumble of the page?
                                            We&#8217;ll use lxml as well:
                                        </p>
                                        <div
                                            class="dean_ch"
                                            style="white-space: wrap"
                                        >
                                            <br />
                                            <span class="kw1">from</span> lxml
                                            <span class="kw1">import</span>
                                            html<br />
                                            <span class="kw1">from</span>
                                            <span class="kw3">random</span>
                                            <span class="kw1">import</span>
                                            shuffle<br />
                                            <br />
                                            <span class="kw1">def</span>
                                            jumble_words<span class="br0"
                                                >&#40;</span
                                            >doc<span class="br0">&#41;</span
                                            >:<br />
                                            &nbsp; &nbsp;
                                            <span class="st0">&quot;&quot;</span
                                            ><span class="st0"
                                                >&quot;Mixes up the words in an
                                                HTML document (doesn't touch
                                                tags or attributes)&quot;</span
                                            ><span class="st0"
                                                >&quot;&quot;</span
                                            ><br />
                                            &nbsp; &nbsp; doc = html.<span
                                                class="me1"
                                                >fromstring</span
                                            ><span class="br0">&#40;</span
                                            >doc<span class="br0">&#41;</span
                                            ><br />
                                            &nbsp; &nbsp;
                                            <span class="co1"
                                                ># .text_content() gives the
                                                text without tags or
                                                attributes,</span
                                            ><br />
                                            &nbsp; &nbsp;
                                            <span class="co1"
                                                ># .body is the &lt;body&gt;
                                                tag:</span
                                            ><br />
                                            &nbsp; &nbsp; words = doc.<span
                                                class="me1"
                                                >body</span
                                            >.<span class="me1"
                                                >text_content</span
                                            ><span class="br0">&#40;</span
                                            ><span class="br0">&#41;</span
                                            >.<span class="me1">split</span
                                            ><span class="br0">&#40;</span
                                            ><span class="br0">&#41;</span
                                            ><br />
                                            &nbsp; &nbsp; shuffle<span
                                                class="br0"
                                                >&#40;</span
                                            >words<span class="br0">&#41;</span
                                            ><br />
                                            &nbsp; &nbsp;
                                            <span class="kw1">for</span> el
                                            <span class="kw1">in</span>
                                            doc.<span class="me1">body</span
                                            >.<span class="me1"
                                                >iterdescendants</span
                                            ><span class="br0">&#40;</span
                                            ><span class="br0">&#41;</span
                                            >:<br />
                                            &nbsp; &nbsp; &nbsp; &nbsp;
                                            <span class="co1"
                                                ># The ElementTree model puts
                                                all text in .text and .tail on
                                                elements, so that's</span
                                            ><br />
                                            &nbsp; &nbsp; &nbsp; &nbsp;
                                            <span class="co1"
                                                ># what we mix up:</span
                                            ><br />
                                            &nbsp; &nbsp; &nbsp; &nbsp; el.<span
                                                class="me1"
                                                >text</span
                                            >
                                            = random_words<span class="br0"
                                                >&#40;</span
                                            >el.<span class="me1">text</span>,
                                            words<span class="br0">&#41;</span
                                            ><br />
                                            &nbsp; &nbsp; &nbsp; &nbsp; el.<span
                                                class="me1"
                                                >tail</span
                                            >
                                            = random_words<span class="br0"
                                                >&#40;</span
                                            >el.<span class="me1">tail</span>,
                                            words<span class="br0">&#41;</span
                                            ><br />
                                            &nbsp; &nbsp;
                                            <span class="kw1">return</span>
                                            html.<span class="me1"
                                                >tostring</span
                                            ><span class="br0">&#40;</span
                                            >doc<span class="br0">&#41;</span
                                            ><br />
                                            <br />
                                            <span class="kw1">def</span>
                                            random_words<span class="br0"
                                                >&#40;</span
                                            >text, words<span class="br0"
                                                >&#41;</span
                                            >:<br />
                                            &nbsp; &nbsp;
                                            <span class="st0">&quot;&quot;</span
                                            ><span class="st0"
                                                >&quot;Pulls some words from the
                                                list words, with the same number
                                                of words in<br />
                                                &nbsp; &nbsp; the previous
                                                `text`&quot;</span
                                            ><span class="st0"
                                                >&quot;&quot;</span
                                            ><br />
                                            &nbsp; &nbsp;
                                            <span class="co1"
                                                ># text can be None, so we need
                                                this test:</span
                                            ><br />
                                            &nbsp; &nbsp;
                                            <span class="kw1">if</span>
                                            <span class="kw1">not</span>
                                            text:<br />
                                            &nbsp; &nbsp; &nbsp; &nbsp;
                                            <span class="kw1">return</span>
                                            text<br />
                                            &nbsp; &nbsp; word_count =
                                            <span class="kw2">len</span
                                            ><span class="br0">&#40;</span
                                            >text.<span class="me1">split</span
                                            ><span class="br0">&#40;</span
                                            ><span class="br0">&#41;</span
                                            ><span class="br0">&#41;</span
                                            ><br />
                                            &nbsp; &nbsp;
                                            <span class="kw1">try</span>:<br />
                                            &nbsp; &nbsp; &nbsp; &nbsp;
                                            <span class="kw1">return</span>
                                            <span class="st0">' '</span>.<span
                                                class="me1"
                                                >join</span
                                            ><span class="br0">&#40;</span
                                            >words.<span class="me1">pop</span
                                            ><span class="br0">&#40;</span
                                            ><span class="br0">&#41;</span>
                                            <span class="kw1">for</span> i
                                            <span class="kw1">in</span>
                                            <span class="kw2">range</span
                                            ><span class="br0">&#40;</span
                                            >word_count<span class="br0"
                                                >&#41;</span
                                            ><span class="br0">&#41;</span
                                            ><br />
                                            &nbsp; &nbsp;
                                            <span class="kw1">except</span>
                                            <span class="kw2">IndexError</span
                                            >:<br />
                                            &nbsp; &nbsp; &nbsp; &nbsp;
                                            <span class="co1"
                                                ># This shouldn't happen,
                                                because we should have
                                                exactly</span
                                            ><br />
                                            &nbsp; &nbsp; &nbsp; &nbsp;
                                            <span class="co1"
                                                ># the right number of words,
                                                but just in case...</span
                                            ><br />
                                            &nbsp; &nbsp; &nbsp; &nbsp;
                                            <span class="kw1">return</span>
                                            text<br />
                                            <br />
                                            <span class="kw1">from</span> webob
                                            <span class="kw1">import</span>
                                            Request<br />
                                            <br />
                                            <span class="kw1">class</span>
                                            JumbleMiddleware<span class="br0"
                                                >&#40;</span
                                            ><span class="kw2">object</span
                                            ><span class="br0">&#41;</span
                                            >:<br />
                                            &nbsp; &nbsp;
                                            <span class="st0">&quot;&quot;</span
                                            ><span class="st0"
                                                >&quot;Middleware that jumbles
                                                the words of HTML responses<br />
                                                &nbsp; &nbsp; &quot;</span
                                            ><span class="st0"
                                                >&quot;&quot;</span
                                            ><br />
                                            &nbsp; &nbsp;
                                            <span class="co1"
                                                ># This __init__ and __call__
                                                are the basic pattern for
                                                middleware:</span
                                            ><br />
                                            &nbsp; &nbsp;
                                            <span class="kw1">def</span>
                                            <span class="kw4">__init__</span
                                            ><span class="br0">&#40;</span
                                            ><span class="kw2">self</span>,
                                            app<span class="br0">&#41;</span
                                            >:<br />
                                            &nbsp; &nbsp; &nbsp; &nbsp;
                                            <span class="kw2">self</span>.<span
                                                class="me1"
                                                >app</span
                                            >
                                            = app<br />
                                            &nbsp; &nbsp;
                                            <span class="kw1">def</span>
                                            <span class="kw4">__call__</span
                                            ><span class="br0">&#40;</span
                                            ><span class="kw2">self</span>,
                                            environ, start_response<span
                                                class="br0"
                                                >&#41;</span
                                            >:<br />
                                            &nbsp; &nbsp; &nbsp; &nbsp; req =
                                            Request<span class="br0">&#40;</span
                                            >environ<span class="br0"
                                                >&#41;</span
                                            ><br />
                                            &nbsp; &nbsp; &nbsp; &nbsp;
                                            <span class="co1"
                                                ># We don't want 304 Not
                                                Modified responses, because we
                                                mix up the response</span
                                            ><br />
                                            &nbsp; &nbsp; &nbsp; &nbsp;
                                            <span class="co1"
                                                ># differently every time.
                                                &nbsp;So we'll make sure all the
                                                headers that could call
                                                that</span
                                            ><br />
                                            &nbsp; &nbsp; &nbsp; &nbsp;
                                            <span class="co1"
                                                ># (If-Modified-Since, etc) are
                                                removed with
                                                .remove_conditional_headers():</span
                                            ><br />
                                            &nbsp; &nbsp; &nbsp; &nbsp;
                                            req.<span class="me1"
                                                >remove_conditional_headers</span
                                            ><span class="br0">&#40;</span
                                            ><span class="br0">&#41;</span
                                            ><br />
                                            &nbsp; &nbsp; &nbsp; &nbsp;
                                            <span class="co1"
                                                ># This calls the application
                                                with the request, and then
                                                returns a response; this</span
                                            ><br />
                                            &nbsp; &nbsp; &nbsp; &nbsp;
                                            <span class="co1"
                                                ># is the typical pattern for
                                                response-modifying middleware
                                                using WebOb:</span
                                            ><br />
                                            &nbsp; &nbsp; &nbsp; &nbsp; resp =
                                            req.<span class="me1"
                                                >get_response</span
                                            ><span class="br0">&#40;</span
                                            ><span class="kw2">self</span>.<span
                                                class="me1"
                                                >app</span
                                            ><span class="br0">&#41;</span
                                            ><br />
                                            &nbsp; &nbsp; &nbsp; &nbsp;
                                            <span class="kw1">if</span>
                                            resp.<span class="me1"
                                                >content_type</span
                                            >
                                            ==
                                            <span class="st0">'text/html'</span
                                            >:<br />
                                            &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
                                            &nbsp; resp.<span class="me1"
                                                >body</span
                                            >
                                            = jumble_words<span class="br0"
                                                >&#40;</span
                                            >resp.<span class="me1">body</span
                                            ><span class="br0">&#41;</span
                                            ><br />
                                            &nbsp; &nbsp; &nbsp; &nbsp;
                                            <span class="kw1">return</span>
                                            resp<span class="br0">&#40;</span
                                            >environ, start_response<span
                                                class="br0"
                                                >&#41;</span
                                            ><br />
                                            &nbsp;
                                        </div>
                                        <p>
                                            Well, you don&#8217;t really need to
                                            jumble up your <em>own</em> pages,
                                            right? Much more fun to jumble other
                                            people&#8217;s pages. Enter the
                                            proxy. Here&#8217;s a basic proxy:
                                        </p>
                                        <div
                                            class="dean_ch"
                                            style="white-space: wrap"
                                        >
                                            <br />
                                            <span class="kw1">from</span>
                                            paste.<span class="me1">proxy</span>
                                            <span class="kw1">import</span>
                                            Proxy<br />
                                            <span class="co1"
                                                ># We use this to make sure we
                                                didn't mess up anything with
                                                JumbleMiddleware;</span
                                            ><br />
                                            <span class="co1"
                                                ># the validator checks for many
                                                WSGI requirements:</span
                                            ><br />
                                            <span class="kw1">from</span>
                                            wsgiref.<span class="me1"
                                                >validate</span
                                            >
                                            <span class="kw1">import</span>
                                            validator<br />
                                            <span class="kw1">import</span>
                                            <span class="kw3">sys</span><br />
                                            <br />
                                            <span class="kw1">def</span>
                                            main<span class="br0">&#40;</span
                                            ><span class="br0">&#41;</span
                                            >:<br />
                                            &nbsp; &nbsp; proxy_url =
                                            <span class="kw3">sys</span>.<span
                                                class="me1"
                                                >argv</span
                                            ><span class="br0">&#91;</span
                                            ><span class="nu0">1</span
                                            ><span class="br0">&#93;</span
                                            ><br />
                                            &nbsp; &nbsp; app =
                                            JumbleMiddleware<span class="br0"
                                                >&#40;</span
                                            ><br />
                                            &nbsp; &nbsp; &nbsp; &nbsp;
                                            Proxy<span class="br0">&#40;</span
                                            >proxy_url<span class="br0"
                                                >&#41;</span
                                            ><span class="br0">&#41;</span
                                            ><br />
                                            &nbsp; &nbsp; app = validator<span
                                                class="br0"
                                                >&#40;</span
                                            >app<span class="br0">&#41;</span
                                            ><br />
                                            &nbsp; &nbsp;
                                            <span class="kw1">from</span>
                                            paste.<span class="me1"
                                                >httpserver</span
                                            >
                                            <span class="kw1">import</span>
                                            serve<br />
                                            &nbsp; &nbsp; serve<span class="br0"
                                                >&#40;</span
                                            >app,
                                            <span class="st0">'localhost'</span
                                            >, <span class="nu0">8080</span
                                            ><span class="br0">&#41;</span
                                            ><br />
                                            <br />
                                            <span class="kw1">if</span> __name__
                                            ==
                                            <span class="st0">'__main__'</span
                                            >:<br />
                                            &nbsp; &nbsp; main<span class="br0"
                                                >&#40;</span
                                            ><span class="br0">&#41;</span
                                            ><br />
                                            &nbsp;
                                        </div>
                                        <p>
                                            If you look at the
                                            <a
                                                class="reference external"
                                                href="http://svn.colorstudy.com/home/ianb/recipes/rewritingproxy.py"
                                                >full source</a
                                            >
                                            the command-line is a bit fancier,
                                            but it&#8217;s all obvious stuff.
                                        </p>
                                        <p>
                                            OK, so this will work, but the links
                                            will often be broken unless the
                                            server only gives relative links.
                                            But you can rewrite the links using
                                            lxml&#8230;
                                        </p>
                                        <div
                                            class="dean_ch"
                                            style="white-space: wrap"
                                        >
                                            <br />
                                            <span class="kw1">import</span>
                                            <span class="kw3">urlparse</span
                                            ><br />
                                            <br />
                                            <span class="kw1">class</span>
                                            LinkRewriterMiddleware<span
                                                class="br0"
                                                >&#40;</span
                                            ><span class="kw2">object</span
                                            ><span class="br0">&#41;</span
                                            >:<br />
                                            &nbsp; &nbsp;
                                            <span class="st0">&quot;&quot;</span
                                            ><span class="st0"
                                                >&quot;Rewrites the response,
                                                assuming the HTML was generated
                                                as though based at<br />
                                                &nbsp; &nbsp; `dest_href`, and
                                                needs to be rewritten for the
                                                incoming request&quot;</span
                                            ><span class="st0"
                                                >&quot;&quot;</span
                                            ><br />
                                            <br />
                                            &nbsp; &nbsp;
                                            <span class="co1"
                                                ># The normal __init__, __call__
                                                pattern:</span
                                            ><br />
                                            &nbsp; &nbsp;
                                            <span class="kw1">def</span>
                                            <span class="kw4">__init__</span
                                            ><span class="br0">&#40;</span
                                            ><span class="kw2">self</span>, app,
                                            dest_href<span class="br0"
                                                >&#41;</span
                                            >:<br />
                                            &nbsp; &nbsp; &nbsp; &nbsp;
                                            <span class="kw2">self</span>.<span
                                                class="me1"
                                                >app</span
                                            >
                                            = app<br />
                                            &nbsp; &nbsp; &nbsp; &nbsp;
                                            <span class="kw1">if</span>
                                            dest_href.<span class="me1"
                                                >endswith</span
                                            ><span class="br0">&#40;</span
                                            ><span class="st0">'/'</span
                                            ><span class="br0">&#41;</span
                                            >:<br />
                                            &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
                                            &nbsp; dest_href = dest_href<span
                                                class="br0"
                                                >&#91;</span
                                            >:<span class="nu0">-1</span
                                            ><span class="br0">&#93;</span
                                            ><br />
                                            &nbsp; &nbsp; &nbsp; &nbsp;
                                            <span class="kw2">self</span>.<span
                                                class="me1"
                                                >dest_href</span
                                            >
                                            = dest_href<br />
                                            <br />
                                            &nbsp; &nbsp;
                                            <span class="kw1">def</span>
                                            <span class="kw4">__call__</span
                                            ><span class="br0">&#40;</span
                                            ><span class="kw2">self</span>,
                                            environ, start_response<span
                                                class="br0"
                                                >&#41;</span
                                            >:<br />
                                            &nbsp; &nbsp; &nbsp; &nbsp; req =
                                            Request<span class="br0">&#40;</span
                                            >environ<span class="br0"
                                                >&#41;</span
                                            ><br />
                                            &nbsp; &nbsp; &nbsp; &nbsp;
                                            <span class="co1"
                                                ># .path_info (aka
                                                environ['PATH_INFO']) is the
                                                path of the request</span
                                            ><br />
                                            &nbsp; &nbsp; &nbsp; &nbsp;
                                            <span class="co1"
                                                ># (URL rewriting doesn't really
                                                have to care about query
                                                strings)</span
                                            ><br />
                                            &nbsp; &nbsp; &nbsp; &nbsp;
                                            dest_path = req.<span class="me1"
                                                >path_info</span
                                            ><br />
                                            &nbsp; &nbsp; &nbsp; &nbsp;
                                            dest_href =
                                            <span class="kw2">self</span>.<span
                                                class="me1"
                                                >dest_href</span
                                            >
                                            + dest_path<br />
                                            &nbsp; &nbsp; &nbsp; &nbsp;
                                            <span class="co1"
                                                ># req.application_url is the
                                                base URL not including path_info
                                                or the query string:</span
                                            ><br />
                                            &nbsp; &nbsp; &nbsp; &nbsp; req_href
                                            = req.<span class="me1"
                                                >application_url</span
                                            ><br />
                                            &nbsp; &nbsp; &nbsp; &nbsp;
                                            <span class="kw1">def</span>
                                            link_repl_func<span class="br0"
                                                >&#40;</span
                                            >link<span class="br0">&#41;</span
                                            >:<br />
                                            &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
                                            &nbsp; link =
                                            <span class="kw3">urlparse</span
                                            >.<span class="me1">urljoin</span
                                            ><span class="br0">&#40;</span
                                            >dest_href, link<span class="br0"
                                                >&#41;</span
                                            ><br />
                                            &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
                                            &nbsp; <span class="kw1">if</span>
                                            <span class="kw1">not</span>
                                            link.<span class="me1"
                                                >startswith</span
                                            ><span class="br0">&#40;</span
                                            >dest_href<span class="br0"
                                                >&#41;</span
                                            >:<br />
                                            &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
                                            &nbsp; &nbsp; &nbsp;
                                            <span class="co1"
                                                ># Not a local link</span
                                            ><br />
                                            &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
                                            &nbsp; &nbsp; &nbsp;
                                            <span class="kw1">return</span>
                                            link<br />
                                            &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
                                            &nbsp; new_url = req_href +
                                            <span class="st0">'/'</span> +
                                            link<span class="br0">&#91;</span
                                            ><span class="kw2">len</span
                                            ><span class="br0">&#40;</span
                                            >dest_href<span class="br0"
                                                >&#41;</span
                                            >:<span class="br0">&#93;</span
                                            ><br />
                                            &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
                                            &nbsp;
                                            <span class="kw1">return</span>
                                            new_url<br />
                                            &nbsp; &nbsp; &nbsp; &nbsp; resp =
                                            req.<span class="me1"
                                                >get_response</span
                                            ><span class="br0">&#40;</span
                                            ><span class="kw2">self</span>.<span
                                                class="me1"
                                                >app</span
                                            ><span class="br0">&#41;</span
                                            ><br />
                                            &nbsp; &nbsp; &nbsp; &nbsp;
                                            <span class="co1"
                                                ># This decodes any possible
                                                gzipped content:</span
                                            ><br />
                                            &nbsp; &nbsp; &nbsp; &nbsp;
                                            resp.<span class="me1"
                                                >decode_content</span
                                            ><span class="br0">&#40;</span
                                            ><span class="br0">&#41;</span
                                            ><br />
                                            &nbsp; &nbsp; &nbsp; &nbsp;
                                            <span class="kw1">if</span>
                                            <span class="br0">&#40;</span
                                            >resp.<span class="me1"
                                                >status_int</span
                                            >
                                            == <span class="nu0">200</span
                                            ><br />
                                            &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
                                            &nbsp;
                                            <span class="kw1">and</span>
                                            resp.<span class="me1"
                                                >content_type</span
                                            >
                                            ==
                                            <span class="st0">'text/html'</span
                                            ><span class="br0">&#41;</span
                                            >:<br />
                                            &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
                                            &nbsp; doc = html.<span class="me1"
                                                >fromstring</span
                                            ><span class="br0">&#40;</span
                                            >resp.<span class="me1">body</span>,
                                            base_url=dest_href<span class="br0"
                                                >&#41;</span
                                            ><br />
                                            &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
                                            &nbsp; doc.<span class="me1"
                                                >rewrite_links</span
                                            ><span class="br0">&#40;</span
                                            >link_repl_func<span class="br0"
                                                >&#41;</span
                                            ><br />
                                            &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
                                            &nbsp; resp.<span class="me1"
                                                >body</span
                                            >
                                            = html.<span class="me1"
                                                >tostring</span
                                            ><span class="br0">&#40;</span
                                            >doc<span class="br0">&#41;</span
                                            ><br />
                                            &nbsp; &nbsp; &nbsp; &nbsp;
                                            <span class="co1"
                                                ># Redirects need their redirect
                                                locations rewritten:</span
                                            ><br />
                                            &nbsp; &nbsp; &nbsp; &nbsp;
                                            <span class="kw1">if</span>
                                            resp.<span class="me1"
                                                >location</span
                                            >:<br />
                                            &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
                                            &nbsp; resp.<span class="me1"
                                                >location</span
                                            >
                                            = link_repl_func<span class="br0"
                                                >&#40;</span
                                            >resp.<span class="me1"
                                                >location</span
                                            ><span class="br0">&#41;</span
                                            ><br />
                                            &nbsp; &nbsp; &nbsp; &nbsp;
                                            <span class="kw1">return</span>
                                            resp<span class="br0">&#40;</span
                                            >environ, start_response<span
                                                class="br0"
                                                >&#41;</span
                                            ><br />
                                            &nbsp;
                                        </div>
                                        <p>Then we rewire the application:</p>
                                        <div
                                            class="dean_ch"
                                            style="white-space: wrap"
                                        >
                                            <br />
                                            app = JumbleMiddleware<span
                                                class="br0"
                                                >&#40;</span
                                            ><br />
                                            &nbsp; &nbsp;
                                            LinkRewriterMiddleware<span
                                                class="br0"
                                                >&#40;</span
                                            >Proxy<span class="br0">&#40;</span
                                            >proxy_url<span class="br0"
                                                >&#41;</span
                                            >, proxy_url<span class="br0"
                                                >&#41;</span
                                            ><span class="br0">&#41;</span
                                            ><br />
                                            &nbsp;
                                        </div>
                                        <p>
                                            Now there&#8217;s a fun little proxy
                                            for you to play with. You can see
                                            the code
                                            <a
                                                class="reference external"
                                                href="http://svn.colorstudy.com/home/ianb/recipes/rewritingproxy.py"
                                                >here</a
                                            >.
                                        </p>
                                    </div>
                                    <!-- <rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
			xmlns:dc="http://purl.org/dc/elements/1.1/"
			xmlns:trackback="http://madskills.com/public/xml/rss/module/trackback/">
		<rdf:Description rdf:about="https://ianbicking.org/2008/07/30/making-a-proxy-with-wsgi-and-lxml/"
    dc:identifier="https://ianbicking.org/2008/07/30/making-a-proxy-with-wsgi-and-lxml/"
    dc:title="Making a proxy with WSGI and lxml"
    trackback:ping="https://ianbicking.org/2008/07/30/making-a-proxy-with-wsgi-and-lxml/trackback/" />
</rdf:RDF> -->
                                </div>
                                <!-- END POST-ENTRY -->
                            </div>
                            <!-- END POST-CONTENT  -->
                        </div>
                        <!-- END-CONTAINER -->
                        <div class="post-header">
                            <h3 class="post-date">2008 07 30</h3>
                            <p class="post-categories">
                                <a
                                    href="../../category/programming/index.html"
                                    title="View all posts in Programming"
                                    rel="category tag"
                                    >Programming</a
                                ><br /><a
                                    href="../../category/python/index.html"
                                    title="View all posts in Python"
                                    rel="category tag"
                                    >Python</a
                                >
                            </p>
                            <p class="post-comments">
                                <a
                                    href="30/making-a-proxy-with-wsgi-and-lxml/index.html#comments"
                                    title="Comment on Making a proxy with WSGI and lxml"
                                    >Comments (3)</a
                                >
                            </p>
                            <p class="post-permalink">
                                <a
                                    href="30/making-a-proxy-with-wsgi-and-lxml/index.html"
                                    title="Permalink to Making a proxy with WSGI and lxml"
                                    rel="permalink"
                                    >Permalink</a
                                >
                            </p>
                        </div>
                        <!-- END POST-FOOTER -->
                    </div>
                    <!-- END POST -->

                    <div id="post-66" class="post">
                        <div class="post-container">
                            <div class="post-content">
                                <h2 class="post-title">
                                    <a
                                        href="28/me-in-berlin-amsterdam/index.html"
                                        title="Permalink to Me In Berlin &#038; Amsterdam"
                                        rel="bookmark"
                                        >Me In Berlin &#038; Amsterdam</a
                                    >
                                </h2>
                                <div class="post-entry">
                                    <div class="document">
                                        <p>
                                            I&#8217;m going on vacation in a
                                            couple weeks to Berlin and
                                            Amsterdam, flying to Berlin on
                                            August 12, leaving from Amsterdam on
                                            August 27, and transitioning between
                                            the two sometime in between. Things
                                            <a
                                                class="reference external"
                                                href="http://potteryblog.com"
                                                >Emily</a
                                            >
                                            and I should see or do? Care to meet
                                            up? On vacations my evenings tend to
                                            be underscheduled.
                                        </p>
                                    </div>
                                    <!-- <rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
			xmlns:dc="http://purl.org/dc/elements/1.1/"
			xmlns:trackback="http://madskills.com/public/xml/rss/module/trackback/">
		<rdf:Description rdf:about="https://ianbicking.org/2008/07/28/me-in-berlin-amsterdam/"
    dc:identifier="https://ianbicking.org/2008/07/28/me-in-berlin-amsterdam/"
    dc:title="Me In Berlin &#038; Amsterdam"
    trackback:ping="https://ianbicking.org/2008/07/28/me-in-berlin-amsterdam/trackback/" />
</rdf:RDF> -->
                                </div>
                                <!-- END POST-ENTRY -->
                            </div>
                            <!-- END POST-CONTENT  -->
                        </div>
                        <!-- END-CONTAINER -->
                        <div class="post-header">
                            <h3 class="post-date">2008 07 28</h3>
                            <p class="post-categories">
                                <a
                                    href="../../category/notech/index.html"
                                    title="View all posts in Non-technical"
                                    rel="category tag"
                                    >Non-technical</a
                                >
                            </p>
                            <p class="post-comments">
                                <a
                                    href="28/me-in-berlin-amsterdam/index.html#comments"
                                    title="Comment on Me In Berlin &amp; Amsterdam"
                                    >Comments (15)</a
                                >
                            </p>
                            <p class="post-permalink">
                                <a
                                    href="28/me-in-berlin-amsterdam/index.html"
                                    title="Permalink to Me In Berlin &#038; Amsterdam"
                                    rel="permalink"
                                    >Permalink</a
                                >
                            </p>
                        </div>
                        <!-- END POST-FOOTER -->
                    </div>
                    <!-- END POST -->

                    <div class="navigation">
                        <div class="alignleft"></div>
                        <div class="alignright"></div>
                    </div>
                    <!-- END NAVIGATION -->
                </div>
                <!-- END CONTENT -->
            </div>
            <!-- END CONTAINER  -->

            <div id="sidebar">
                <ul>
                    <li id="home-link">
                        <h2>
                            <a
                                href="../../index.html"
                                title="Ian Bicking: a blog"
                                >Home</a
                            >
                        </h2>
                    </li>
                    <li id="text-315934862" class="widget widget_text">
                        <h2 class="widgettitle">About</h2>
                        <div class="textwidget">
                            Ian is a developer with Mozilla,
                            <a href="http://ianbicking.appspot.com/projects"
                                >Python open source developer</a
                            >, actually uses
                            <a
                                href="https://plus.google.com/u/0/104537541227697934010/posts"
                                >Google+</a
                            >
                            more than
                            <a href="http://twitter.com/ianbicking">twitter</a>
                            and lives in Minneapolis.<br />
                            <span
                                class="gittip-0001"
                                gittip-username="ianbicking"
                            ></span>
                            <script
                                id="gittip-0001"
                                src="https://www.gittip.com/assets/widgets/0001.js"
                            ></script>
                        </div>
                    </li>
                    <li id="text-315934863" class="widget widget_text">
                        <div class="textwidget">
                            <!-- <script type="text/javascript">mbgc='f5f5f5';ww='160';mbc='cecece';bbc='3F79D5';bmobc='3b71c6';bbgc='4889F0';bmoc='3F79D5';bfc='FFFFFF';bmofc='ffffff';tlc='cecece';tc='6a6a6a';nc='6a6a6a';bc='6a6a6a';l='y';fs='16';fsb='13';bw='100';ff='4';lu='6a6a6a';pc='4889F0';wh='340';b='s'; pid='104537541227697934010';</script><script type="text/javascript" src="http://widgetsplus.com/google_plus_widget.js"></script> -->
                        </div>
                    </li>
                    <li id="archives-2" class="widget widget_archive">
                        <h2 class="widgettitle">Archives</h2>
                        <ul>
                            <li>
                                <a
                                    href="../../2012/10/index.html"
                                    title="October 2012"
                                    >October 2012</a
                                >
                            </li>
                            <li>
                                <a
                                    href="../../2012/02/index.html"
                                    title="February 2012"
                                    >February 2012</a
                                >
                            </li>
                            <li>
                                <a
                                    href="../../2011/04/index.html"
                                    title="April 2011"
                                    >April 2011</a
                                >
                            </li>
                            <li>
                                <a
                                    href="../../2011/03/index.html"
                                    title="March 2011"
                                    >March 2011</a
                                >
                            </li>
                            <li>
                                <a
                                    href="../../2010/09/index.html"
                                    title="September 2010"
                                    >September 2010</a
                                >
                            </li>
                            <li>
                                <a
                                    href="../../2010/08/index.html"
                                    title="August 2010"
                                    >August 2010</a
                                >
                            </li>
                            <li>
                                <a
                                    href="../../2010/05/index.html"
                                    title="May 2010"
                                    >May 2010</a
                                >
                            </li>
                            <li>
                                <a
                                    href="../../2010/04/index.html"
                                    title="April 2010"
                                    >April 2010</a
                                >
                            </li>
                            <li>
                                <a
                                    href="../../2010/03/index.html"
                                    title="March 2010"
                                    >March 2010</a
                                >
                            </li>
                            <li>
                                <a
                                    href="../../2010/02/index.html"
                                    title="February 2010"
                                    >February 2010</a
                                >
                            </li>
                            <li>
                                <a
                                    href="../../2010/01/index.html"
                                    title="January 2010"
                                    >January 2010</a
                                >
                            </li>
                            <li>
                                <a
                                    href="../../2009/09/index.html"
                                    title="September 2009"
                                    >September 2009</a
                                >
                            </li>
                            <li>
                                <a
                                    href="../../2009/05/index.html"
                                    title="May 2009"
                                    >May 2009</a
                                >
                            </li>
                            <li>
                                <a
                                    href="../../2009/04/index.html"
                                    title="April 2009"
                                    >April 2009</a
                                >
                            </li>
                            <li>
                                <a
                                    href="../../2009/01/index.html"
                                    title="January 2009"
                                    >January 2009</a
                                >
                            </li>
                            <li>
                                <a href="../12/index.html" title="December 2008"
                                    >December 2008</a
                                >
                            </li>
                            <li>
                                <a href="../11/index.html" title="November 2008"
                                    >November 2008</a
                                >
                            </li>
                            <li>
                                <a href="../10/index.html" title="October 2008"
                                    >October 2008</a
                                >
                            </li>
                            <li>
                                <a
                                    href="../09/index.html"
                                    title="September 2008"
                                    >September 2008</a
                                >
                            </li>
                            <li>
                                <a href="../08/index.html" title="August 2008"
                                    >August 2008</a
                                >
                            </li>
                            <li>
                                <a href="index.html" title="July 2008"
                                    >July 2008</a
                                >
                            </li>
                            <li>
                                <a href="../06/index.html" title="June 2008"
                                    >June 2008</a
                                >
                            </li>
                            <li>
                                <a href="../05/index.html" title="May 2008"
                                    >May 2008</a
                                >
                            </li>
                            <li>
                                <a href="../04/index.html" title="April 2008"
                                    >April 2008</a
                                >
                            </li>
                            <li>
                                <a href="../03/index.html" title="March 2008"
                                    >March 2008</a
                                >
                            </li>
                            <li>
                                <a href="../02/index.html" title="February 2008"
                                    >February 2008</a
                                >
                            </li>
                            <li>
                                <a href="../01/index.html" title="January 2008"
                                    >January 2008</a
                                >
                            </li>
                            <li>
                                <a
                                    href="../../2007/11/index.html"
                                    title="November 2007"
                                    >November 2007</a
                                >
                            </li>
                            <li>
                                <a
                                    href="../../2007/10/index.html"
                                    title="October 2007"
                                    >October 2007</a
                                >
                            </li>
                            <li>
                                <a
                                    href="../../2007/09/index.html"
                                    title="September 2007"
                                    >September 2007</a
                                >
                            </li>
                            <li>
                                <a
                                    href="../../2007/08/index.html"
                                    title="August 2007"
                                    >August 2007</a
                                >
                            </li>
                            <li>
                                <a
                                    href="../../2007/07/index.html"
                                    title="July 2007"
                                    >July 2007</a
                                >
                            </li>
                        </ul>
                    </li>
                    <li id="text-315934861" class="widget widget_text">
                        <div class="textwidget">
                            <a href="../../archive/index.html"
                                >The Older Archives</a
                            >
                        </div>
                    </li>
                    <li id="categories-1" class="widget widget_categories">
                        <h2 class="widgettitle">Categories</h2>
                        <ul>
                            <li class="cat-item cat-item-12">
                                <a
                                    href="../../category/erlang/index.html"
                                    title="View all posts filed under Erlang"
                                    >Erlang</a
                                >
                            </li>
                            <li class="cat-item cat-item-11">
                                <a
                                    href="../../category/html/index.html"
                                    title="View all posts filed under HTML"
                                    >HTML</a
                                >
                            </li>
                            <li class="cat-item cat-item-8">
                                <a
                                    href="../../category/javascript/index.html"
                                    title="View all posts filed under Javascript"
                                    >Javascript</a
                                >
                            </li>
                            <li class="cat-item cat-item-15">
                                <a
                                    href="../../category/licensing/index.html"
                                    title="View all posts filed under Licensing"
                                    >Licensing</a
                                >
                            </li>
                            <li class="cat-item cat-item-18">
                                <a
                                    href="../../category/mozilla/index.html"
                                    title="View all posts filed under Mozilla"
                                    >Mozilla</a
                                >
                            </li>
                            <li class="cat-item cat-item-5">
                                <a
                                    href="../../category/notech/index.html"
                                    title="View all posts filed under Non-technical"
                                    >Non-technical</a
                                >
                            </li>
                            <li class="cat-item cat-item-6">
                                <a
                                    href="../../category/olpc/index.html"
                                    title="View all posts filed under OLPC"
                                    >OLPC</a
                                >
                            </li>
                            <li class="cat-item cat-item-14">
                                <a
                                    href="../../category/packaging/index.html"
                                    title="View all posts filed under Packaging"
                                    >Packaging</a
                                >
                            </li>
                            <li class="cat-item cat-item-4">
                                <a
                                    href="../../category/politics/index.html"
                                    title="View all posts filed under Politics"
                                    >Politics</a
                                >
                            </li>
                            <li class="cat-item cat-item-3">
                                <a
                                    href="../../category/programming/index.html"
                                    title="View all posts filed under Programming"
                                    >Programming</a
                                >
                            </li>
                            <li class="cat-item cat-item-7">
                                <a
                                    href="../../category/python/index.html"
                                    title="View all posts filed under Python"
                                    >Python</a
                                >
                            </li>
                            <li class="cat-item cat-item-10">
                                <a
                                    href="../../category/ruby/index.html"
                                    title="View all posts filed under Ruby"
                                    >Ruby</a
                                >
                            </li>
                            <li class="cat-item cat-item-19">
                                <a
                                    href="../../category/security/index.html"
                                    title="View all posts filed under Security"
                                    >Security</a
                                >
                            </li>
                            <li class="cat-item cat-item-16">
                                <a
                                    href="../../category/silverlining.1"
                                    title="View all posts filed under Silver Lining"
                                    >Silver Lining</a
                                >
                            </li>
                            <li class="cat-item cat-item-20">
                                <a
                                    href="../../category/programming/testing/index.html"
                                    title="View all posts filed under Testing"
                                    >Testing</a
                                >
                            </li>
                            <li class="cat-item cat-item-9">
                                <a
                                    href="../../category/web/index.html"
                                    title="View all posts filed under Web"
                                    >Web</a
                                >
                            </li>
                            <li class="cat-item cat-item-13">
                                <a
                                    href="../../category/zopeplone/index.html"
                                    title="View all posts filed under Zope/Plone"
                                    >Zope/Plone</a
                                >
                            </li>
                        </ul>
                    </li>
                    <li id="search-2" class="widget widget_search">
                        <form
                            id="searchform"
                            method="get"
                            action="../../index.html"
                        >
                            <div>
                                <input
                                    id="s"
                                    name="s"
                                    type="text"
                                    value=""
                                    tabindex="1"
                                    size="10"
                                />
                                <input
                                    id="searchsubmit"
                                    name="searchsubmit"
                                    type="submit"
                                    value="Find"
                                    tabindex="2"
                                />
                            </div>
                        </form>
                    </li>
                    <li
                        id="recent-posts-2"
                        class="widget widget_recent_entries"
                    >
                        <h2 class="widgettitle">Recent Posts</h2>
                        <ul>
                            <li>
                                <a
                                    href="../../index.html?p=291"
                                    title="Why doctest.js is better than Python&#8217;s doctest"
                                    >Why doctest.js is better than
                                    Python&#8217;s doctest</a
                                >
                            </li>
                            <li>
                                <a
                                    href="../../index.html?p=283"
                                    title="Python Application Package"
                                    >Python Application Package</a
                                >
                            </li>
                            <li>
                                <a
                                    href="../../index.html?p=277"
                                    title="Git-as-sync, not source-control-as-deployment"
                                    >Git-as-sync, not
                                    source-control-as-deployment</a
                                >
                            </li>
                            <li>
                                <a
                                    href="../../index.html?p=253"
                                    title="My Unsolicited Advice For PyPy"
                                    >My Unsolicited Advice For PyPy</a
                                >
                            </li>
                            <li>
                                <a
                                    href="../../index.html?p=250"
                                    title="A Python Web Application Package and Format (we should make one)"
                                    >A Python Web Application Package and Format
                                    (we should make one)</a
                                >
                            </li>
                        </ul>
                    </li>
                    <li
                        id="recent-comments-2"
                        class="widget widget_recent_comments"
                    >
                        <h2 class="widgettitle">Recent Comments</h2>
                        <ul id="recentcomments">
                            <li class="recentcomments">
                                <a
                                    href="http://www.mirsa.com.tr"
                                    rel="external nofollow"
                                    class="url"
                                    >havalandrma</a
                                >
                                on
                                <a
                                    href="../../2012/10/02/why-doctest-js-is-better-than-pythons-doctest/comment-page-1/index.html#comment-228633"
                                    >Why doctest.js is better than
                                    Python&#8217;s doctest</a
                                >
                            </li>
                            <li class="recentcomments">
                                <a
                                    href="http://redealmeidense.com.br/portalx/modules/"
                                    rel="external nofollow"
                                    class="url"
                                    >this website</a
                                >
                                on
                                <a
                                    href="../../2012/10/02/why-doctest-js-is-better-than-pythons-doctest/comment-page-1/index.html#comment-196267"
                                    >Why doctest.js is better than
                                    Python&#8217;s doctest</a
                                >
                            </li>
                            <li class="recentcomments">
                                Eric Pierce on
                                <a
                                    href="../../2012/10/02/why-doctest-js-is-better-than-pythons-doctest/comment-page-1/index.html#comment-195322"
                                    >Why doctest.js is better than
                                    Python&#8217;s doctest</a
                                >
                            </li>
                            <li class="recentcomments">
                                Paul Brian on
                                <a
                                    href="../../2012/10/02/why-doctest-js-is-better-than-pythons-doctest/comment-page-1/index.html#comment-195321"
                                    >Why doctest.js is better than
                                    Python&#8217;s doctest</a
                                >
                            </li>
                            <li class="recentcomments">
                                <a
                                    href="http://benjiyork.com"
                                    rel="external nofollow"
                                    class="url"
                                    >Benji York</a
                                >
                                on
                                <a
                                    href="../../2012/10/02/why-doctest-js-is-better-than-pythons-doctest/comment-page-1/index.html#comment-195320"
                                    >Why doctest.js is better than
                                    Python&#8217;s doctest</a
                                >
                            </li>
                        </ul>
                    </li>
                </ul>
            </div>

            <div id="footer">
                <p>
                    &copy; 2013 Ian Bicking<!--
Does this commenting make me evil?
			|
			Thanks, <a href="http://wordpress.org/" title="WordPress">WordPress</a>
			|
			<a href="http://www.plaintxt.org/themes/barthelme/" title="Barthelme for WordPress" rel="follow">Barthelme</a> theme by <a href="http://scottwallick.com/" title="scottwallick.com" rel="follow">Scott</a>
			| <!-- The following is a link to the theme author's sponsor. Please consider its smallness and that Scott was nice enough to make this theme publically available. -->
                    Sponsor:
                    <a
                        href="http://www.active-sandals.com/womreefsan.html"
                        title="Support: Reef Sandals"
                        >Reef Sandals</a
                    >
                    | Valid
                    <a
                        href="http://validator.w3.org/check?uri=http://blog.ianbicking.org&amp;outline=1&amp;verbose=1"
                        title="Valid XHTML 1.0 Strict"
                        rel="nofollow"
                        >XHTML</a
                    >
                    &amp;
                    <a
                        href="http://jigsaw.w3.org/css-validator/validator?uri=https://ianbicking.org/wp-content/themes/Barthelme-ianb/style.css&amp;profile=css2&amp;warning=no"
                        title="Valid CSS"
                        rel="nofollow"
                        >CSS</a
                    >
                    | --> RSS:
                    <a
                        href="../../feed/rss/index.html"
                        title="Ian Bicking: a blog RSS 2.0 (XML) Feed"
                        rel="alternate"
                        type="application/rss+xml"
                        >Posts</a
                    >
                    &amp;
                    <a
                        href="../../comments/feed/index.html"
                        title="Ian Bicking: a blog Comments RSS 2.0 (XML) Feed"
                        rel="alternate"
                        type="application/rss+xml"
                        >Comments</a
                    >
                </p>
            </div>
        </div>
        <!-- END WRAPPER -->

        <!-- Somehow 37 queries occured in 0.996 seconds. Magic! -->
        <!-- The "Barthelme" theme copyright (c) 2006 Scott Allan Wallick - http://www.plaintxt.org/themes/ -->

        <!-- Google Analytics -->
    </body>
</html>
